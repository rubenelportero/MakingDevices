*******
* ON Semiconductor INTUSOFT IsSpice4 compatible models
* File last modified: August 16th 2003
* Author: Christophe Basso, christophe.basso@onsemi.com
*
*	CS5307 4 phase Buck
*   CS5308 4 phase Buck  
*	CS5322 2 phase Buck
*	CS5323 3 phase Buck
*	CS5155 Synchro Buck
*	CS51411 Low Voltage Buck
*   CS5165  Synchronous Buck Controller
*   CS5165NEA Synchronous Buck Controller
*	CS51220 PWM controller
*   CS5171/2/3/4 1.5A 280 kHz Boost Regulator
*	MC33341 square I-V secondary controller
*   MC34063A DC-DC gated oscillator 1.5A
*   MC34163 DC-DC gated oscillator 3A
*   MC33262 free-running PFC controller
*	MC33363 A and B, OVP, VHVIC Switchers
*	MC33364 QR free-running controller
*	MC33365 same as MC33363 but with brown-out
*	MC44608 AC only
*	NCP1200 transient and averaged
*   NCP1200A transient and averaged
*	NCP1203 8 pin low-cost controller transient and av.
*	NCP1205 8 and 14pin versions, QR controller
*   NCP1207 Averaged QR controller
*   NCP1215 Quasi-fixed Ton variable Toff
*   NCP1216 8 pin low-cost controller transient and av.
*	NCP1217 8 pin low-cost controller transient and av.
*	NCP105X series VHVIC switchers (hysteretic)
*   NCP101X series VHVIC switchers (fixed frequency)
*   NCP1000/1001/1002 VHVIC switchers
*   NCP1000 AC model for freq. analysis
*   NCP1400 Fixed frequency Boost
*   NCP1570 Low Voltage Synchronous Buck Controller
*   NCP1571 Low Voltage Synchronous Buck Controller
*   UC3842B/43B/44B/45B bipolar PWM controllers
*   ** OpAmps **
*	MC33501/02/03 1V CMOS Operational Amps
*   MC33201/02/04
*   TCA0372
*   MC33272/MC33274
*   MC33178/MC33179
*   MC33171/MC33172/MC33174
*   MC33071/MC33072/MC33074
*   MC33077/MC33078/MC33079
*   MC3403
*   LM2902/LM2904
*   LM833
*   LM358
*   LM324
*   **
*	TLV431 1.2V reference voltage
*	TL431  2.5V reference voltage
*   MC33161 Universal Voltage monitor
*   NCP100
*
*********
* =======================================================
*                      CS5308        REV - 4/24/02
*                 ON SEMICONDUCTOR
*      TWO-PHASE BUCK CONTROLLER MACRO-MODEL
* 
*                  with  5-Bit DAC
* 
*      200kHz to 800kHz Operation (Per Phase)
* 
* This model was developed for ON Semiconductor by:
* AEI Systems, LLC
* 5777 W. Century Blvd. Suite 876
* Los Angeles, California 90045
* Copyright 2002, all rights reserved.
*
* This model is subject to change without notice.
* Users may not directly or indirectly re-sell or 
* re-distribute this model. This model may not 
* be used, modified, or altered 
* without the consent of ON Semiconductor. 
*
* For more information regarding modeling services,
* model libraries and simulation products, please
* call AEi Systems at (310) 216-1144, or contact 
* AEi by email: info@aeng.com. http://www.AENG.com
*
* Revision: 4/26/02, version 1.1
* =======================================================

*SRC=CS5308;CS5308;ON Semiconductor;DC-DC;4 Phase BUCK
*SYM=CS5308

*
* Connections: COMP                             VTT
*              | VFB                            |  VTTCT
*              | | VDRP                         |  |  VTTPGD
*              | | | REF                        |  |  |  VCCH2
*              | | | | ILIM                     |  |  |  |  GATE(H)2
*              | | | | | VID25                  |  |  |  |  |  GATE(L)2
*              | | | | | | VID0                 |  |  |  |  |  |  VCCL12
*              | | | | | | | VID1               |  |  |  |  |  |  |  PGND
*              | | | | | | | | VID2             |  |  |  |  |  |  |  |  GATE(L)1
*              | | | | | | | | | VID3           |  |  |  |  |  |  |  |  |  GATE(H)1
*              | | | | | | | | | |  PWERGD      |  |  |  |  |  |  |  |  |  |  VCCH1
*              | | | | | | | | | |  |  CSREF    |  |  |  |  |  |  |  |  |  |  |  VCCL
*              | | | | | | | | | |  |  |  CS1   |  |  |  |  |  |  |  |  |  |  |  |  LGND
*              | | | | | | | | | |  |  |  | CS2 |  |  |  |  |  |  |  |  |  |  |  |  |  ROSC
*              | | | | | | | | | |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |
.SUBCKT CS5308 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 0 28
.MODEL D5322 D BV=100 CJO=4P IBV=100U IS=7.075E-9 M=.4
+ N=0.005 RS=0.78 TT=7.2N VJ=.657
.MODEL D5322A D BV=100 CJO=4P IBV=100U IS=7.075E-9 M=.4
+ N=1.95 RS=0.78 TT=7.2N VJ=.657
.MODEL Q5322 NPN BF=105 BR=4 CJC=12.2P CJE=35.5P IKF=.5
+ IKR=.225 IS=15.2F ISE=8.2P NE=2 NF=1 NR=1 RB=1.49 RC=.149
+ RE=.373 TF=500P TR=85N VAF=98.5 VAR=20 XTB=1.5
.MODEL Q5322A NPN BF=105 BR=4 CJC=12.2P CJE=35.5P IKF=.5
+ IKR=.225 IS=15.2F ISE=8.2P NE=2 NF=1 NR=1 RB=1.49 RC=.149
+ RE=.373 TF=500P TR=10N VAF=98.5 VAR=20 XTB=1.5
.MODEL VCCL_5322 SW VT=4.2 VH=0.1 RON=1 ROFF=1MEG
.MODEL VCCH_5322 SW VT=8.25 VH=0.25 RON=1 ROFF=1MEG
.MODEL DDEF D
.SUBCKT POLE5322 1 2
*PARAMS ARE DC GAIN = {K}
* POLE FREQ = {FP} HERTZ
E1 0 3 1 0 {K}
RI 1 0 1E12
R1 3 4 1MEG
R2 4 2 1MEG
C2 2 4 {1U/(6.28319*FP)}
E2 2 0 0 4 1E6
.ENDS
.SUBCKT LIMIT5322 1 2
*PARAMETERS ARE GAIN={K} 
*POS LIMIT = {PLIM}  NEG LIMIT = {NLIM}
RIN 1 0 1E12
E1 3 0 0 1 {K}
RC1 2 4 1MEG
C1 2 4 1F IC=0
R1 3 4 1MEG
E2 2 0 0 4 1E6
*DIODES WILL HAVE .0597V DROP AT 10V INPUT FOR GAIN=1
*IDIODE = IS*EXP(.597/.O26)
VN 5 2 {NLIM-.0597}
DN 4 5 DN
.MODEL DN D(IS=1E-12 N=.14319)
VP 2 6 {PLIM-.0597}
DP 6 4 DN
.ENDS
.SUBCKT RS5322 2 3 4 5 {TD=1N}
*RS LATCH FLIP FLOP TERMINAL ID#
C1 11 0 10P
R3 10 8 {TD/6.9315P}
C3 8 0 10P
B1 10 0 V=V(2)>1 ? V(5)>1 ? 0 : 2
B2 16 0 V=V(3)>1 ? V(4)>1 ? 0 : 2
B5 4 0 V=V(8)>1 ? 2 : 0
B6 5 0 V=V(11)>1 ? 2 : 0
R1 16 11 {TD/6.9315P}
.ENDS
B1 29 0 V=3.31/(1+EXP(3.235-1.96*V(26)))
I1 42 4 DC=1M
D1 4 42 D5322 
V1 29 42
R1 4 0 1G
S1 42 30 26 0 VCCL_5322  
R2 30 0 100K
B2 26 0 I=I(V1)
B3 31 147 V=V(10)<1.25 ? V(9)<1.25 ? 0.4 : V(10)>1.25 ? V(9)>1.25 ? 0.4 : 0
B4 33 31 V=V(9)<1.25 ? 0.2 : 0
B5 34 33 V=V(8)>1.25 ? 0.1 : 0
B6 35 34 V=V(7)>1.25 ? 0.05 : 0
V2 36 0 DC=1.875
B7 36 35 V=V(6)<1.25 ? 0.025 : 0
R3 9 0 1G
R4 8 0 1G
R5 7 0 1G
R6 6 0 1G
R7 10 0 1G
R8 37 10 50K
D2 42 38 D5322A
R9 38 9 50K
D3 42 39 D5322A
R10 39 8 50K
D4 42 40 D5322A
R11 40 7 50K
D5 42 41 D5322A
R12 41 6 50K
D6 42 37 D5322A
V3 44 0 PULSE 0 2 0.1U
V4 45 0 PULSE 0 86.4K 0 86.4K
V5 67 28
S2 42 46 25 0 VCCH_5322  
R13 46 0 100K
E1 47 0 13 12 100
E2 43 0 14 12 100
X1 48 50 POLE5322 { K=35M FP=7MEG }
X2 49 51 POLE5322 { K=35M FP=7MEG }
X3 43 49 LIMIT5322 { K=1 PLIM=20 NLIM=0 }
X4 47 48 LIMIT5322 { K=1 PLIM=20 NLIM=0 }
B8 59 0 V=V(50)+V(51)
X5 59 53 POLE5322 { K=1.86 FP=3K }
B9 3 0 V=V(32) + 0.91*v(59)
B10 56 0 V=V(44)>1 ? V(30)>1.65 ? V(46)>1.65 ? V(53)<V(5) ? V(17)>1.25 ? 2 : 0
B11 0 54 I=V(12)<(1.12*V(32)) ? V(12)>(0.88*V(32)) ? 0  : 100U
Q1 11 54 0 Q5322 
C1 54 0 15N IC=0.65
R17 54 0 20K
X6 56 55 52 57 RS5322 { TD=1N }
B12 55 0 V=V(56)<1 ? 2 : 2/(1+EXPL((200*(0.27-V(1))),1K))
D7 0 61 D5322 
B14 61 0 I=2.5U*V(52)
R23 61 1 1M
R24 61 0 2.5MEG
E4 65 0 32 2 2.133K
X8 65 66 LIMIT5322 { K=1 PLIM=100 NLIM=100 }
B16 0 61 I=V(52)<1 ? 30U*(1-EXP(-V(66)))/(1+EXP(-V(66))) : V(61)/2.5MEG
D10 61 64 D5322 
B17 64 0 V=V(42)*0.82
D9 0 61 D5322 
B18 67 0 V=V(42)/3.305
D11 0 2 D5322
B19 2 0 I=I(V5)/3
B20 68 0 V=V(1)<(V(50)+V(130)+0.4+V(12)) ? 2 : 0
R26 68 70 43K
C3 70 0 10P
B21 72 0 V=V(70)>1 ? 2 : 0
B22 69 0 V=V(1)<(V(51)+V(131)+0.4+V(12)) ? 2 : 0
R27 69 71 43K
C4 71 0 10P
B23 73 0 V=V(71)>1 ? 2 : 0
X9 75 74 81 76 RS5322 { TD=1N }
B24 75 0 V=V(44)>1 ? V(52)<1 ? V(72)<1 ? V(50)<0.4 ? 2 : 0
B25 74 0 V=V(75)<1 ? 2 : V(82)
X10 77 78 79 80 RS5322 { TD=1N }
B26 77 0 V=V(75)>1 ? V(76)>1 ? 2 : 0
B27 78 0 V=V(77)>1 ? V(74)>1 ? 0 : 2
B28 82 0 V=(SIN(81.43G*I(V5)*V(45)))>0 ? 2 : 0
X11 83 84 85 88 RS5322 { TD=1N }
B29 83 0 V=V(44)>1 ? V(52)<1 ? V(73)<1 ? V(51)<0.4 ? 2 : 0
B30 84 0 V=V(83)<1 ? 2 : V(82)>1 ? 0 : 2
X12 86 87 89 90 RS5322 { TD=1N }
B31 86 0 V=V(83)>1 ? V(88)>1 ? 2 : 0
B32 87 0 V=V(86)>1 ? V(84)>1 ? 0 : 2
E5 91 22 108 93 1
Q3 94 95 108 Q5322A 
Q4 108 96 22 Q5322A 
V9 91 97
R28 93 95 1
R29 97 96 1
R30 24 98 8
C5 98 22 14N
E6 94 22 25 22 1
V10 108 24
B33 25 22 I=I(V10)<0 ? 0 : I(V10)
B34 108 93 I=1.4M*V(101)*(V(25)-V(22))+I(V9)
R31 22 24 12K
B35 101 0 V=(V(23)-V(22))<1.8 ? V(80)>1 ?  2 : -2
R33 20 112 8
B36 102 0 V=(V(24)-V(22))<1.8 ? V(79)>1 ?  2 : -2
E7 92 22 100 103 1
Q5 104 105 100 Q5322A 
Q6 100 106 22 Q5322A 
V11 92 107
R34 103 105 1
R35 107 106 1
R36 23 109 8
C7 109 22 14N
E8 104 22 21 22 1
V12 100 23
B37 21 22 I=I(V12)<0 ? 0 : I(V12)
B38 100 103 I=1.4M*V(102)*(V(21)-V(22))+I(V11)
R37 22 23 12K
C8 129 22 14N
C9 112 22 14N
E9 99 22 110 111 1
Q7 113 114 110 Q5322A 
Q8 110 115 22 Q5322A 
V13 99 116
R39 111 114 1
R40 116 115 1
R41 19 129 8
E10 113 22 18 22 1
V14 110 19
B39 18 22 I=I(V14)<0 ? 0 : I(V14)
B40 110 111 I=1.4M*V(117)*(V(18)-V(22))+I(V13)
R42 22 19 12K
E11 120 22 121 122 1
Q9 123 124 121 Q5322A
Q10 121 125 22 Q5322A 
V15 120 126
R43 122 124 1
R44 126 125 1
E12 123 22 21 22 1
V16 121 20
B41 21 22 I=I(V16)<0 ? 0 : I(V16)
B42 121 122 I=1.4M*V(118)*(V(21)-V(22))+I(V15)
R45 22 20 12K
B43 117 0 V=(V(20)-V(22))<1.8 ? V(90)>1 ?  2 : -2
B44 118 0 V=(V(19)-V(22))<1.8 ? V(89)>1 ?  2 : -2
B45 127 0 V=V(80) > 1 ? I(B45)*1G : 0
B46 130 0 V=V(127) < 0.375 ? V(127) : 0.375
B47 128 0 V=V(90) > 1 ? I(B47)*1G : 0
B48 131 0 V=V(128) < 0.375 ? V(128) : 0.375
C10 127 0 308.64P
C11 128 0 308.64P
F1 0 127 V5 1
F2 0 128 V5 1
B49 132 0 V=V(44)>1 ? V(15) > 1.05 ? 2 : 0
B50 133 0 V=V(132) < 1 ? 2 : V(16) < 0.32 ? 0 : 2
B51 134 0 V=V(135) < 1 ? 2 : V(16) < 1.0 ? 2 : 0
D12 16 42 DDEF 
F3 42 16 V5 0.972
R49 136 137 20K
R50 141 142 20K
R51 143 144 20K
Q11 16 137 146 Q5322 
Q12 16 142 146 Q5322 
Q13 17 144 0 Q5322 
V17 146 0 DC=241.2M
X13 132 133 136 135 RS5322 { TD=1N }
X14 134 135 141 143 RS5322 { TD=1N }
B52 147 32 V=V(10)<1.25 ? V(9)>1.25 ? V(8)<1.25 ? V(7)<1.25 ? 0.8 : 0
.ENDS 
**********
*==========================================================
* CS5307
* ON Semiconductor
* Four-Phase Buck CPU Controller with 5-Bit DAC 200kHz to 800kHz Operation (Per Phase)
*
* This model was developed for ON Semiconductor by:
* AEI Systems, LLC
* 5777 W. Century Blvd. Suite 876
* Los Angeles, California 90045
* Copyright 2002, all rights reserved.
*
* This model is subject to change without notice.
* Users may not directly or indirectly re-sell or 
* re-distribute this model. This model may not 
* be used, modified, or altered 
* without the consent of ON Semiconductor. 
*
* For more information regarding modeling services,
* model libraries and simulation products, please
* call AEi Systems at (310) 216-1144, or contact 
* AEi by email: info@aeng.com. http://www.AENG.com
*
* Revision: C 
*==========================================================
*SRC=CS5307;CS5307;ON Semiconductor;DC-DC;4 Phase BUCK
*SYM=CS5307
.SUBCKT CS5307 0 2 3 4 5 6 7 8 9 10 11 12 
+ 13 14 15 16 17 18 19 20 21 22 23 24
*TERMINAL IDENTIFICATIONS:
*GND=0 OSCSET=2 ROSC=3 CS1=4 CS2=5 CS3=6 CS4=7 CSREF=8
*VDRP= 9 VFB=10 COMP=11 SS=12 PWRGD=13 SGND=14
*V1D4=15 V1D3=16 V1D2=17 V1D1=18 V1D0=19
*GATE4=20 GATE3=21 GATE2=22 GATE1=23 VCC=24
.MODEL Q5307 NPN (IS=15.2F NF=1 BF=105 VAF=98.5 IKF=.5
+ ISE=8.2P NE=2 BR=4 NR=1 VAR=20 IKR=.225 RE=.373 RB=1.49
+ RC=.149 XTB=1.5 CJE=35.5P CJC=12.2P TF=500P TR=85N)
.MODEL D5307 D (RS=0.78 N=0.005 IS=7.075E-9 
+ CJO=4P TT=7.2N M=.4 VJ=.657 BV=100 IBV=100U)
.MODEL D5307A D (RS=0.78 N=1.95 IS=7.075E-9 
+ CJO=4P TT=7.2N M=.4 VJ=.657 BV=100 IBV=100U)
.MODEL UVL_5307 SW (VT=8.5 VH=0.5 RON=1 ROFF=1MEG
.SUBCKT POLE5307 1 2
*PARAMS ARE DC GAIN = {K}
* POLE FREQ = {FP} HERTZ
E1 0 3 1 0 {K}
RI 1 0 1E12
R1 3 4 1MEG
R2 4 2 1MEG
C2 2 4 {1U/(6.28319*FP)}
E2 2 0 0 4 1E6
.ENDS
.SUBCKT LIMIT5307 1 2
*PARAMETERS ARE GAIN={K} 
*POS LIMIT = {PLIM}  NEG LIMIT = {NLIM}
RIN 1 0 1E12
E1 3 0 0 1 {K}
RC1 2 4 1MEG
C1 2 4 1F IC=0
R1 3 4 1MEG
E2 2 0 0 4 1E6
*DIODES WILL HAVE .0597V DROP AT 10V INPUT FOR GAIN=1
*IDIODE = IS*EXP(.597/.O26)
VN 5 2 {NLIM-.0597}
DN 4 5 DN
.MODEL DN D(IS=1E-12 N=.14319)
VP 2 6 {PLIM-.0597}
DP 6 4 DN
.ENDS
.SUBCKT RS5307 2 3 4 5 {TD=1N}
*RS LATCH FLIP FLOP TERMINAL ID#
*SET=2 RESET=3 Q=4 QB=5
C1 11 0 10P
R3 10 8 {TD/6.9315P}
C3 8 0 10P
B1 10 0 V=V(2)>1 ? V(5)>1 ? 0 : 2
B2 16 0 V=V(3)>1 ? V(4)>1 ? 0 : 2
B5 4 0 V=V(8)>1 ? 2 : 0
B6 5 0 V=V(11)>1 ? 2 : 0
R1 16 11 {TD/6.9315P}
.ENDS
.SUBCKT OSC5307 1 2 8 6
B2 4 5 V=SIN(9*V(3))/9+SIN(10*V(3))/10+SIN(11*V(3))/11+
+SIN(12*V(3))/12+SIN(13*V(3))/13+SIN(14*V(3))/14+SIN(15*V(3))/15
B3 5 0 V=SIN(V(3))+SIN(2*V(3))/2+SIN(3*V(3))/3+SIN(4*V(3))/4+
+SIN(5*V(3))/5+SIN(6*V(3))/6+SIN(7*V(3))/7+SIN(8*V(3))/8
B4 6 0 V=(0.5-0.31831*V(4))*0.14
B5 8 0 V=V(6)<0.07 ? 2 : 0
B1 3 0 V=6.283185307*V(1)*V(2)
.ENDS
.SUBCKT FFLOP 7 8 6 5 {TD=1N}
C1 1 0 1P
B1 2 0 V=V(7)>1 ? V(14)>1 ? V(6)>1 ? 0 : 2
B2 5 0 V=V(1)>1 ? 2 : 0
R2 3 4 {TD/0.693P}
C2 4 0 1P
B3 3 0 V=V(8)>1 ? V(14)>1 ? 2 : V(5)>1 ? 0 : 2
B4 6 0 V=V(4)>1 ? 2 : 0
R3 9 10 {TD/0.693P}
C3 10 0 1P
B5 9 0 V=V(7)>1 ?  V(14)>1 ? 0 : 2
B6 13 0 V=V(10)>1 ? 2 : 0
R4 11 12 {TD/0.693P}
C4 12 0 1P
B7 11 0 V=V(7)<1 ? 0 : V(13)>1 ? V(8)>1 ? 0 : 2
B9 14 0 V=V(12)>1 ? 2 : 0
R1 2 1 {TD/0.693P}
.ENDS
S1 25 30 24 0 UVL_5307
R1 30 0 100K
B1 25 119 V=3.3/(1+EXP(16.5-5*V(24)))
D1 25 31 D5307A
R2 31 15 50K
D2 25 26 D5307A
R3 26 16 50K
D3 25 27 D5307A
R4 27 17 50K
D4 25 28 D5307A
R5 28 18 50K
D5 25 29 D5307A
R6 29 19 50K
B2 35 36 V=V(15)>1.25 ? 0.4 : 0
B3 32 35 V=V(16)>1.25 ? 0.2 : 0
B4 33 32 V=V(17)>1.25 ? 0.1 : 0
B5 37 33 V=V(18)>1.25 ? 0.05 : 0
V1 34 14 1.725
B6 34 37 V=V(19)>1.25 ? 0.025 : 0
R7 16 0 1G
R8 17 0 1G
R9 18 0 1G
R10 19 0 1G
R11 15 0 1G
E1 124 0 4 8 100
E3 111 0 5 8 100
E5 116 0 6 8 100
E7 121 0 7 8 100
X1 46 38 POLE5307 {K=40M FP=7MEG }
X2 46 39 POLE5307 {K=30M FP=7MEG }
X3 52 40 POLE5307 {K=40M FP=7MEG }
X4 51 42 POLE5307 {K=40M FP=7MEG }
X5 52 41 POLE5307 {K=30M FP=7MEG }
X6 51 43 POLE5307 {K=30M FP=7MEG }
X7 50 44 POLE5307 {K=40M FP=7MEG }
X8 50 45 POLE5307 {K=30M FP=7MEG }
B7 47 0 V=0.75*(V(38)+V(40)+V(42)+V(44))
X9 47 48 POLE5307 {K=1 FP=3.07K }
B8 49 0 V=V(47)+V(36)+10M
X10 49 9 LIMIT5307 {K=1 PLIM=7 NLIM=0.3 }
B9 53 0 I=V(57)<1 ? 10M : V(128)>1 ? 0 : 10M
C1 128 0 1N IC=0
R28 13 53 38
X11 55 54 56 58 RS5307 {TD=1N }
B10 55 0 V=V(57)<1 ? 0 : V(30)>1 ? V(48)<V(2) ? 2 : 0
B11 54 0 V=V(55)<1 ? 2 : V(62)<0.3 ? 0 : 2
V4 57 0 PULSE 0 2 0.1U
V5 59 0 PULSE 0 86.4K 0 86.4K
R31 12 62 1
B12 60 0 V=V(15)>1.25 ? V(16)>1.25 ? V(17)>1.25 ? V(18)>1.25 ? 
+ V(19)>1.25 ? 2 : V(30)>1 ? V(56)<1 ? 0 : 2
D6 62 25 D5307
D7 0 62 D5307
B13 25 62 I=80U*(2-V(56))
B14 62 0 I=2.5U*V(56)
Q2 156 67 0 Q5307
B15 0 67 I=4.3U*V(65)
X12 61 65 LIMIT5307 {K=1 PLIM=10 NLIM=10 }
E8 61 0 156 62 5K
R34 67 0 20K
R36 156 0 2.5MEG
E9 68 0 36 10 33.33
X13 68 63 LIMIT5307 {K=1 PLIM=100 NLIM=100 }
B16 0 156 I=30U*(1-EXP(-V(63)))/(1+EXP(-V(63)))
D8 0 156 D5307
D9 156 25 D5307
C2 156 0 1.5N
B17 69 0 V=V(11)<(V(8)+0.6+V(39)+V(98)) ? 2 : 0
R38 69 66 10.82K
C3 66 0 10P
B18 70 0 V=V(66)>1 ? 2 : 0
B19 71 0 V=V(11)<(V(8)+0.6+V(41)+V(101)) ? 2 : 0
R39 71 73 10.82K
C4 73 0 10P
B20 72 0 V=V(73)>1 ? 2 : 0
B21 74 0 V=V(11)<(V(8)+0.6+V(43)+V(104)) ? 2 : 0
R40 74 76 10.82K
C5 76 0 10P
B22 78 0 V=V(76)>1 ? 2 : 0
B23 75 0 V=V(11)<(V(8)+0.6+V(45)+V(107)) ? 2 : 0
R41 75 77 10.82K
C6 77 0 10P
B24 79 0 V=V(77)>1 ? 2 : 0
B25 80 0 V=V(38)>0.33 ? 2 : 0
R42 80 81 5.77K
C7 81 0 10P
B26 82 0 V=V(81)>1 ? 2 : 0
B27 83 0 V=V(40)>0.33 ? 2 : 0
R43 83 84 5.77K
C8 84 0 10P
B28 85 0 V=V(84)>1 ? 2 : 0
B29 86 0 V=V(42)>0.33 ? 2 : 0
R44 86 87 5.77K
C9 87 0 10P
B30 88 0 V=V(87)>1 ? 2 : 0
B31 89 0 V=V(44)>0.33 ? 2 : 0
R45 89 90 5.77K
C10 90 0 10P
B32 91 0 V=V(90)>1 ? 2 : 0
B33 92 0 V=V(60)<1 ? V(82)<1 ? V(70)<1 ? 2 : 0
B34 93 0 V=V(60)<1 ? V(85)<1 ? V(72)<1 ? 2 : 0
B35 94 0 V=V(60)<1 ? V(88)<1 ? V(78)<1 ? 2 : 0
B36 95 0 V=V(60)<1 ? V(91)<1 ? V(79)<1 ? 2 : 0
V8 0 119 
B37 100 0 V=V(59)-1/V(96)/4
B38 103 0 V=V(59)-1/V(96)/2
B39 106 0 V=V(59)-3/V(96)/4
B43 114 0 V=V(57)<1 ? 0 : V(92)
B44 96 0 V=12.96G*ABS(I(V10))+1
B48 118 0 V=V(57)<1 ? 0 : V(93)
B52 127 0 V=V(57)<1 ? 0 : V(94)
B56 134 0 V=V(57)<1 ? 0 : V(95)
B58 144 0 V=V(25)/3.3
D10 0 10 D5307
B59 10 0 I=I(V10)/3
V10 144 3 
B60 24 0 I=I(V8)
D11 0 24 D5307
B61 143 0 V=(V(24)-2.6)*(V(145)+3M)/4.012*V(57)
B62 0 145 I=175U*(V(115)-V(113))
D12 0 145 D5307
D13 145 146 D5307
V11 143 147 
B63 24 0 I=I(V11)<0 ? 0 :  I(V11)
V12 146 0 2
R64 147 23 10
R65 23 0 100G
R66 145 0 10MEG
B64 148 0 V=(V(24)-2.6)*(V(151)+3M)/4.012*V(57)
B65 0 151 I=175U*(V(125)-V(122))
D14 0 151 D5307
D15 151 146 D5307
V13 148 149 
B66 24 0 I=I(V13)<0 ? 0 :  I(V13)
R67 149 22 10
R68 22 0 100G
R69 151 0 10MEG
B67 150 0 V=(V(24)-2.6)*(V(154)+3M)/4.012*V(57)
B68 0 154 I=175U*(V(137)-V(133))
D16 0 154 D5307
D17 154 146 D5307
V14 150 152 
B69 24 0 I=I(V14)<0 ? 0 :  I(V14)
R70 152 21 10
R71 21 0 100G
R72 154 0 10MEG
R73 11 156 1
B70 153 0 V=(V(24)-2.6)*(V(158)+3M)/4.012*V(57)
B71 0 158 I=175U*(V(142)-V(141))
D18 0 158 D5307
D19 158 146 D5307
V15 153 155 
B72 24 0 I=I(V15)<0 ? 0 :  I(V15)
R74 155 20 10
R75 20 0 100G
R76 158 0 10MEG
X31 124 46 LIMIT5307 {K=1 PLIM=20 NLIM=0.3 }
X32 111 52 LIMIT5307 {K=1 PLIM=20 NLIM=0.3 }
X33 116 51 LIMIT5307 {K=1 PLIM=20 NLIM=0.3 }
X34 121 50 LIMIT5307 {K=1 PLIM=20 NLIM=0.3 }
B73 131 0 V=V(8)>0.975*V(36) ? V(8)<1.975 ? 2 : 0
R77 0 13 1G
D20 0 53 D5307
R78 131 128 721K
X35 59 96 99 98 OSC5307
X36 100 96 102 101 OSC5307
X37 103 96 105 104 OSC5307
X38 106 96 108 107 OSC5307
X39 114 99 115 113 FFLOP {TD=1N }
X40 118 102 125 122 FFLOP {TD=1N }
X41 127 105 137 133 FFLOP {TD=1N }
X42 134 108 142 141 FFLOP {TD=1N }
.ENDS
**********
*==========================================================
* CS51411
* ON Semiconductor
* 1.5A 260kHz, Low Voltage, Buck Regulator with External Synchronization Capability
*
* This model was developed for ON Semiconductor by:
* AEI Systems, LLC
* 5777 W. Century Blvd. Suite 876
* Los Angeles, California 90045
* Copyright 2002, all rights reserved.
*
* This model is subject to change without notice.
* Users may not directly or indirectly re-sell or 
* re-distribute this model. This model may not 
* be used, modified, or altered 
* without the consent of ON Semiconductor. 
*
* For more information regarding modeling services,
* model libraries and simulation products, please
* call AEi Systems at (310) 863-8034, or contact 
* AEi by email: info@aeng.com. http://www.AENG.com
*
* Revision: 1.0 
*==========================================================
**********
*SRC=CS51411;CS51411;ON Semiconductor;DC-DC;Buck regulator
*SYM=CS51411
.SUBCKT CS51411 1 2 3 4 5 0 7 8
*TERMINAL ID#
*BOOST=1 VIN=2 VSW=3 SHDNB=4 SYNC=5
*GND=0 VFB=7 VC=8
.MODEL D51411 D (RS=0.78 N=0.005 IS=7.075E-9 
+ CJO=4P TT=7.2N M=.4 VJ=.657 BV=100 IBV=100U)
.MODEL D51411A D (RS=0.78 N=1.95 IS=7.075E-9 
+ CJO=4P TT=7.2N M=.4 VJ=.657 BV=100 IBV=100U)
.MODEL D51411B D (RS=0.78 N=0.2 IS=7.075E-9 
+ CJO=4P TT=7.2N M=.4 VJ=.657 BV=100 IBV=100U)
.MODEL D51411D D CJO=2P
.MODEL VS51411 SW (VT=1 RON=0.28 ROFF=1MEG
.SUBCKT RS51411 2 3 4 5 {TD=1N}
C1 11 0 10P
R3 10 8 {TD/6.9315P}
C3 8 0 10P
B1 10 0 V=V(2)>1 ? V(5)>1 ? 0 : 2
B2 16 0 V=V(3)>1 ? V(4)>1 ? 0 : 2
B5 4 0 V=V(8)>1 ? 2 : 0
B6 5 0 V=V(11)>1 ? 2 : 0
R1 16 11 {TD/6.9315P}
.ENDS
.SUBCKT LIMIT51411 1 2
*PARAMETERS ARE GAIN={K} 
*POS LIMIT = {PLIM}  NEG LIMIT = {NLIM}
RIN 1 0 1E12
E1 3 0 0 1 {K}
RC1 2 4 1MEG
C1 2 4 1F IC=0
R1 3 4 1MEG
E2 2 0 0 4 1E6
*DIODES WILL HAVE .0597V DROP AT 10V INPUT FOR GAIN=1
*IDIODE = IS*EXP(.597/.O26)
VN 5 2 {NLIM-.0597}
DN 4 5 DN
.MODEL DN D(IS=1E-12 N=.14319)
VP 2 6 {PLIM-.0597}
DP 6 4 DN
.ENDS
D1 2 10 D51411D
D2 1 10 D51411D
B1 10 0 I=V(23)<1 ? V(55)<1 ? V(9)>1 ? ABS(V(53)) : 0
V1 51 3 0.2
X1 13 14 LIMIT51411 {K=1 PLIM=100 NLIM=100 }
B2 13 0 V=158.321*(I(V1)-0.765)
V3 9 0 PULSE 0 2 0.1U
X4 20 11 21 22 RS51411 {TD=1N }
B8 11 0 V=V(9)<1 ? 0 : V(20)<1 ? 2 : V(15)
B9 20 0 V=V(9)<1 ? 2 : V(48)
I1 24 4 5U
D6 4 24 D51411A
V6 24 0 5
B10 23 0 V=V(4)>1.3 ? 0 : 2
R2 0 8 8MEG
B11 27 0 I=50U/(1+EXP(V(25)))
D7 0 27 D51411
C1 0 8 2N
X5 28 25 LIMIT51411 {K=1 PLIM=100 NLIM=100 }
E1 28 0 30 7 512
D8 8 32 D51411B
V8 32 0 1.46
D9 8 27 D51411B
D10 0 8 D51411A
V9 30 0 1.27
I2 32 8 25U
B12 26 0 V=V(7)<0.32 ? 2 : 0
B13 29 0 V=V(26)>1 ? I(V1)>1.5 ? 2 : I(V1)>2.3 ? 2 : 0
R4 29 31 17.312K
C2 31 0 10P
B14 33 0 V=V(31)>1 ? 2 : 0
B15 34 0 V=V(8)<(V(7)+35.3M*(V(39)-1.667)) ? 2 : 0
R5 34 35 21.64K
C3 35 0 10P
B16 36 0 V=V(35)>1 ? 2 : 0
V10 37 0 1.4M
B17 38 0 V=V(45)<1 ? 2 : V(5)>1.5 ? 2 : 0
B18 39 0 I=V(26)>1 ? 132.375U*(2-V(48)) : 529.5U*(2-V(48))
B19 40 0 V=V(45)<1 ? 2 : V(39)>3.333 ? 0 : V(47)
C4 39 0 216P
X6 45 40 48 44 RS51411 {TD=1N }
B20 45 0 V=V(9)<1 ? 0 : V(39)<1.7 ? 0 : V(23)<1 ? V(55)<1 ? 2 : 0
X7 45 38 46 43 RS51411 {TD=1N }
R6 5 37 13.9K
B21 49 0 V=V(38)>1 ? V(50)>1 ? 0 : 2
B22 50 0 V=V(45)>1 ? V(43)>1 ? 2 : 0
X8 50 49 47 41 RS51411 {TD=1N }
V11 42 0 1.66
B23 24 39 I=V(26)>1 ? 26.4825U : 105.93U
D11 42 39 D51411
D12 39 24 D51411
B24 54 0 V=(I(V1)-0.625)/28.5/(1+EXP(-V(17)))
B28 55 0 V=V(2)>3.3 ? 0 : 2
B29 15 0 V=V(36)<1 ? V(33)<1 ? V(23)<1 ? V(55)<1 ? 2 : 0
S1 2 51 63 0 VS51411 
X9 18 17 LIMIT51411 {K=1 PLIM=100 NLIM=100 }
B30 18 0 V=32.222*(I(V1)-1.154)
X10 62 19 LIMIT51411 {K=1 PLIM=100 NLIM=100 }
B31 62 0 V=-20.515*(I(V1)+44M)
B32 0 51 I=V(23)<1 ? V(55)<1 ? V(9)>1 ? 10M : 0
D17 51 2 D51411D
B33 53 52 V=(I(V1)+1.233)/133.333/(1+EXP(V(14)))/(1+EXP(V(19)))
B34 52 54 V=(I(V1)+0.457)/80.863/(1+EXP(-V(14)))/(1+0.8*EXP(V(17)))
R14 10 0 10MEG
B35 63 0 V=V(21)>1 ? V(48) : 0
.ENDS
**********
*==========================================================
* CS5155
* ON Semiconductor
* CPU 5-Bit Synchronous Buck Controller
*
* This model was developed for ON Semiconductor by:
* AEI Systems, LLC
* 5777 W. Century Blvd. Suite 876
* Los Angeles, California 90045
* Copyright 2002, all rights reserved.
*
* This model is subject to change without notice.
* Users may not directly or indirectly re-sell or 
* re-distribute this model. This model may not 
* be used, modified, or altered 
* without the consent of ON Semiconductor. 
*
* For more information regarding modeling services,
* model libraries and simulation products, please
* call AEi Systems at (310) 863-8034, or contact 
* AEi by email: info@aeng.com. http://www.AENG.com
*
* Revision: Rev A 
*==========================================================
**********
*SRC=CS5155;CS5155;ON Semiconductor;DC-DC;Synchronous Buck
*SYM=CS5155
.SUBCKT CS5155 1 2 3 4 5 6 7 8 9 10 11 12 13 0 15 16
*TERMINAL IDENTIFICATION #:
*VID0=1 VID1=2 VID2=3 VID3=4 SS=5 VID4=6 COFF=7
*VFFB=8 VCC2=9 VGATE(H)=10 PGnd=11 VATE(L)=12 
*VCC1=13 LGnd=0 COM=15 VFB=16
*VID0=1 VID1=2 VID2=3 VID3=4 SS=5 VID4=6 COFF=7
*VFFB=8 VCC2=9 VGATE(H)=10 PGND=11 VATE(L)=12 
*VCC1=13 LGND=0 COM=15 VFB=16
.MODEL D5155 D (RS=0.78 N=0.005 IS=7.075E-9 
+ CJO=4P TT=7.2N M=.4 VJ=.657 BV=100 IBV=100U)
.MODEL D5155A D (RS=0.78 N=1.95 IS=7.075E-9 
+ CJO=4P TT=7.2N M=.4 VJ=.657 BV=100 IBV=100U)
.MODEL D5155B D (RS=0.78 N=0.5 IS=7.075E-9 
+ CJO=4P TT=7.2N M=.4 VJ=.657 BV=100 IBV=100U)
.MODEL Q5155 NPN (IS=15.2F NF=1 BF=500 VAF=98.5 IKF=.5
+ ISE=8.2P NE=2 BR=4 NR=1 VAR=20 IKR=.225 RE=.01 RB=1.49
+ RC=.01 XTB=1.5 CJE=35.5P CJC=5P TF=500P TR=2N)
.MODEL VCC1_5155 SW (VT=3.875 VH=0.025 RON=1 ROFF=1MEG
.SUBCKT RS5155 2 3 4 5 {TD=1N}
*RS LATCH FLIP FLOP TERMINAL ID#
C1 11 0 10P
R3 10 8 {TD/6.9315P}
C3 8 0 10P
B1 10 0 V=V(2)>1 ? V(5)>1 ? 0 : 2
B2 16 0 V=V(3)>1 ? V(4)>1 ? 0 : 2
B5 4 0 V=V(8)>1 ? 2 : 0
B6 5 0 V=V(11)>1 ? 2 : 0
R1 16 11 {TD/6.9315P}
.ENDS
.SUBCKT LIMIT5155 1 2
*PARAMETERS ARE GAIN={K} 
*POS LIMIT = {PLIM}  NEG LIMIT = {NLIM}
RIN 1 0 1E12
E1 3 0 0 1 {K}
RC1 2 4 1MEG
C1 2 4 1F IC=0
R1 3 4 1MEG
E2 2 0 0 4 1E6
*DIODES WILL HAVE .0597V DROP AT 10V INPUT FOR GAIN=1
*IDIODE = IS*EXP(.597/.O26)
VN 5 2 {NLIM-.0597}
DN 4 5 DN
.MODEL DN D(IS=1E-12 N=.14319)
VP 2 6 {PLIM-.0597}
DP 6 4 DN
.ENDS
R1 4 0 1G
R2 3 0 1G
R3 2 0 1G
R4 1 0 1G
R5 6 0 1G
R6 17 6 50K
D1 18 19 D5155A
R7 19 4 50K
D2 18 20 D5155A
R8 20 3 50K
D3 18 21 D5155A
R9 21 2 50K
D4 18 22 D5155A
R10 22 1 50K
D5 18 17 D5155A
S1 18 23 13 0 VCC1_5155
R11 23 0 100K
B1 18 0 V=5/(1+EXP(1.43*(3.5-V(13))))
B2 25 0 V=V(1)>1.25 ? 50M : 0
B3 24 25 V=V(2)>1.25 ? 0.1 : 0
B4 26 24 V=V(3)>1.25 ? 0.2 : 0
B5 28 26 V=V(4)>1.25 ? 0.4 : 0
B6 29 0 V=V(6)>1.25 ? V(28)>0.725 ? 1.244*V(18)/5 : 
+ V(6)>1.25 ? (3.54-2*V(28))*V(18)/5 : (2.09-V(28))*V(18)/5
B7 18 5 I=30U*(2-V(33))
B8 5 0 I=V(23)>2.5 ? V(32)>1 ? 1U*V(33) : 1M
X1 27 31 33 34 RS5155 {TD=1N }
B9 27 0 V=V(31)<1 ? 2 : V(5)>2.5 ? V(51)>1 ? 0 : 2
B10 31 0 V=V(32)<1 ? 0 : V(5)<0.7 ? 0 : 2
V2 32 0 PULSE 0 2 0.1U
D6 0 5 D5155
R15 0 15 496K
D9 41 65 D5155A
B13 37 0 I=1.275M*V(32)/(1+50*EXP(V(39)))
D10 0 37 D5155
C2 15 0 0.22U IC=0.16
X2 38 39 LIMIT5155 {K=1 PLIM=100 NLIM=100 }
E1 38 0 29 16 100
V3 35 0 1.05
X3 48 42 63 47 RS5155 {TD=1N }
B16 48 0 V=V(42)<1 ? 2 : V(53)>1 ? 2 : 0
B17 42 0 V=V(32)>1 ? V(44)<1 ? V(43) : 0
B18 44 0 V=2/(1+EXP(V(30)))
B20 51 0 V=V(8)<1 ? 2 : 0
R18 90 50 4K
C4 50 0 10P
B21 52 0 V=V(50)>1 ? 2 : 0
B22 90 0 V=V(46)>1 ? V(23)>2.5 ? V(34)>1 ? 2 : 0
B23 53 0 V=V(7)>3.333 ? V(58)<1.667 ? 0 : 2
B24 18 7 I=V(51)>1 ? 34.375U*(2-V(46)) : 171.874U*(2-V(46))
D12 7 18 D5155
R19 15 41 350
B27 7 0 I=V(51)>1 ? V(46)*34.375U : 4M*V(46)
D13 61 7 D5155
D14 58 18 D5155
B28 58 0 I=V(51)>1 ? 5U*(2-V(46)) : 4M*(2-V(46))
D15 61 58 D5155
C6 58 0 180P
B29 18 58 I=5U*V(46)
V4 61 0 1.65
B30 43 0 V=V(7)<1.667 ? V(58)>3.333 ? 0 : 2
E2 66 11 70 71 1
Q1 72 73 70 Q5155
Q2 74 75 11 Q5155
V5 66 76 
R22 71 73 1
R23 76 75 1
V6 77 10 
B36 70 71 I=15M*V(78)+I(V5)
R24 11 10 50K
D16 11 10 D5155A
D17 77 74 D5155A
D18 70 77 D5155A
E3 72 11 9 11 1
E4 60 11 36 59 1
Q3 83 84 36 Q5155
Q4 85 86 11 Q5155
V8 60 87 
R25 59 84 1
R26 87 86 1
V9 88 12 
B37 36 59 I=15M*V(89)+I(V8)
R27 11 12 50K
D19 11 12 D5155A
D20 88 85 D5155A
D21 36 88 D5155A
E5 83 11 13 11 1
B38 89 0 V=V(52)<1 ? V(10)<2 ? 1 : -1
B39 78 0 V=V(52)>1 ? V(12)<2 ? 1 : -1
B40 9 11 I=I(V6)<0 ? 0 : I(V6)*V(32)/2
B41 13 11 I=I(V9)<0 ? 0 : I(V9)*V(32)/2
B42 13 0 I=1.19M*V(32)*V(18)
X7 5 65 LIMIT5155 {K=1 PLIM=4 NLIM=0.3}
D22 40 15 D5155B
D23 40 35 D5155B
I1 35 40  0.95M
D24 15 37 D5155B
I2 18 15  50U
D8 5 18 D5155
X8 57 30 LIMIT5155 {K=1 PLIM=100 NLIM=100 }
E6 57 0 15 8 2K
R30 63 46 1K
C12 46 0 10P
.ENDS
********
*==========================================================
* CS5322
* ON Semiconductor
* Two-Phase Buck Controller with 5-Bit DAC and with Integrated Drivers 200kHz to 800kHz Operation (Per Phase)
*
* This model was developed for ON Semiconductor by:
* AEI Systems, LLC
* 5777 W. Century Blvd. Suite 876
* Los Angeles, California 90045
* Copyright 2002, all rights reserved.
*
* This model is subject to change without notice.
* Users may not directly or indirectly re-sell or 
* re-distribute this model. This model may not 
* be used, modified, or altered 
* without the consent of ON Semiconductor. 
*
* For more information regarding modeling services,
* model libraries and simulation products, please
* call AEi Systems at (310) 863-8034, or contact 
* AEi by email: info@aeng.com. http://www.AENG.com
*
* Revision: 1.0 
*==========================================================
**********
*SRC=CS5322;CS5322;ON Semiconductor;DC-DC;2 phase BUCK
*SYM=CS5322
.SUBCKT CS5322 1 2 3 4 5 6 7 8 9 10 11 12 13 14
+ 15 16 17 18 19 20 0 22 23 24 25 26 27 28
*TERMINAL IDENTIFICATION:
*COMP=1 VFB=2 VDRP=3 CS1=4 CS2=5 CSREF=6 PWRGD=7
*VID0=8 VID1=9 VID2=10 VID3=11 VID4=12 ILIM=13 REF=14
*VCCH2=15 GATE(H)2=16 GND2=17 GATE(L)2=18 VCCL2=19 SS=20 LGND=0
*VCCH1=22 GATE(H)1=23 GND1=24 GATE(L)1=25 VCCL1=26 VCCL=27 ROSC=28
.MODEL D5322 D (RS=0.78 N=0.005 IS=7.075E-9 
+ CJO=4P TT=7.2N M=.4 VJ=.657 BV=100 IBV=100U)
.MODEL D5322A D (RS=0.78 N=1.95 IS=7.075E-9 
+ CJO=4P TT=7.2N M=.4 VJ=.657 BV=100 IBV=100U)
.MODEL Q5322 NPN (IS=15.2F NF=1 BF=105 VAF=98.5 IKF=.5
+ ISE=8.2P NE=2 BR=4 NR=1 VAR=20 IKR=.225 RE=.373 RB=1.49
+ RC=.149 XTB=1.5 CJE=35.5P CJC=12.2P TF=500P TR=85N)
.MODEL Q5322A NPN (IS=15.2F NF=1 BF=105 VAF=98.5 IKF=.5
+ ISE=8.2P NE=2 BR=4 NR=1 VAR=20 IKR=.225 RE=.373 RB=1.49
+ RC=.149 XTB=1.5 CJE=35.5P CJC=12.2P TF=500P TR=10N)
.MODEL VCCL_5322 SW (VT=4.3 VH=0.1 RON=1 ROFF=1MEG
.MODEL VCCH_5322 SW (VT=1.9 VH=0.1 RON=1 ROFF=1MEG
.SUBCKT POLE5322 1 2
*PARAMS ARE DC GAIN = {K}
* POLE FREQ = {FP} HERTZ
E1 0 3 1 0 {K}
RI 1 0 1E12
R1 3 4 1MEG
R2 4 2 1MEG
C2 2 4 {1U/(6.28319*FP)}
E2 2 0 0 4 1E6
.ENDS
.SUBCKT LIMIT5322 1 2
*PARAMETERS ARE GAIN={K} 
*POS LIMIT = {PLIM}  NEG LIMIT = {NLIM}
RIN 1 0 1E12
E1 3 0 0 1 {K}
RC1 2 4 1MEG
C1 2 4 1F IC=0
R1 3 4 1MEG
E2 2 0 0 4 1E6
*DIODES WILL HAVE .0597V DROP AT 10V INPUT FOR GAIN=1
*IDIODE = IS*EXP(.597/.O26)
VN 5 2 {NLIM-.0597}
DN 4 5 DN
.MODEL DN D(IS=1E-12 N=.14319)
VP 2 6 {PLIM-.0597}
DP 6 4 DN
.ENDS
.SUBCKT RS5322 2 3 4 5 {TD=1N}
*RS LATCH FLIP FLOP TERMINAL ID#
C1 11 0 10P
R3 10 8 {TD/6.9315P}
C3 8 0 10P
B1 10 0 V=V(2)>1 ? V(5)>1 ? 0 : 2
B2 16 0 V=V(3)>1 ? V(4)>1 ? 0 : 2
B5 4 0 V=V(8)>1 ? 2 : 0
B6 5 0 V=V(11)>1 ? 2 : 0
R1 16 11 {TD/6.9315P}
.ENDS
B1 29 0 V=3.31/(1+EXP(3.235-1.96*V(27)))
I1 42 14 1M
D1 14 42 D5322
V1 29 42 
R1 14 0 1G
S1 42 30 27 0 VCCL_5322
R2 30 0 100K
B2 27 0 I=I(V1)
B3 31 32 V=V(12)>1.25 ? 0.4 : 0
B4 33 31 V=V(11)>1.25 ? 0.2 : 0
B5 34 33 V=V(10)>1.25 ? 0.1 : 0
B6 35 34 V=V(9)>1.25 ? 0.05 : 0
V2 36 0 1.85
B7 36 35 V=V(8)>1.25 ? 0.025 : 0
R3 11 0 1G
R4 10 0 1G
R5 9 0 1G
R6 8 0 1G
R7 12 0 1G
R8 37 12 50K
D2 42 38 D5322A
R9 38 11 50K
D3 42 39 D5322A
R10 39 10 50K
D4 42 40 D5322A
R11 40 9 50K
D5 42 41 D5322A
R12 41 8 50K
D6 42 37 D5322A
V3 44 0 PULSE 0 2 0.1U
V4 45 0 PULSE 0 86.4K 0 86.4K
V5 67 28 
S2 42 46 22 0 VCCH_5322
R13 46 0 100K
E1 47 0 4 6 100
E2 43 0 5 6 100
X1 48 50 POLE5322 {K=31.5M FP=7MEG }
X2 49 51 POLE5322 {K=31.5M FP=7MEG }
X3 43 49 LIMIT5322 {K=1 PLIM=20 NLIM=0.1 }
X4 47 48 LIMIT5322 {K=1 PLIM=20 NLIM=0.1 }
B8 59 0 V=V(50)+V(51)
X5 59 53 POLE5322 {K=2 FP=3K }
B9 3 59 V=V(32)
B10 56 0 V=V(44)>1 ? V(30)>1.65 ? V(46)>1.65 ? V(53)<V(13) ? 2 : 0
B11 0 54 I=V(6)<(1.11*V(32)) ? V(6)>(0.89*V(32)) ? 0  : 100U
Q1 7 54 0 Q5322
C1 54 0 15N IC=0.65
R17 54 0 20K
X6 56 55 52 57 RS5322 {TD=1N }
B12 55 0 V=V(56)<1 ? 2 : 2/(1+EXPL((200*(0.27-V(20))),1K))
D7 0 58 D5322
D8 58 42 D5322A
R21 20 58 1
B13 42 58 I=15U*V(57)
B14 58 0 I=3.75U*V(52)
Q2 61 62 0 Q5322
B15 0 62 I=4.3U*V(63)
X7 60 63 LIMIT5322 {K=1 PLIM=10 NLIM=10 }
E3 60 0 61 58 5K
R22 62 0 20K
R23 61 1 1M
R24 61 0 2.5MEG
E4 65 0 32 2 2.133K
X8 65 66 LIMIT5322 {K=1 PLIM=100 NLIM=100 }
B16 0 61 I=30U*(1-EXP(-V(66)))/(1+EXP(-V(66)))
D10 61 64 D5322
B17 64 0 V=V(42)*0.82
D9 0 61 D5322
B18 67 0 V=V(42)/3.305
D11 0 2 D5322
B19 2 0 I=I(V5)/3
B20 68 0 V=V(1)<(V(50)+0.4+V(2)) ? 2 : 0
R26 68 70 43K
C3 70 0 10P
B21 72 0 V=V(70)>1 ? 2 : 0
B22 69 0 V=V(1)<(V(51)+0.4+V(2)) ? 2 : 0
R27 69 71 43K
C4 71 0 10P
B23 73 0 V=V(71)>1 ? 2 : 0
X9 75 74 81 76 RS5322 {TD=1N }
B24 75 0 V=V(44)>1 ? V(52)<1 ? V(72)<1 ? V(50)<0.33 ? 2 : 0
B25 74 0 V=V(75)<1 ? 2 : V(82)
X10 77 78 79 80 RS5322 {TD=1N }
B26 77 0 V=V(75)>1 ? V(76)>1 ? 2 : 0
B27 78 0 V=V(77)>1 ? V(74)>1 ? 0 : 2
B28 82 0 V=(SIN(81.43G*I(V5)*V(45)))>0 ? 2 : 0
X11 83 84 85 88 RS5322 {TD=1N }
B29 83 0 V=V(44)>1 ? V(52)<1 ? V(73)<1 ? V(51)<0.33 ? 2 : 0
B30 84 0 V=V(83)<1 ? 2 : V(82)>1 ? 0 : 2
X12 86 87 89 90 RS5322 {TD=1N }
B31 86 0 V=V(83)>1 ? V(88)>1 ? 2 : 0
B32 87 0 V=V(86)>1 ? V(84)>1 ? 0 : 2
E5 91 24 108 93 1
Q3 94 95 108 Q5322A
Q4 108 96 24 Q5322A
V9 91 97 
R28 93 95 1
R29 97 96 1
R30 23 98 8
C5 98 24 14N
E6 94 24 22 24 1
V10 108 23 
B33 22 24 I=I(V10)<0 ? 0 : I(V10)
B34 108 93 I=1.4M*V(101)*(V(22)-V(24))+I(V9)
R31 24 23 12K
B35 101 0 V=(V(25)-V(24))<1.8 ? V(80)>1 ?  2 : -2
R33 18 112 8
B36 102 0 V=(V(23)-V(24))<1.8 ? V(79)>1 ?  2 : -2
E7 92 24 100 103 1
Q5 104 105 100 Q5322A
Q6 100 106 24 Q5322A
V11 92 107 
R34 103 105 1
R35 107 106 1
R36 25 109 8
C7 109 24 14N
E8 104 24 26 24 1
V12 100 25 
B37 26 24 I=I(V12)<0 ? 0 : I(V12)
B38 100 103 I=1.4M*V(102)*(V(26)-V(24))+I(V11)
R37 24 25 12K
C8 129 17 14N
C9 112 17 14N
E9 99 17 110 111 1
Q7 113 114 110 Q5322A
Q8 110 115 17 Q5322A
V13 99 116 
R39 111 114 1
R40 116 115 1
R41 16 129 8
E10 113 17 15 17 1
V14 110 16 
B39 15 17 I=I(V14)<0 ? 0 : I(V14)
B40 110 111 I=1.4M*V(117)*(V(15)-V(17))+I(V13)
R42 17 16 12K
E11 120 17 121 122 1
Q9 123 124 121 Q5322A
Q10 121 125 17 Q5322A
V15 120 126 
R43 122 124 1
R44 126 125 1
E12 123 17 19 17 1
V16 121 18 
B41 19 17 I=I(V16)<0 ? 0 : I(V16)
B42 121 122 I=1.4M*V(118)*(V(19)-V(17))+I(V15)
R45 17 18 12K
B43 117 0 V=(V(18)-V(17))<1.8 ? V(90)>1 ?  2 : -2
B44 118 0 V=(V(16)-V(17))<1.8 ? V(89)>1 ?  2 : -2
.ENDS
**********
*==========================================================
* CS5323
* ON Semiconductor
* Three-Phase Buck Controller with 5-Bit DAC 200kHz to 800kHz Operation (Per Phase)
*
* This model was developed for ON Semiconductor by:
* AEI Systems, LLC
* 5777 W. Century Blvd. Suite 876
* Los Angeles, California 90045
* Copyright 2002, all rights reserved.
*
* This model is subject to change without notice.
* Users may not directly or indirectly re-sell or 
* re-distribute this model. This model may not 
* be used, modified, or altered 
* without the consent of ON Semiconductor. 
*
* For more information regarding modeling services,
* model libraries and simulation products, please
* call AEi Systems at (310) 863-8034, or contact 
* AEi by email: info@aeng.com. http://www.AENG.com
*
* Revision: 1.0 
*==========================================================
**********
*SRC=CS5323;CS5323;ON Semiconductor;DC-DC;3 phase BUCK
*SYM=CS5323
.SUBCKT CS5323 1 2 3 4 5 6 7 8 9 10
+ 11 12 13 14 15 16 17 18 19 20
*TERMINAL IDENTIFICATIONS ARE AS FOLLOWS:
*ROSC= 1 COMP=2 VFB=3 VDRP=4 CS1=5 CS2=6
*CS3=7 CSREF=8 ILIM=9 REF = 10
*VID0=11 VID1=12 VID2=13 VID3=14 VID4=15 GND=16
*GATE3=17 GATE2=18 GATE1=19 VCC=20
.MODEL SUVLO SW VT=4.5 VH=0.1 RON=10 ROFF=10MEG
.MODEL DMAIN D N=0.005
.SUBCKT SUBLIMIT 1 2 8
*INPUT=1 OUTPUT=2 GND=8
*PARAMETERS ARE GAIN={K} 
*POS LIMIT = {PLIM}  NEG LIMIT = {NLIM}
RIN 1 8 1E12
E1 3 8 8 1 {K}
RC1 2 4 1MEG
C1 2 4 1F IC=0
R1 3 4 1MEG
E2 2 8 8 4 1E6
*DIODES WILL HAVE .0597V DROP AT 10V INPUT FOR GAIN=1
*IDIODE = IS*EXP(.597/.O26)
VN 5 2 {NLIM-.0597}
DN 4 5 DN
.MODEL DN D(IS=1E-12 N=.14319)
VP 2 6 {PLIM-.0597}
DP 6 4 DN
.ENDS
.SUBCKT SUBPOLE 1 2 5
*PARAMS ARE DC GAIN = {K}
*POLE FREQ = {FP} HERTZ
*INPUT=1 OUTPUT=2 GND 5
E1 5 3 1 5 {K}
RI 1 5 1E12
R1 3 4 1MEG
R2 4 2 1MEG
C2 2 4 {1U/(6.28319*FP)}
E2 2 5 5 4 1E6
.ENDS
.SUBCKT SUBTMD 2    4   5 {K=1 TD=10N}
*-------------GND VIN VOUT
*TIME DELAY
*GAIN=K TD=TIME DELAY
R1 29 1 {TD/20P}
C1 29 6 1P
C2 1 2 1P
R2 2 6 {TD/20P}
R4 4 2 100G
E2 3 2 6 1 1
R5 3 8 {TD/20P}
C3 3 10 1P
C4 8 2 1P
R6 2 10 {TD/20P}
E3 9 2 10 8 1
R7 9 11 {TD/20P}
C5 9 13 1P
C6 11 2 1P
R8 2 13 {TD/20P}
E4 15 2 13 11 1
R9 15 14 {TD/20P}
C7 15 16 1P
C8 14 2 1P
R10 2 16 {TD/20P}
E5 12 2 16 14 1
R11 12 17 {TD/20P}
C9 12 19 1P
C10 17 2 1P
R12 2 19 {TD/20P}
E6 18 2 19 17 1
R13 18 20 {TD/20P}
C11 18 21 1P
C12 20 2 1P
R14 2 21 {TD/20P}
E7 36 2 21 20 1
R15 7 24 {TD/20P}
C13 7 25 1P
C14 24 2 1P
R16 2 25 {TD/20P}
E8 26 2 25 24 1
R17 26 27 {TD/20P}
C15 26 28 1P
C16 27 2 1P
R18 2 28 {TD/20P}
E9 22 2 28 27 1
R19 22 30 {TD/20P}
C17 22 31 1P
C18 30 2 1P
R20 2 31 {TD/20P}
E10 5 2 31 30 1
R23 36 38 {TD/20P}
C21 36 40 1P
C22 38 2 1P
R24 2 40 {TD/20P}
E11 7 2 40 38 1
R25 2 5 100G
E1 29 2 4 2 {K}
.ENDS
S1 23 22 20 16 SUVLO
B1 20 95 V=V(20)-3.31/(1+EXP(3.96-2.4*V(20)))
DREF 95 96 DMAIN
REF 96 10 10
R1 10 16 100G
R2 22 16 10K
V4 23 16 3.3
R3 23 11 50K
R4 23 12 50K
R5 23 13 50K
R6 23 14 50K
R7 23 15 50K
V5 1 16 1
V6 24 16 PULSE 0 100K 0 100K
V7 25 16 PULSE 0 1
R16 18 16 10MEG
R17 17 16 10MEG
R18 19 16 10MEG
R19 9 16 100G
R20 8 16 100G
R21 7 16 100G
R22 6 16 100G
R23 5 16 100G
R24 3 16 100G
X2 36 27 16 SUBPOLE {K=1 FP=3MEG }
E1 36 16 5 8 4.2
X4 29 35 16 SUBPOLE {K=1 FP=3MEG }
X6 30 28 16 SUBPOLE {K=1 FP=3MEG }
E2 29 16 6 8 4.2
E3 30 16 7 8 4.2
B2 37 16 V=25M/(1+EXP(40*V(11,16)-40))+50M/(1+EXP(40*V(12,16)-40))
++0.1/(1+EXP(40*V(13,16)-40))+1.075
B3 45 37 V=0.2/(1+EXP(40*V(14,16)-40))+0.4/(1+EXP(40*V(15,16)-40))
R26 45 44 100K
R27 31 34 100K
R28 32 34 100K
R29 33 34 100K
E4 41 16 45 3 2.133K
E5 42 16 34 16 3
X7 38 43 16 SUBPOLE {K=1.5 FP=4K }
X8 42 38 16 SUBLIMIT {K=1 PLIM=1.45 NLIM=40M }
X9 41 40 16 SUBLIMIT {K=1 PLIM=100 NLIM=100 }
R30 44 38 100K
X10 39 4 16 SUBPOLE {K=1 FP=100K }
E6 39 16 44 16 2
R31 16 43 100G
V8 46 16 2.7
B4 3 46 I=I(V5)
D1 3 46 DMAIN
D2 2 46 DMAIN
R32 46 2 5MEG
R33 2 16 5MEG
D3 16 2 DMAIN
B5 16 2 I=-5.01U/(1+EXP(9.9-6*V(26,16)))+
+30.06U*(1-EXP(-V(40,16)))/(1+EXP(-V(40,16)))/(1+EXP(6*V(26,16)-9.9))
B6 26 16 V=(V(25,16)*V(22,16))<1 ? 3.3 : V(43,9)>0 ? 3.3 : 
+V(48,16)<1 ? 3.3 : 0
B7 47 16 V=(V(25,16)*V(22,16))<1 ? 0 : V(43,9)>0 ? 0 : 
+V(2,16)<0.27 ? 3.3 : V(26,16)<1 ? 3.3 : 0
B8 49 16 V=(V(31,16)+V(3,2)+0.4)>0 ? 3.3 : 0
B9 53 16 V=(V(32,16)+V(3,2)+0.4)>0 ? 3.3 : 0
B10 52 16 V=(V(33,16)+V(3,2)+0.4)>0 ? 3.3 : 0
B11 56 16 V=V(88,16)>1 : 3.3 : V(60,16)>1 ? 0 : 3.3
B12 60 16 V=V(88,16)>1 ? 0 : V(84,16)<1 ? 3.3 : V(57,16)>1 ? 0 : 3.3
B14 58 16 V=V(88,16)>1 ? 3.3 : V(60,16)<1 ? 3.3 : V(63,16)>1 ? 0 : 3.3
B16 67 16 V=V(82,16)>1 ? 0 : V(86,16)<1 ? 3.3 : V(64,16)>1 ? 0 : 3.3
B17 65 16 V=V(82,16)>1 : 3.3 : V(67,16)>1 ? 0 : 3.3
B13 62 16 V=V(84,16)>1 ? V(60,16)>1 ? 3.3 : V(58,16)>1 ? 0 : 3.3
B18 68 16 V=V(82,16)>1 ? 3.3 : V(67,16)<1 ? 3.3 : V(72,16)>1 ? 0 : 3.3
B19 66 16 V=V(86,16)>1 ? V(67,16)>1 ? 3.3 : V(68,16)>1 ? 0 : 3.3
B20 74 16 V=V(83,16)>1 ? 0 : V(87,16)<1 ? 3.3 : V(79,16)>1 ? 0 : 3.3
B21 69 16 V=V(83,16)>1 : 3.3 : V(74,16)>1 ? 0 : 3.3
B22 76 16 V=V(83,16)>1 ? 3.3 : V(74,16)<1 ? 3.3 : V(78,16)>1 ? 0 : 3.3
B23 70 16 V=V(87,16)>1 ? V(74,16)>1 ? 3.3 : V(76,16)>1 ? 0 : 3.3
B27 88 16 V=V(26,16)>1 ? 3.3 : V(31,16)>0.44 ? 3.3 : V(51,16)>1 ? 3.3 :
+ 0
B28 82 16 V=V(26,16)>1 ? 3.3 : V(32,16)>0.44 ? 3.3 : V(54,16)>1 ? 3.3 :
+ 0 
B29 83 16 V=V(26,16)>1 ? 3.3 : V(33,16)>0.44 ? 3.3 : V(55,16)>1 ? 3.3 :
+ 0
B30 84 16 V=SIN(84.2G*I(V5)*V(24,16)-2.0944)>0 ? 3.3 : 0
B31 86 16 V=SIN(84.2G*I(V5)*V(24,16))>0 ? 3.3 : 0
B32 87 16 V=SIN(84.2G*I(V5)*V(24,16)+2.0944)>0 ? 3.3 : 0
X1 16 27 31 SUBTMD {K=1 TD=80N }
X3 16 35 32 SUBTMD {K=1 TD=80N }
X5 16 28 33 SUBTMD {K=1 TD=80N }
X12 16 47 48 SUBTMD {K=1 TD=10N }
X34 16 50 51 SUBTMD {K=1 TD=80N }
X13 16 49 50 SUBTMD {K=1 TD=80N }
X35 16 61 54 SUBTMD {K=1 TD=80N }
X14 16 53 61 SUBTMD {K=1 TD=80N }
X36 16 59 55 SUBTMD {K=1 TD=80N }
X15 16 52 59 SUBTMD {K=1 TD=80N }
X16 16 56 57 SUBTMD {K=1 TD=10N }
X19 16 62 63 SUBTMD {K=1 TD=10N }
X20 16 65 64 SUBTMD {K=1 TD=10N }
X23 16 66 72 SUBTMD {K=1 TD=10N }
X24 16 69 79 SUBTMD {K=1 TD=10N }
X27 16 70 78 SUBTMD {K=1 TD=10N }
B34 90 16 V=(V(20,16)-1.45)*V(85,16)/3.3+0.25
R62 85 16 1MEG
B33 16 85 I=1.1M*V(63,58)/3.3
C3 85 16 10P
D4 16 85 DMAIN
D5 85 23 DMAIN
V11 90 19 
B35 20 16 I=I(V11)<0 ? 0 :  I(V11)
R63 81 16 1MEG
B36 16 81 I=1.1M*V(72,68)/3.3
C4 81 16 10P
D6 16 81 DMAIN
D7 81 23 DMAIN
B37 20 16 I=I(V12)<0 ? 0 :  I(V12)
B38 89 16 V=(V(20,16)-1.45)*V(81,16)/3.3+0.25
V12 89 18 
R64 77 16 1MEG
B39 16 77 I=1.1M*V(78,76)/3.3
C5 77 16 10P
D8 16 77 DMAIN
D9 77 23 DMAIN
B40 20 16 I=I(V13)<0 ? 0 :  I(V13)
B41 80 16 V=(V(20,16)-1.45)*V(77,16)/3.3+0.25
V13 80 17 
.ENDS
**********
*==========================================================
* MC33341
* ON Semiconductor MODEL DEVELOPED BY CHRISTOPHE BASSO (FRANCE)
* Battery Charger
*
* This model is subject to change without notice.
* Users may not directly or indirectly re-sell or 
* re-distribute this model. This model may not 
* be used, modified, or altered 
* without the consent of ON Semiconductor. 
*
* Revision: November 1st 1997
*==========================================================
**********
*SRC=MC33341;MC33341;ON Semiconductor;FB Control;Battery Charger
*SYM=MC33341
.SUBCKT MC33341 1 2 3 4 5 6 7 8
*
.SUBCKT COMP2 1 2 3
*             + - S
B1 4 0 V=V(1) > V(2) ? 5V : 0
RD 4 3 100
CD 3 0 10P
.ENDS
* SIMPLIFIED ERROR AMP. ****
.SUBCKT ERRSIMP 20 8 23  21
*   	        +  - OUT GND
RIN 20 8 8MEG
E1 22 21 5 21 1
RO 22 23 100
VOFF 5 11 0
D15 21 11 DCLAMP
G1 21 11 20 8 100U
RP1 11 21 130MEG
CP1 11 21 10P
.MODEL DCLAMP D (RS=10 BV=5 IBV=0.01)
.ENDS
* TRANSCONDUCTANCE AMPLIFIER ****
.SUBCKT OTA VREF IREF PIN6 PIN5 PIN2 ISENSE GND COMP VCC OUT
*
R5 Vcc 13 43
I4 4 gnd DC=20uA
Q1 Comp 12 33 QN3904
Q2 gnd Comp 7 QN3906 
Q3 Comp 14 5 QN3906 
Q4 Comp 7 Out QN3906 
Q5 5 5 26 QN3906 
Q6 14 5 24 QN3906 
Q7 14 4 29 QN3904
Q9 12 22 20 QN3906 
Q12 gnd pin2 27 QN3906
R11 24 Vcc 10k
R12 26 Vcc 10k
Q10 12 12 34 QN3904 
Q11 4 4 28 QN3904
Q16 12 Vref 20 QN3906 
Q19 4 pin5 20 QN3906 
Q20 gnd Iref 27 QN3906 
Q21 12 27 21 QN3906 
R13 28 gnd 10k
R14 29 gnd 10k
Q8 Out 7 13 QN3906 
I3 Vcc 21 DC=20uA
I8 Vcc 23 DC=2uA
I5 Vcc 27 DC=2uA
R15 33 gnd 10k
R16 34 gnd 10k
Q22 4 23 21 QN3906 
Q23 gnd Isense 23 QN3906 
I6 Vcc 20 DC=20uA
R4 22 pin6 6.25k
.MODEL QN3904 NPN AF=1.0 BF=300 BR=7.5 CJC=3.5PF CJE=4.5PF
+ IKF=.025 IS=1.4E-14 ISE=3E-13 KF=9E-16 NE=1.5 RC=2.4
+ TF=4E-10 TR=21E-9 VAF=100 XTB=1.5
.MODEL QN3906 PNP AF=1.0 BF=400 BR=7.5 CJC=5.8PF CJE=6.3PF
+ IKF=.02 IS=4E-14 ISE=7E-15 KF=6E-16 NE=1.16 RC=2.4 TF=5E-10
+ TR=23E-9 VAF=50 XTB=1.5
.ENDS
*
DCLP1 4 8 DSTD
DCLP2 6 7 DSTD
DCLP3 4 5 DSTD
DCLP4 4 1 DSTD
DCLP5 2 7 DSTD
DCLP6 3 7 DSTD
**** INTERNAL REFERENCES ****
BREF1 10 4 V=V(7)>200M ? 200M : V(7)
BREF2 11 4  V=V(7)>1.2 ? 1.2 : V(7)
**** DISABLE LOGIC FUNCTION ****
XCMP1 11 1 14 COMP2
XCMP2 6 1 15 COMP2
BNOR 16 4 V=V(14)>800M | V(15)>800M ? 0 : 5
RDEL 16 17 100
CDEL 17 4 10P
**** INVERTING AMP/ DIFF. AMP ****
R1 6 20 10K
R2 20 21 10K
R3 1 22 10K
R4 22 4 10K
XAMP1 22 20 21 4 ERRSIMP
R5 1 23 10K
R6 23 24 10K
XAMP2 4 23 25 4 ERRSIMP
D1 25 24 DSTD
**** CURRENT SENSE SELECTION ****
BISENS 52 4 V=V(17)>3 ? V(21,4) : V(24,4)
**** LIMITED TRANSCONDUCTANCE CONVERSION ****
XCON 11 10 6 5 2 52 4 3 7 8 OTA
**** INTERNAL MODELS ****
.MODEL DSTD D(RS=.8 CJO=4PF IS=7E-09 N=2 VJ=.6V    
+ TT=6E-09 M=.45 BV=100V)
.ENDS
**********
*==========================================================
* MC33363
* ON Semiconductor developed by Christophe BASSO, Toulouse (FRANCE)
* Monolithic Controller
*
* Enter the RDSON spec depending on the model you simulate: 363A or B
*
* This model is subject to change without notice.
* Users may not directly or indirectly re-sell or 
* re-distribute this model. This model may not 
* be used, modified, or altered 
* without the consent of ON Semiconductor. 
*
* Revision: 3/13/99
*==========================================================
**********
*SRC=MC33363;MC33363;ON Semiconductor;Monolithic Switchers;A and B versions
*SYM=MC33363
.SUBCKT MC33363 1   3   4 5 6  7  8   9    10 11  12 13 16 {RDSON=14}
*               STR VCC GND RT CT REG COMP VF OVL GND   DRAIN
.SUBCKT COMPDEL 1 2 3
*               + - Out
* T = 0.693 x Ct x Rt
B1 4 0 V=V(1) > V(2) ? 1V : 0
RT 4 5 100
CT 5 0 3.36NF
B2 10 0 V=V(5) > 500M ? 5V : 0
RD 10 3 100
CD 3 0 100P
.ENDS
* UVLO CIRCUIT ****
.SUBCKT UVLO  1   2  
*            VIN OUT
S1 1 3 1 0 SUVLO
RUV 3 0 100K
B1 4 0 V= V(3) > 5V ? 5V : 0
RD 4 2 100
CD 2 0 100P
.MODEL SUVLO SW RON=1 ROFF=1E6 VT=12 VH=2.5
.ENDS
* T FFLOP Circuit ****
.SUBCKT FFLOP 6 8 2 1
*             S R Q Q\
BQB   10 0 V=(V(8)<800M) & (V(2)>800M) ? 0 : 5V
BQ    20 0 V=(V(6)<800M) & (V(1)>800M) ? 0 : 5V
RD1   10 1 100
CD1   1 0 10p IC=5
RD2   20 2 100
CD2   2 0 10p IC=0
.ENDS
* 2 INPUT, ONE INPUT IS INV, AND CIRCUIT ****
.SUBCKT AND_IN_INV 1   2    3
*                 INV NINV OUT
B1 4 0 V= (V(1)<3.5V) & (V(2)>800M) ? 5V : 0
RD 4 3 100
CD 3 0 10P
.ENDS
* 3 INPUT, ONE INPUT IS INV. AND CIRCUIT ****
.SUBCKT AND3_IN_INV  1   2    3    4  6
*                   INV NINV NINV OUT VCC 
B1 5 0 V= (V(1)<3.5V) & (V(2)>800M) & (V(3)>800M) ? V(6) : 0
RD 5 4 10
CD 4 0 100P
.ENDS
* 3 INPUT, ONE INPUT IS INV. OR CIRCUIT ****
.SUBCKT OR3_IN_INV 1   2    3    4
*                 INV NINV NINV OUT
B1 5 0 V= (V(1)<3.5V) | (V(2)>800M) | (V(3)>800M) ? 5V : 0
RD 5 4 100
CD 4 0 10P
.ENDS
* 2 INPUT AND CIRCUIT ****
.SUBCKT AND2 1 2 3
B1 4 0 V= (V(1)>800M) & (V(2)>800M) ? 5V : 0
RD 4 3 100
CD 3 0 10P
.ENDS
* 2 INPUT NOR CIRCUIT ****
.SUBCKT NOR2 1 2 3
B1 4 0 V= (V(1)>800M) | (V(2)>800M) ? 0V : 5
RD 4 3 100
CD 3 0 10P
.ENDS
* 2 INPUT COMPARATOR ****
.SUBCKT COMP2 1 2 3
*             + - S
B1 4 0 V=V(1) > V(2) ? 5V : 0
RD 4 3 100
CD 3 0 10P
.ENDS
* ERROR AMPLIFIER MODEL ****
.SUBCKT ERRAMP 20 8  3  21
*   	       +  - OUT GND
RIN 20 8 8MEG
CP1 11 21 11.5P	; {1/(6.28*(GAIN/100U)*POLE)}
E1 5 21 11 21 1
R9 5 2 5
D14 2 13 DMOD
ISINK 13 21 2.7U	; {ISINK/100} in mA
Q1 21 13 16 QPMOD
ISOURCE 7 3 100u ; {ISOURCE} in uA
D12 3 7 DMOD
D15 21 11 DCLAMP
G1 21 11 20 8 100U
V1 7 21 5.8			; Vhigh - 0.6V
V4 3 16 250M		; Vlow - 38mV
RP1 11 21 125.9MEG	; {GAIN/100U}
.MODEL QPMOD PNP
.MODEL DCLAMP D (RS=10 BV=5 IBV=0.01)
.MODEL DMOD D TT=1N CJO=10P
.ENDS
* INTERNAL MOSFET MODEL ****
.SUBCKT MOS 1 2 3 4 {RON=12 ROFF=1MEG VON=7 VOFF=1}
*Connections + - NC+ NC-
B1 1 2 I=V(3,4) < {VOFF} ? V(1,2)/{ROFF} : V(3,4) > {VON} ?
+ V(1,2)/{RON} : V(1,2)/ (EXP(LN({(RON*ROFF)^.5}) + 
+ 3 * LN({RON/ROFF}) * (V(3,4) - {(VON+VOFF)/2}) / ({2* (VON-VOFF)}) - 
+ 2 * LN({RON/ROFF}) * (V(3,4) - {(VON+VOFF)/2})^3 / {(VON-VOFF)^3} ))
.ENDS
**** ISUPPLY ****
BSUPP 3 4 I=V(33)<3.5 ? 250U : 3.5M
**** REFERENCE VOLTAGE ****
BREF 80 4 V=V(3)<7.7 ? V(3)-1.2 : 6.5
ROUT 80 8 10
**** STARTUP AND UVLO ****
XUVLO 3 81 UVLO
XOVL 60 11 82 COMP2
BSTRT 1 3 I=V(81)<3.5 ? (14M*((14-V(3))/14)+6M) : 40U ; 20mA peak
XAND 81 82 33 AND2
RDUMB 83 1 100
**** OSCILLATOR SECTION ****
BCHG 4 7 I=(V(INV1)>500M) & (V(33)>3.5) ? I(VIRT)*4 : 0
BDIS 7 4 I=V(INV1)<500M ? I(VIRT)*4 : 0
DUV 7 33 DUV
VSET 21 4 1.25V
VIRT 21 6
VREF1 22 0 2.5V
RI 22 23 40K
RF 23 INV1 10K
BCMP CLK 4 V=V(7)-V(23)>0 ? 5 : 0
BINV 25 4 V=V(CLK)<500M ? 2.5 : 0
RDEL1 25 INV1 100
CEL2 INV1 0 100P
**** PWM AND LATCH ****
XPWM 7 9 31 COMP2
XOR1 33 31 32 34 OR3_IN_INV
XNAND1 34 CLK 35 AND_IN_INV
XFFLOP 35 34 36 37 FFLOP
XNAND2 CLK 36 33 450 3 AND3_IN_INV
RDRV 450 DRV 100
**** ERROR AMPLIFIER ****
VREF2 60 4 2.6V
XERR 60 10 9 4 ERRAMP ; +  - OUT GND
**** CURRENT LIMIT COMPARATOR ****
RLIMIT 40 4 450
B225 4 40 I=I(VIRT)*2.25
XCOMP 50 40 32 COMPDEL
**** MOSFET MODEL ****
CIN DRV 4 200pF
XMOS 16 71 DRV 4 MOS {RON={RDSON} ROFF=1MEG VON=3 VOFF=1}
VISRC 71 4
**** KELVIN AND L.E.B. ****
BIKEL 4 50 I=V(DRV)>V(3)-0.7 ? I(VISRC)/51.2 : 0
RKEL 50 4 9
.MODEL DUV D RS=100M TT=50N CJO=10P N=0.1
.ENDS
*********
*==========================================================
* MC33364
* ON Semiconductor model developed by Christophe BASSO, Toulouse (FRANCE)
* VHV PWM Controllers
*
* This model is subject to change without notice.
* Users may not directly or indirectly re-sell or 
* re-distribute this model. This model may not 
* be used, modified, or altered 
* without the consent of ON Semiconductor. 
*
* Revision: 8/26/99
* These models account for the various propagation delays and
* timers, except the internal 100ms re-start delay which has
* purposely NOT been included.
*
* MC33364D1: fixed internal frequency clamp
* MC33364D2: no internal frequency clamp
* MC33364D: adjustable frequency clamp
*
*==========================================================
**********
*SRC=MC33364D1;MC33364D1;ON Semiconductor;VHV PWM Controllers;DCM with FC
*SYM=MC33364D1
.SUBCKT MC33364D1 1  2  3  4   5   6   7   8
*                 ZC CS FB Ref Gnd Drv Vcc Line
.SUBCKT UTD 1 2 {TD=???}
*
*Parameters K=GAIN TD=DELAY
RIN 1 0 1E15
E1 3 0 1 0 1
T1 3 0 2 0 Z0=1 TD={TD}
R1 2 0 1
.ENDS
* UVLO CIRCUIT ****
* VH = (VON - VOFF)/2
* VT = VOFF + VH
.SUBCKT UVLO  1   2  
*            VIN OUT
S1 1 3 1 0 SUVLO
RUV 3 0 100K
B1 4 0 V= V(3) > 5V ? 5V : 0
RD 4 2 100
CD 2 0 100P
.MODEL SUVLO SW RON=1 ROFF=1E6 VT=11.3 VH=3.7 ; VON = VT+VH = 15.0 VOFF = VT-VH = 7.6V
.ENDS
* 2 INPUT COMPARATOR ****
.SUBCKT COMP2 1 2 3
*             + - S
B1 4 0 V=V(1) > V(2) ? 5V : 0
RD 4 3 100
CD 3 0 10P
.ENDS
**** 2 INPUT OR GATE ****
.SUBCKT OR2 1 2 3
B1 4 0 V= (V(1)>800M) | (V(2)>800M) ? 5V : 0
RD 4 3 100
CD 3 0 10P
.ENDS
*
.SUBCKT TFFLOP 6 8 2 1
*              S R Q Q\
BQB   10 0 V=(V(8)<800M) & (V(2)>800M) ? 0 : 10V
BQ    20 0 V=(V(6)<800M) & (V(1)>800M) ? 0 : 10V
RD1   10 1 100
CD1   1 0 10p IC=5
RD2   20 2 100
CD2   2 0 10p IC=0
.ENDS
*
.SUBCKT FFLOP_HD 1   2 4 3  5  6
*                CLK D R S  QB Q 
A10 [1] [51] A2D_001				; Analog Clock to Digital Clock
A11 [2] [50] A2D_001				; Analog Data to Digital Data
A6 [3] [30] A2D_001					; Analog Set to Digital Set
A7 [4] [40] A2D_001					; Analog Reset to Digital Reset
A8 [31] [5] D2A_001					; Digital Q\ to analog Q\
A9 [32] [6] D2A_001					; Digital Q to analog Q
A3 40 42 INV_001					; Set\
A4 30 41 INV_001					; Reset\	
A1 50 51 41 42 32 31 DFF_001		; HDL Flip-Flop
.MODEL DFF_001 d_dff(clk_delay=1.0N nset_delay=1.0N nreset_delay=1.0N rise_delay=1.0N 
+ fall_delay=1.0N ic=0 data_load=1.0P clk_load=1.0P nset_load=1.0P nreset_load=1.0P)
.MODEL A2D_001 adc_bridge(in_low=1.0 in_high=3.0 rise_delay=1.0N fall_delay=1.0N)
.MODEL D2A_001 dac_bridge(out_low=100m out_high=10 out_undef=100m t_rise=10N
+ t_fall=10N input_load=1.0P)
.MODEL INV_001 d_inverter(rise_delay=1.0N fall_delay=1.0N input_load=1.0P)
.ENDS
*
**** ISUPPLY ****
BSUPP 7 5 I=V(81)<3.5 ? 800U : 4.5M
**** REFERENCE VOLTAGE ****
BREF 80 5 V=V(81)<3.5 ? 0 : 5V
ROUT 80 4 10
RBIAS 4 3 5k
**** STARTUP AND UVLO ****
XUVLO 7 81 UVLO
BSTRT 8 7 I=V(81)<3.5 ? (8.5M*((14-V(7))/14)+6M) : 70U
CSTRT 81 600 2nF
RSTRT 5 600 1k
XOR2 600 213 610 OR2
**** ZERO DETECTION ****
DCLAMP 5 1 DZEN1
XCOMP1 50 1 51 COMP2
XDEL1 51 52 UTD {TD=300ns}
BREF1 50 5 V=V(51) > 1V ? 1.2V : 1V
**** CURRENT SENSE ****
RCS1 3 30 45k
RCS2 30 5 15k
DCS 5 30 DZEN2
XCOMP2 32 30 31 COMP2 ; + - S
XDEL2 31 33 UTD {TD=230ns}
VOFF1 32 LEBO 100mV
XLATCH 33 302 620 661 TFFLOP ; S R Q Qb
RDUM1 661 5 100k
**** 250ns LEB ****
XDEL3 121 62 UTD {TD=250ns}
BLEB LEBO 5 V=V(62) > 3V ? V(2) : 0
**** LOGIC CIRCUITRY ****
XFFLOP 52 200 620 610 120 121 FFLOP_HD	; CLK D R S QB Q
RDUM2 120 5 100k
VDAT 200 5 5
**** 400us TIMER ****
BCHG 5 211 I=V(121) < 3V ? 10uA : 0
CTIM 211 5 410pF
VTIM 212 5 10V
XCOMP3 211 212 213 COMP2
DRST 211 120 DSTD
**** FIXED 6.7us DEADTIME ****
ICHG 5 300 3uA
CDT 300 5 10pF
XCOMP4 300 301 302 COMP2
VDT 301 5 2V
S2 300 5 121 5 SDT
**** DRIVER and UVLO ****
BDRVU 90 5 V=(V(121)>3V) & (V(81)>3V) ? V(7) : 100mV
RON 90 6 36
ROFF 6 250 18
DOFF 6 250 DSTD
.MODEL SDT SW RON=1  ROFF=10Meg  VT=2V VH=1V
.MODEL DSTD D RS=100M CJO=15pF TT=10N IBV=100u N=0.01
.MODEL DZEN2 D BV=1.2 RS=100M CJO=15pF TT=100N IBV=100u
.MODEL DZEN1 D BV=10 RS=100M CJO=15pF TT=100N IBV=1m
.ENDS
***************
*SRC=MC33364D2;MC33364D2;ON Semiconductor;VHV PWM Controllers;DCM no FC
*SYM=MC33364D1
.SUBCKT MC33364D2 1  2  3  4   5   6   7   8
*                 ZC CS FB Ref Gnd Drv Vcc Line
.SUBCKT UTD 1 2 {TD=???}
*
*Parameters K=GAIN TD=DELAY
RIN 1 0 1E15
E1 3 0 1 0 1
T1 3 0 2 0 Z0=1 TD={TD}
R1 2 0 1
.ENDS
* UVLO CIRCUIT ****
* VH = (VON - VOFF)/2
* VT = VOFF + VH
.SUBCKT UVLO  1   2  
*            VIN OUT
S1 1 3 1 0 SUVLO
RUV 3 0 100K
B1 4 0 V= V(3) > 5V ? 5V : 0
RD 4 2 100
CD 2 0 100P
.MODEL SUVLO SW RON=1 ROFF=1E6 VT=11.3 VH=3.7 ; VON = VT+VH = 15.0 VOFF = VT-VH = 7.6V
.ENDS
* 2 INPUT COMPARATOR ****
.SUBCKT COMP2 1 2 3
*             + - S
B1 4 0 V=V(1) > V(2) ? 5V : 0
RD 4 3 100
CD 3 0 10P
.ENDS
**** 2 INPUT OR GATE ****
.SUBCKT OR2 1 2 3
B1 4 0 V= (V(1)>800M) | (V(2)>800M) ? 5V : 0
RD 4 3 100
CD 3 0 10P
.ENDS
*
.SUBCKT F_FLOP 1  2 11 12 5  6 {VHIGH=10 VLOW=100m}
*             CLK D R  S  QB Q 
.SUBCKT NAND3_0 1 2 3 4
B1 5 0 V= (V(1)>800mV) & (V(2)>800mV) & (V(3)>800mV) ? 100m : 10
R1 5 4 10
C1 4 0 10P IC=100m
.ENDS
*
.SUBCKT NAND3_1 1 2 3 4
B1 5 0 V= (V(1)>800mV) & (V(2)>800mV) & (V(3)>800mV) ? 100m : 10
R1 5 4 10
C1 4 0 10P IC=10
.ENDS
*
.SUBCKT INV 1 2
B1 3 0 V= V(1)>800mV ? 100m : 10
R1 3 2 10
C1 2 0 10P IC=10
.ENDS
*
X1 7 4 2 8 NAND3_0
X2 8 3 10 9 NAND3_0
X3 1 8 10 7 NAND3_1
X4 4 9 1 10 NAND3_0
X5 4 7 6 5 NAND3_1
X6 5 10 3 6 NAND3_0
X7 11 4 INV
X8 12 3 INV
.ENDS
*
.SUBCKT TFFLOP 6 8 2 1
*              S R Q Q\
BQB   10 0 V=(V(8)<800M) & (V(2)>800M) ? 0 : 10V
BQ    20 0 V=(V(6)<800M) & (V(1)>800M) ? 0 : 10V
RD1   10 1 100
CD1   1 0 10p IC=5
RD2   20 2 100
CD2   2 0 10p IC=0
.ENDS
*
.SUBCKT FFLOP_HD 1   2 4 3  5  6
*                CLK D R S  QB Q 
A10 [1] [51] A2D_001				; Analog Clock to Digital Clock
A11 [2] [50] A2D_001				; Analog Data to Digital Data
A6 [3] [30] A2D_001					; Analog Set to Digital Set
A7 [4] [40] A2D_001					; Analog Reset to Digital Reset
A8 [31] [5] D2A_001					; Digital Q\ to analog Q\
A9 [32] [6] D2A_001					; Digital Q to analog Q
A3 40 42 INV_001					; Set\
A4 30 41 INV_001					; Reset\	
A1 50 51 41 42 32 31 DFF_001		; HDL Flip-Flop
.MODEL DFF_001 d_dff(clk_delay=1.0N nset_delay=1.0N nreset_delay=1.0N rise_delay=1.0N 
+ fall_delay=1.0N ic=0 data_load=1.0P clk_load=1.0P nset_load=1.0P nreset_load=1.0P)
.MODEL A2D_001 adc_bridge(in_low=1.0 in_high=3.0 rise_delay=1.0N fall_delay=1.0N)
.MODEL D2A_001 dac_bridge(out_low=100m out_high=10 out_undef=100m t_rise=10N
+ t_fall=10N input_load=1.0P)
.MODEL INV_001 d_inverter(rise_delay=1.0N fall_delay=1.0N input_load=1.0P)
.ENDS
**** ISUPPLY ****
BSUPP 7 5 I=V(81)<3.5 ? 800U : 4.5M
**** REFERENCE VOLTAGE ****
BREF 80 5 V=V(81)<3.5 ? 0 : 5V
ROUT 80 4 10
RBIAS 4 3 5k
**** STARTUP AND UVLO ****
XUVLO 7 81 UVLO
BSTRT 8 7 I=V(81)<3.5 ? (8.5M*((14-V(7))/14)+6M) : 70U
CSTRT 81 600 2nF
RSTRT 5 600 1k
XOR2 600 213 610 OR2
**** ZERO DETECTION ****
DCLAMP 5 1 DZEN1
XCOMP1 50 1 51 COMP2
XDEL1 51 52 UTD {TD=300ns}
BREF1 50 5 V=V(51) > 1V ? 1.2V : 1V
**** CURRENT SENSE ****
RCS1 3 30 45k
RCS2 30 5 15k
DCS 5 30 DZEN2
XCOMP2 32 30 31 COMP2 ; + - S
XDEL2 31 33 UTD {TD=230ns}
VOFF1 32 LEBO 100mV
**** 250ns LEB ****
XDEL3 121 62 UTD {TD=250ns}
BLEB LEBO 5 V=V(62) > 3V ? V(2) : 0
**** LOGIC CIRCUITRY ****
XFFLOP 52 200 33 610 120 121 FFLOP_HD ;CLK D R S QB Q
RDUM2 120 5 100k
VDAT 200 5 5
**** 400us TIMER ****
BCHG 5 211 I=V(121) < 3V ? 10uA : 0
CTIM 211 5 410pF
VTIM 212 5 10V
XCOMP3 211 212 213 COMP2
DRST 211 120 DSTD
**** DRIVER and UVLO ****
BDRVU 90 5 V=(V(121)>3V) & (V(81)>3V) ? V(7) : 100mV
RON 90 6 36
ROFF 6 250 18
DOFF 6 250 DSTD
.MODEL SDT SW RON=1  ROFF=10Meg  VT=2V VH=1V
.MODEL DSTD D RS=100M CJO=15pF TT=10N IBV=100u N=0.01
.MODEL DZEN2 D BV=1.2 RS=100M CJO=15pF TT=100N IBV=100u
.MODEL DZEN1 D BV=10 RS=100M CJO=15pF TT=100N IBV=1m
.ENDS
*******
*==========================================================
* MC33365
* ON Semiconductor model developed by Christophe BASSO, Toulouse (FRANCE)
* Monolithic Controller
*
* This model is subject to change without notice.
* Users may not directly or indirectly re-sell or 
* re-distribute this model. This model may not 
* be used, modified, or altered 
* without the consent of ON Semiconductor. 
*
* Revision: 3/13/99
*
*==========================================================
**********
*SRC=MC33365;MC33365;ON Semiconductor;Monolithic Switchers;Brown-out protection
*SYM=MC33365
.SUBCKT MC33365 1   3   4 5 6  7  8   9    10 11  12 13 16 {RDSON=15}
*               STR VCC GND RT CT REG COMP VF BOK GND   DRAIN
.SUBCKT COMPDEL 1 2 3
*               + - Out
* T = 0.693 x Ct x Rt
B1 4 0 V=V(1) > V(2) ? 1V : 0
RT 4 5 100
CT 5 0 3.36NF
B2 10 0 V=V(5) > 500M ? 5V : 0
RD 10 3 100
CD 3 0 100P
.ENDS
* UVLO CIRCUIT ****
.SUBCKT UVLO  1   2  
*            VIN OUT
S1 1 3 1 0 SUVLO
RUV 3 0 100K
B1 4 0 V= V(3) > 5V ? 5V : 0
RD 4 2 100
CD 2 0 100P
.MODEL SUVLO SW RON=1 ROFF=1E6 VT=12 VH=2.5
.ENDS
* T FFLOP Circuit ****
.SUBCKT FFLOP 6 8 2 1
*             S R Q Q\
BQB   10 0 V=(V(8)<800M) & (V(2)>800M) ? 0 : 5V
BQ    20 0 V=(V(6)<800M) & (V(1)>800M) ? 0 : 5V
RD1   10 1 100
CD1   1 0 10p IC=5
RD2   20 2 100
CD2   2 0 10p IC=0
.ENDS
* 2 INPUT, ONE INPUT IS INV, AND CIRCUIT ****
.SUBCKT AND_IN_INV 1   2    3
*                 INV NINV OUT
B1 4 0 V= (V(1)<3.5V) & (V(2)>800M) ? 5V : 0
RD 4 3 100
CD 3 0 10P
.ENDS
* 3 INPUT, ONE INPUT IS INV. AND CIRCUIT ****
.SUBCKT AND3_IN_INV  1   2    3    4  6
*                   INV NINV NINV OUT VCC 
B1 5 0 V= (V(1)<3.5V) & (V(2)>800M) & (V(3)>800M) ? V(6) : 0
RD 5 4 10
CD 4 0 100P
.ENDS
* 3 INPUT, ONE INPUT IS INV. OR CIRCUIT ****
.SUBCKT OR3_IN_INV 1   2    3    4
*                 INV NINV NINV OUT
B1 5 0 V= (V(1)<3.5V) | (V(2)>800M) | (V(3)>800M) ? 5V : 0
RD 5 4 100
CD 4 0 10P
.ENDS
* 2 INPUT AND CIRCUIT ****
.SUBCKT AND2 1 2 3
B1 4 0 V= (V(1)>800M) & (V(2)>800M) ? 5V : 0
RD 4 3 100
CD 3 0 10P
.ENDS
* 2 INPUT NOR CIRCUIT ****
.SUBCKT NOR2 1 2 3
B1 4 0 V= (V(1)>800M) | (V(2)>800M) ? 0V : 5
RD 4 3 100
CD 3 0 10P
.ENDS
* 2 INPUT COMPARATOR ****
.SUBCKT COMP2 1 2 3
*             + - S
B1 4 0 V=V(1) > V(2) ? 5V : 0
RD 4 3 100
CD 3 0 10P
.ENDS
* ERROR AMPLIFIER MODEL ****
.SUBCKT ERRAMP 20 8  3  21
*   	       +  - OUT GND
RIN 20 8 8MEG
CP1 11 21 11.5P	; {1/(6.28*(GAIN/100U)*POLE)}
E1 5 21 11 21 1
R9 5 2 5
D14 2 13 DMOD
ISINK 13 21 2.7U	; {ISINK/100} in mA
Q1 21 13 16 QPMOD
ISOURCE 7 3 100u ; {ISOURCE} in uA
D12 3 7 DMOD
D15 21 11 DCLAMP
G1 21 11 20 8 100U
V1 7 21 5.8			; Vhigh - 0.6V
V4 3 16 250M		; Vlow - 38mV
RP1 11 21 125.9MEG	; {GAIN/100U}
.MODEL QPMOD PNP
.MODEL DCLAMP D (RS=10 BV=5 IBV=0.01)
.MODEL DMOD D TT=1N CJO=10P
.ENDS
* INTERNAL MOSFET MODEL ****
.SUBCKT MOS 1 2 3 4 {RON=12 ROFF=1MEG VON=7 VOFF=1}
*Connections + - NC+ NC-
B1 1 2 I=V(3,4) < {VOFF} ? V(1,2)/{ROFF} : V(3,4) > {VON} ?
+ V(1,2)/{RON} : V(1,2)/ (EXP(LN({(RON*ROFF)^.5}) + 
+ 3 * LN({RON/ROFF}) * (V(3,4) - {(VON+VOFF)/2}) / ({2* (VON-VOFF)}) - 
+ 2 * LN({RON/ROFF}) * (V(3,4) - {(VON+VOFF)/2})^3 / {(VON-VOFF)^3} ))
.ENDS
**** ISUPPLY ****
BSUPP 3 4 I=V(33)<3.5 ? 250U : 3.5M
**** REFERENCE VOLTAGE ****
BREF 80 4 V=V(3)<7.7 ? V(3)-1.2 : 6.5
ROUT 80 8 10
**** START-UP, UVLO AND BROWNOUT PROTECTION ****
XUVLO 3 81 UVLO
BBOK 3 11 I= V(82)>3.5 ? 50uA : 100nA
VBOK 120 4 1.25
XOVL 11 120 82 COMP2
BSTRT 1 3 I=V(81)<3.5 ? (0.2M*((14-V(3))/14)+1.6M) : 40U
XAND 81 82 33 AND2
**** OSCILLATOR SECTION ****
BCHG 4 7 I=(V(INV1)>500M) & (V(33)>3.5) ? I(VIRT)*4 : 0
BDIS 7 4 I=V(INV1)<500M ? I(VIRT)*4 : 0
DUV 7 33 DUV
VSET 21 4 1.25V
VIRT 21 6
VREF1 22 0 2.5V
RI 22 23 40K
RF 23 INV1 10K
BCMP CLK 4 V=V(7)-V(23)>0 ? 5 : 0
BINV 25 4 V=V(CLK)<500M ? 2.5 : 0
RDEL1 25 INV1 100
CEL2 INV1 0 100P
**** PWM AND LATCH ****
XPWM 7 9 31 COMP2
XOR1 33 31 32 34 OR3_IN_INV
XNAND1 34 CLK 35 AND_IN_INV
XFFLOP 35 34 36 37 FFLOP
XNAND2 CLK 36 33 450 3 AND3_IN_INV
RDRV 450 DRV 100
**** ERROR AMPLIFIER ****
VREF2 60 4 2.6V
XERR 60 10 9 4 ERRAMP ; +  - OUT GND
**** CURRENT LIMIT COMPARATOR ****
RLIMIT 40 4 450
B225 4 40 I=I(VIRT)*2.25
XCOMP 50 40 32 COMPDEL
**** MOSFET MODEL ****
CIN DRV 4 200pF
XMOS 16 71 DRV 4 MOS {RON={RDSON} ROFF=1MEG VON=3 VOFF=1}
VISRC 71 4
**** KELVIN AND L.E.B. ****
BIKEL 4 50 I=V(DRV)>V(3)-0.7 ? I(VISRC)/51.2 : 0
RKEL 50 4 9
.MODEL DUV D RS=100M TT=50N CJO=10P N=0.1
.ENDS
********
*==========================================================
* MC44608
* ON Semiconductor model developed by Christophe BASSO, Toulouse (FRANCE)
* Averaged model made by Ben-Gurion University (ISRAEL)
* average FLYBACK AC model DCM and CCM modes
*
* This model is subject to change without notice.
* Users may not directly or indirectly re-sell or 
* re-distribute this model. This model may not 
* be used, modified, or altered 
* without the consent of ON Semiconductor. 
*
* Revision: March 21st 1999
*
*==========================================================
*********
*SRC=MC44608;MC44608;ON Semiconductor;VHV PWM Controllers;MC44608 AC model
*SYM=MC44608
.SUBCKT MC44608 77      81       11 31  51  61 {Lp=??? Fs=75k}
*				In_duty Duty_Out FB Gnd Out Vin
* INTERNAL P-CHANNEL MODEL ****
.SUBCKT PCHAN 30 40 50
* NODES: DRAIN GATE SOURCE
M1 30 20 50 50 MOD1 L=1U W=1U
RG 40 20 167
RL 30 50 50E6
.MODEL MOD1 PMOS VTO=-1.709 RS=3.091 RD=0.979 IS=1E-15 KP=0.146
+CGSO=26P CGDO=4P CBD=12P PB=1
.ENDS
* SIMPLE ERROR AMPLIFIER ****
.SUBCKT ERRAMP 1 5 2
*               + - OUT
G1 0 4 1 5 100u
R1 4 0 300Meg		 ; 90dB OL
C1 4 0 53pF		   ; 10Hz pole
E1 2 0 4 0 1
V1 3 0 500mV
D2 3 4 DCLP
.MODEL DCLP D (BV=8.7 CJO=40PF IS=7E-09 M=.45 N=2 RS=.8)
+ TT=10E-09 VJ=.6V)
.ENDS
*
RGAIN1 11 70 20			; Dynamic zener resistance
XERR 71 70 72 ERRAMP	; Internal error amplifier
VREF 71 31 5V			; Internal reference voltage
XPCH 73 72 70 PCHAN		; P-channel MOSFET
RGAIN2 73 31 390		; I/V converter
DCLP 73 74 DCLAMP		; Negative clamp
VCLP1 74 31 320mV		; lower duty-cycle limit
VD 75 31 820mV			; upper duty-cycle limit
E1 76 31 75 73 1		; decreasing duty-cycle
RF 76 140 750k
CF 140 31 55pF
B2 81 31 V=V(140,31)>810mV ? 810mV : V(140,31)<10mV ? 10mV : V(140,31)
BELM OUT1 31 V=V(61)*V(77)-V(51)*V(DOFF)
BDOFF 7 31 V=2*I(VLM)*{Fs}*{Lp}/(V(77)+1u)/(V(61)+1u)-V(77)
BGIN 61 31 I=I(VLM)*V(77)/(V(77)+V(DOFF)+1u)
BGOUT 31 51 I=I(VLM)*V(DOFF)/1/(V(77)+V(DOFF)+1u)
RM OUT1 5 1M
LM 5 8 {Lp}
VLM 8 31
VCLP2 VC 31 9M
D2 VC DOFF DBREAK
D1 DOFF 6 DBREAK
R4 DOFF 7 10
BDOFFM 6 31 V=1-V(77)-9M
.MODEL DBREAK D (TT=10N CJO=100P N=0.01 RS=10M)
.MODEL DCLAMP D (BV=100V CJO=4PF IS=7E-09 M=.45 N=1.8
+ RS=1.5 TT=6E-09 VJ=.6V)
.ENDS
***********
*==========================================================
* NCP105X
* ON Semiconductor models developed by Christophe BASSO, Toulouse (FRANCE)
* Updated by Larry Meares to include VSECTOL usage
*
* This model is subject to change without notice.
* Users may not directly or indirectly re-sell or 
* re-distribute this model. This model may not 
* be used, modified, or altered 
* without the consent of ON Semiconductor. 
*
* Revision: September 2nd 2001
* This fully floating simplified models accounts for:
*
* various propagation delays 
* overload detection
* frequency jittering
* the MOSFET is made of a smooth switch for faster simulations
* !!! Vcc capacitor init voltage should be less than 7.5V
*
*==========================================================
**********
*SRC=NCP1050A;NCP1050A;ON Semiconductor;Monolithic Switchers;NCP1050A 44kHz 100mA
*SYM=NCP105X
.SUBCKT NCP1050A Vcc FB  Gnd  HV  Gnd  Gnd  Gnd 
X1 Vcc FB  Gnd  HV  Gnd  Gnd  Gnd NCP105X params: RDSON=48 ICONS=470u Ct=3.6n Imax=100m Prop=125n
.ENDS
*INCLUDE ONIC.LIB
**********
*SRC=NCP1051A;NCP1051A;ON Semiconductor;Monolithic Switchers;NCP1051A 44kHz 200mA
*SYM=NCP105X
.SUBCKT NCP1051A Vcc FB  Gnd  HV  Gnd  Gnd  Gnd 
X1 Vcc FB  Gnd  HV  Gnd  Gnd  Gnd NCP105X params: RDSON=48 ICONS=470u Ct=3.6n Imax=200m Prop=125n
.ENDS
*INCLUDE ONIC.LIB
**********
*SRC=NCP1052A;NCP1052A;ON Semiconductor;Monolithic Switchers;NCP1052A 44kHz 300mA
*SYM=NCP105X
.SUBCKT NCP1052A Vcc FB  Gnd  HV  Gnd  Gnd  Gnd 
X1 Vcc FB  Gnd  HV  Gnd  Gnd  Gnd NCP105X params: RDSON=48 ICONS=470u Ct=3.6n Imax=300m Prop=125n
.ENDS
*INCLUDE ONIC.LIB
**********
*SRC=NCP1053A;NCP1053A;ON Semiconductor;Monolithic Switchers;NCP1053A 44kHz 400mA
*SYM=NCP105X
.SUBCKT NCP1053A Vcc FB  Gnd  HV  Gnd  Gnd  Gnd 
X1 Vcc FB  Gnd  HV  Gnd  Gnd  Gnd NCP105X params: RDSON=24 ICONS=530u Ct=3.6n Imax=400m Prop=250n
.ENDS
*INCLUDE ONIC.LIB
**********
*SRC=NCP1054A;NCP1054A;ON Semiconductor;Monolithic Switchers;NCP1054A 44kHz 530mA
*SYM=NCP105X
.SUBCKT NCP1054A Vcc FB  Gnd  HV  Gnd  Gnd  Gnd 
X1 Vcc FB  Gnd  HV  Gnd  Gnd  Gnd NCP105X params: RDSON=24 ICONS=530u Ct=3.6n Imax=530m Prop=250n
.ENDS
*INCLUDE ONIC.LIB
**********
*SRC=NCP1055A;NCP1055A;ON Semiconductor;Monolithic Switchers;NCP1055A 44kHz 680mA
*SYM=NCP105X
.SUBCKT NCP1055A Vcc FB  Gnd  HV  Gnd  Gnd  Gnd 
X1 Vcc FB  Gnd  HV  Gnd  Gnd  Gnd NCP105X params: RDSON=24 ICONS=530u Ct=3.6n Imax=680m Prop=250n
.ENDS
*INCLUDE ONIC.LIB
**********
*SRC=NCP1050B;NCP1050B;ON Semiconductor;Monolithic Switchers;NCP1050B 100kHz 100mA
*SYM=NCP105X
.SUBCKT NCP1050B Vcc FB  Gnd  HV  Gnd  Gnd  Gnd 
X1 Vcc FB  Gnd  HV  Gnd  Gnd  Gnd NCP105X params: RDSON=48 ICONS=520u Ct=1.6n Imax=100m Prop=125n
.ENDS
*INCLUDE ONIC.LIB
**********
*SRC=NCP1051B;NCP1051B;ON Semiconductor;Monolithic Switchers;NCP1051B 100kHz 200mA
*SYM=NCP105X
.SUBCKT NCP1051B Vcc FB  Gnd  HV  Gnd  Gnd  Gnd 
X1 Vcc FB  Gnd  HV  Gnd  Gnd  Gnd NCP105X params: RDSON=48 ICONS=520u Ct=1.6n Imax=200m Prop=125n
.ENDS
*INCLUDE ONIC.LIB
**********
*SRC=NCP1052B;NCP1052B;ON Semiconductor;Monolithic Switchers;NCP1052B 100kHz 300mA
*SYM=NCP105X
.SUBCKT NCP1052B Vcc FB  Gnd  HV  Gnd  Gnd  Gnd 
X1 Vcc FB  Gnd  HV  Gnd  Gnd  Gnd NCP105X params: RDSON=48 ICONS=520u Ct=1.6n Imax=300m Prop=125n
.ENDS
*INCLUDE ONIC.LIB
**********
*SRC=NCP1053B;NCP1053B;ON Semiconductor;Monolithic Switchers;NCP1053B 100kHz 400mA
*SYM=NCP105X
.SUBCKT NCP1053B Vcc FB  Gnd  HV  Gnd  Gnd  Gnd 
X1 Vcc FB  Gnd  HV  Gnd  Gnd  Gnd NCP105X params: RDSON=24 ICONS=610u Ct=1.6n Imax=400m Prop=250n
.ENDS
*INCLUDE ONIC.LIB
**********
*SRC=NCP1054B;NCP1054B;ON Semiconductor;Monolithic Switchers;NCP1054B 100kHz 530mA
*SYM=NCP105X
.SUBCKT NCP1054B Vcc FB  Gnd  HV  Gnd  Gnd  Gnd 
X1 Vcc FB  Gnd  HV  Gnd  Gnd  Gnd NCP105X params: RDSON=24 ICONS=610u Ct=1.6n Imax=530m Prop=250n
.ENDS
*INCLUDE ONIC.LIB
**********
*SRC=NCP1055B;NCP1055B;ON Semiconductor;Monolithic Switchers;NCP1055B 100kHz 680mA
*SYM=NCP105X
.SUBCKT NCP1055B Vcc FB  Gnd  HV  Gnd  Gnd  Gnd 
X1 Vcc FB  Gnd  HV  Gnd  Gnd  Gnd NCP105X params: RDSON=24 ICONS=610u Ct=1.6n Imax=680m Prop=250n
.ENDS
*INCLUDE ONIC.LIB
**********
*SRC=NCP1050C;NCP1050C;ON Semiconductor;Monolithic Switchers;NCP1050C 133kHz 100mA
*SYM=NCP105X
.SUBCKT NCP1050C Vcc FB  Gnd  HV  Gnd  Gnd  Gnd 
X1 Vcc FB  Gnd  HV  Gnd  Gnd  Gnd NCP105X params: RDSON=48 ICONS=560u Ct=1.18n Imax=100m Prop=125n
.ENDS
*INCLUDE ONIC.LIB
**********
*SRC=NCP1051C;NCP1051C;ON Semiconductor;Monolithic Switchers;NCP1051C 133kHz 200mA
*SYM=NCP105X
.SUBCKT NCP1051C Vcc FB  Gnd  HV  Gnd  Gnd  Gnd 
X1 Vcc FB  Gnd  HV  Gnd  Gnd  Gnd NCP105X params: RDSON=48 ICONS=560u Ct=1.18n Imax=200m Prop=125n
.ENDS
*INCLUDE ONIC.LIB
**********
*SRC=NCP1052C;NCP1052C;ON Semiconductor;Monolithic Switchers;NCP1052C 133kHz 300mA
*SYM=NCP105X
.SUBCKT NCP1052C Vcc FB  Gnd  HV  Gnd  Gnd  Gnd 
X1 Vcc FB  Gnd  HV  Gnd  Gnd  Gnd NCP105X params: RDSON=48 ICONS=560u Ct=1.18n Imax=300m Prop=125n
.ENDS
*INCLUDE ONIC.LIB
**********
*SRC=NCP1053C;NCP1053C;ON Semiconductor;Monolithic Switchers;NCP1053C 133kHz 400mA
*SYM=NCP105X
.SUBCKT NCP1053C Vcc FB  Gnd  HV  Gnd  Gnd  Gnd 
X1 Vcc FB  Gnd  HV  Gnd  Gnd  Gnd NCP105X params: RDSON=24 ICONS=670u Ct=1.18n Imax=400m Prop=250n
.ENDS
*INCLUDE ONIC.LIB
**********
*SRC=NCP1054C;NCP1054C;ON Semiconductor;Monolithic Switchers;NCP1054C 133kHz 530mA
*SYM=NCP105X
.SUBCKT NCP1054C Vcc FB  Gnd  HV  Gnd  Gnd  Gnd 
X1 Vcc FB  Gnd  HV  Gnd  Gnd  Gnd NCP105X params: RDSON=24 ICONS=670u Ct=1.18n Imax=530m Prop=250n
.ENDS
*INCLUDE ONIC.LIB
**********
*SRC=NCP1055C;NCP1055C;ON Semiconductor;Monolithic Switchers;NCP1055C 133kHz 680mA
*SYM=NCP105X
.SUBCKT NCP1055C Vcc FB  Gnd  HV  Gnd  Gnd  Gnd
X1 Vcc FB  Gnd  HV  Gnd  Gnd  Gnd NCP105X params: RDSON=24 ICONS=670u Ct=1.18n Imax=680m Prop=250n
.ENDS
*INCLUDE ONIC.LIB
**********
.SUBCKT NCP105X Vcc FB  Gnd  HV  Gnd  Gnd  Gnd params: RDSON=24 ICONS=600u Ct=1.18n 
+ Imax=400m Prop=250n
*
.SUBCKT DSS HV Vcc DSSCMP Fault {VOFF=8.6V VON=7.6V Isrc=6mA}
B12 HV Vcc I=(V(dsscmp) > 3V) & (V(hv) > 20) ? {Isrc} : 0
X17 1 Vcc DSSCMP COMPAR
B13 1 0 V=V(Fault) > 3.5 ? 0 : V(dsscmp) > 3V ? {VOFF} : {VON}
R1 HV 0 100Meg
.ENDS
*
.SUBCKT PSW1 1a 2 3   4 {RON=1 ROFF=1MEG VON=1 VOFF=0}
*Connections + - NC+ NC-
*Parameters: Ron ON Resistance in Ohms, Roff Off Resistance in Ohms
* VON ON Current in Amps, VOFF Off Current in Amps
* VON > Voff Case
* IF V(3,4) > VON THEN RSwitch=RON, IF V(3,4) < VOFF THEN RSwitch=ROFF, ELSE
* RSwitch will smoothly transistion between the on and off states
B1 1 2 I=V(3,4) < {VOFF} ? V(1,2)/{ROFF} : V(3,4) > {VON} ?
+ V(1,2)/{RON} : V(1,2)/ (EXP(LN({(RON*ROFF)^.5}) + 
+ 3 * LN({RON/ROFF}) * (V(3,4) - {(VON+VOFF)/2}) / ({2* (VON-VOFF)}) - 
+ 2 * LN({RON/ROFF}) * (V(3,4) - {(VON+VOFF)/2})^3 / {(VON-VOFF)^3} ))
rlead 1 1a 50
llead 1 1a 10n
.ENDS
*
.SUBCKT LATCH 6 8 2 1 {VHIGH=10 VLOW=100m}
*             S R Q Q\
BQB   10 0 V=(V(8)<800M) & (V(2)>800M) ? {VLOW} : {VHIGH}
BQ    20 0 V=(V(6)<800M) & (V(1)>800M) ? {VLOW} : {VHIGH}
RD1   10 1 100
CD1   1 0 10p IC={VHIGH}
RD2   20 2 100
CD2   2 0 10p IC={VLOW}
bvsec1 100 0 v=v(10)*50
bvsec2 102 0 v=v(20)*50
rbvsec1 100 0 1k
rbvsec2 102 0 1k
.ENDS
*
.SUBCKT PULS IN OUT {Ctime=290pF}
X39 in 2 BUFPULS
C13 2 3 {Ctime}
R5 3 0 2.2k
D9 0 3 DCLPN Temp=27
X40 3 out BUFPULS
.MODEL DCLPN D BV=100V CJO=4PF IS=7E-09 M=.45 N=0.01
+ RS=.8 TT=6E-09 VJ=.6V
.ENDS
*
.SUBCKT INV 1 2
B1 4 0 V= V(1)>3.5 ? 0 : 10V
RD 4 2 100
CD 2 0 10P
bvsectol 100 0 v=50*v(4)
rbvsectol 100 0 1k
.ENDS
*
.SUBCKT OR2X4 1 2 3
B1 4 0 V= (V(1)>2.5V) | (V(2)>2.5V) ? 5V : 100m
RD 4 3 100
CD 3 0 10P
bvsectol 100 0 v=50*v(4)
rbvsectol 100 0 1k
.ENDS
*
.SUBCKT OSC1050 UVLO Vcc Clock {Ct=1.18n}
Ct Ct 0 {Ct}
X2x Ct 1 CMP COMPAR
B1 1 0 V=V(CMP) > 3V ? 300m : 3V
B2 0 Ct I=V(UVLO) < 3.5 ? 0 : V(Vcc)*80u
R1 UVLO 0 1Meg
R2 Vcc 0 1Meg
B3 Ct 0 I=V(CMP) > 3 ? V(Vcc)*80u*3 : 0
R3 Ct 0 10Meg
X1 UVLO 2 Clock AND2
X2 CMP 2 INV
.ENDS
*
.SUBCKT COMPAR NINV INV OUT {VHIGH=12 VLOW=100m}
B1 4 0 V = V(NINV,INV) > 0  ?  {VHIGH}  :  {VLOW}
bvec 100 0 v=50*v(4)
rbvec 100 0 1k
RO 4 OUT 100
CO OUT 0 100PF
.ENDS
*
.SUBCKT AND2 1 2 3
B1 4 0 V= (V(1)>800mV) & (V(2)>800mV) ? 10V : 100m
RD 4 3 100
CD 3 0 10P
bvsectol 100 0 v=50*v(4)
rbvsectol 100 0 1k
.ENDS
*
.SUBCKT UTD 1 2
*
*Parameters K=GAIN TD=DELAY
RIN 1 0 1E15
E1 3 0 1 0 {K}
T1 3 0 2 0 Z0=1 TD={TD}
R1 2 0 1
.ENDS
*
.SUBCKT 1050CLOCK CLOCK OR ILIMIT Q
X9 Or 1 INV
X10 Clock 6 INV
X7 13 6 7 Qb LATCH
X6 6 Or ILIMIT 3 OR3
X4 Clock 1 13 AND2
X1 8 3 Q Qb2 LATCH
Rdum Qb2 0 1Meg
C1 7 8 100p
R1 8 0 1k
D1 0 8 Dneg Temp=27 
.MODEL Dneg D BV=100V CJO=4PF IS=7E-09 M=.45 N=0.01
+ RS=.8 VJ=.6V
.ENDS
*
.SUBCKT OR2 1 2 3
B1 4 0 V= (V(1)>800M) | (V(2)>800M) ? 5V : 100m
RD 4 3 100
CD 3 0 10P
bvsectol 100 0 v=50*v(4)
rbvsectol 100 0 1k
.ENDS
*
.SUBCKT BSS84 30 40 50
* NODES: DRAIN GATE SOURCE
M1 30 20 50 50 MOD1 L=1u W=1u
RG 40 20 167
RL 30 50 50E6
D1 30 50 DIODE1
.MODEL MOD1 PMOS VTO=-1.709 RS=3.091 RD=0.979 IS=1E-15 KP=0.146
+CGSO=26P CGDO=4P CBD=12P PB=1
.MODEL DIODE1 D IS=1.072E-13 RS=0.527 N=1.077
.ENDS
*
.SUBCKT BS170p 1 2 3
* 1=drain  2=gate  3=source
Cgs  2 3 12.3E-12
Cgd1 2 4 27.4E-12
Cgd2 1 4 6E-12
M1 1 2 3 3 MOST1 W=9.7m L=2u
M2 4 2 1 3 MOST2 W=9.7m L=2u
D1 3 1 Dbody
.MODEL MOST1 NMOS(Level=3 Kp=20.78u Rs=20m Vto=2 Rd=1.186)
.MODEL MOST2 NMOS(VTO=-4.73 Kp=20.78u Rs=20m)
.MODEL Dbody D(Is=125f N=1.023 Rs=1.281 Cjo=46.3p M=.3423
+            Vj=.4519 Bv=60 Ibv=10u Tt=161.6n)
.ENDS
*
.SUBCKT UVLO  1   2  {VON=12 VOFF=10}
*            VIN OUT
S1 10 3 1 0 SUVLO
RUV 3 0 100K
VCC 10 0 10V
B1 4 0 V= V(3) > 5V ? 5V : 0
RD 4 2 100
CD 2 0 100P
.MODEL SUVLO SW RON=1 ROFF=1E6 VT={((VON-VOFF)/2) + VOFF} VH={(VON-VOFF)/2}
; VON = VT+VH = 15.0 VOFF = VT-VH = 7.6V
.ENDS
*
.SUBCKT BUFPULS 1 2
B1 4 0 V= V(1)>3.5 ? 10V : 0
bvsectol 44 0 v=50*v(4)
Rbvsectol 44 0 1k
RD 4 2 100
CD 2 0 10P
.ENDS
*
.SUBCKT OR3 1 2 3 4
B1 5 0 V= (V(1)>800M) | (V(2)>800M) | (V(3)>800M) ? 5V : 100m
bvsectol 55 0 v=50*v(5)
Rbvsectol 55 0 1k
RD 5 4 100
CD 4 0 10P
.ENDS
*
XSW HV 24 Q Gnd PSW1 {RON={RDSON} ROFF=1MEG VON=8 VOFF=6} ; Switch ON resistance
B9 Vcc gnd I=V(pulsok,gnd) > 3.5V ? {ICONS} : 160u ; IC consumption
X9xx pulsok Vcc clock OSC1050 {Ct=Ct} ; Clock frequency
Vlimit 17 gnd DC={Imax} ; maximum peak current
Coss HV Gnd 10pF
X15 HV Vcc dsscmp fault DSS
X6xx dss8V ResetOR 55 qb10 LATCH
X7xx 70 16 fault qb5 LATCH
B3 5 gnd V=V(pulsok,gnd) > 2.5V ? 3.3V : 0
X8xx 12 19 PULS
XINVFB 3 7 INV
XORFB 7 8 OR OR2X4
Rsense 24 gnd 1
B4 22 gnd V=V(pulsok,gnd) > 2.5V ? 2.8V : 0
B1 36 gnd V=V(LEB,gnd) > 3.5 ? V(24,gnd) : 0
B2x 2 3 I=V(pulsok,gnd) < 3.5V ? 0 : V(OR,gnd) > 3.5 ? 38u : 45u
B5x 8 gnd I=V(pulsok,gnd) < 3.5 ? 0 : V(OR,gnd) > 3.5 ? 37u : 47u
B6 2 gnd V=V(pulsok,gnd) > 2.5V ? 8V : 0
X10xx UVLO UVLOrst PULS
R8x qb5 gnd 100k
X13xx OR 77 PULS
X14 4 76 PULS
X11 36 17 11 COMPAR
X16x 21 75 PULS
X21 75 UVLO dss8V AND2
X23 76 UVLO dss7V AND2
X5 Q LEB UTD params: K=1 TD=100n
R10 dsscmp 4 100
X39 UVLO 12 INV
X25 77 UVLO ResetOR AND2
D3 3 2 DCLP
X26 UVLO qb5 pulsok AND2
X27 dss7V 55 70 AND2
X19 clock OR 15 Q 1050CLOCK
Dbody gnd HV DBODY
D4 gnd 8 DCLP Temp=27
X18 8 22 FB BSS84
X20 3 5 FB BS170p
X17 11 15 UTD {K=1 TD=Prop}
C8 4 gnd 100p IC=10
X24 4 21 INV
X31 Vcc UVLO UVLO params: VON=8.6 VOFF=4.6
X35 UVLOrst 19 16 OR2
.MODEL DBODY D BV=700 CJO=100p RS=10m TT=10n
.MODEL DCLP D BV=100V CJO=4PF IS=7E-09 M=.45 N=0.01
+ RS=.8 TT=6E-09 VJ=.6V
.ENDS
************
*==========================================================
* NCP1200
* ON Semiconductor model developed by Christophe BASSO, Toulouse (FRANCE)
* VHV PWM Controllers
*
* This model is subject to change without notice.
* Users may not directly or indirectly re-sell or 
* re-distribute this model. This model may not 
* be used, modified, or altered 
* without the consent of ON Semiconductor. 
*
* Revision: January 14th 2000
* This simplified models accounts for propagation delays 
* and includes the complete overcharge detection scheme
*
*==========================================================
**********
*SRC=NCP1200;NCP1200;ON Semiconductor;VHV PWM Controllers;Low-cost 40kHz
*SYM=NCP1200
.SUBCKT NCP1200 1   2  3  4   5   6      8 {Fs=40k}
*               Adj FB CS Gnd Drv Vcc   HV
**** SUBCIRCUIT MODELS ****
.SUBCKT UTD 1 2 {TD=???}
*
*Parameters K=GAIN TD=DELAY
RIN 1 0 1E15
E1 3 0 1 0 1
T1 3 0 2 0 Z0=1 TD={TD}
R1 2 0 1
.ENDS
* 2 INPUT COMPARATOR ****
.SUBCKT COMP2 1 2 3
*             + - S
B1 4 0 V=V(1) > V(2) ? 5V : 0
RD 4 3 100
CD 3 0 10P
.ENDS
* 4 INPUT OR GATE ****
.SUBCKT OR3 1 2 3 6
B1 5 0 V= (V(1)>800M) | (V(2)>800M) | (V(3)>800M) ? 5V : 0
RD 5 6 100
CD 6 0 10P
.ENDS
* 2 INPUT OR GATE ****
.SUBCKT OR2 1 2 3
B1 4 0 V= (V(1)>800M) | (V(2)>800M) ? 5V : 0
RD 4 3 100
CD 3 0 10P
.ENDS
* 2 INPUT AND CIRCUIT ****
.SUBCKT AND2 1 2 3
B1 4 0 V= (V(1)>800M) & (V(2)>800M) ? 5V : 0
RD 4 3 100
CD 3 0 10P
.ENDS
* 2 INPUT AND CIRCUIT ****
.SUBCKT AND2I 1 2 3
B1 4 0 V= (V(1)<800M) & (V(2)>800M) ? 5V : 0
RD 4 3 100
CD 3 0 10P
.ENDS AND2I
* 2 INPUT NOR CIRCUIT ****
.SUBCKT NOR2 1 2 3
B1 4 0 V= (V(1)>800M) | (V(2)>800M) ? 0V : 5
RD 4 3 100
CD 3 0 10P
.ENDS
*
.SUBCKT TFFLOP 6 8 2 1
*              S R Q Q\
BQB   10 0 V=(V(8)<800M) & (V(2)>800M) ? 0 : 10V
BQ    20 0 V=(V(6)<800M) & (V(1)>800M) ? 0 : 10V
RD1   10 1 100
CD1   1 0 10p IC=5
RD2   20 2 100
CD2   2 0 10p IC=0
.ENDS
**** ESD NETWORK ****
D1 4 1 DCLAMP1
D2 4 2 DCLAMP1
D3 4 3 DCLAMP1
D4 4 5 DCLAMP2
D5 4 6 DCLAMP2
**** SELF-SUPPLY ****
B2 8 6 I=V(11) > 3.5 ? 0 : 4m
XCOMP1 6 10 UVLO COMP2
B5 10 4 V=V(UVLO) < 3.5 ? 12 : 10
X2 UVLO OVERLATCH 11 OR2
XUVLO6 100 6 110 COMP2
X50 110 OVERLATCH UVLO6 AND2
VUVLO6 100 4 6.5
**** OUTPUT PULSE VALIDATION ****
XPULS UVLO OVER PULSOK NC4 TFFLOP ; turns the pulses on at UVLOh
* S R Q Q\
RDUM4 OVER 4 100k
**** CURRENT CONSUMPTION ****
ISUPP1 6 4 300u
BSUPP2 6 4 I=V(PULSOK) > 3.5 ? (300u + I(VFBM)) : 0
BSUPPDRV 6 4 I=I(VPW) > 0 ? I(VPW) : 0
**** CLOCK SECTION ****
VCLOCK clk1 4 PULSE 0 10 0 10n 10n 100n {1/Fs}
VMDUTY MDUTY 4 PULSE 0 10 {0.8/Fs} 10n 10n 100n {1/Fs}
XRESET clk1 200 clk2 AND2
BINVRST 200 4 V=V(SKIP)<800mV ? 3.5 : 0
XFFLOP clk2 RST Q NC1 TFFLOP
RNC1 NC1 4 100k
XRST MDUTY IMAX SKIP RST OR3
**** CURRENT SENSE ****
BVREF REF1 4 V=V(6) > 4.8V ? 4.8 : V(6)
VFBM REF1 REF ; feedback current measure
RFB REF 2 8k
RDUPP 2 290 57k
RDLOW 290 4 20k
BCLIP ISET 4 V=V(290) > 1 ? 1V : V(290)
XCOMP2 LEBO ISET OVERI COMP2
XPROPDEL OVERI IMAX UTD {TD=200ns} ; propagation delay
XDEL3 Q 30 UTD {TD=250ns}
BLEB LEBO 4 V=V(30) > 3V ? V(3) : 0
**** OVERLOAD SECTION ****
BOVER 50 4 V=(V(ISET)>990mV) & (V(PULSOK)>3.5) ? 10 : 0
XOVER UVLO 50 OVER AND2I ; UVLO low and OVL, latches off the pulses
XLATCH OVER UVLO6 OVERLATCH NC5 TFFLOP ; latches off the current source
RNC5 NC5 4 100k
**** SKIP CYCLE SECTION ****
RADJU REF 1 70k
RADJL 1 4 23.3k
XSKIP 150 2 SKIP COMP2
BHYST 150 4 V=V(SKIP) < 3.5 ? V(1) : V(1)+100m
**** DRIVER SECTION ****
BDRVU 90 4 V=(V(PULSOK)>3V) & (V(Q)>3V) ? V(6) : 100mV
VPW 90 91
RON 91 5 36
ROFF 90 250 18
DOFF 5 250 DSTD
****
.MODEL DSTD D RS=100M CJO=15pF TT=50n N=0.2
.MODEL DCLAMP1 D BV=10
.MODEL DCLAMP2 D BV=20
.ENDS
************
*==========================================================
* NCP1200
* ON Semiconductor model developed by Christophe BASSO, Toulouse (FRANCE)
* VHV PWM Controllers, average FLYBACK AC model DCM and CCM modes
* FLYBACK average model made by Ben-Gurion University (ISRAEL)
* http://www.ee.bgu.ac.il/~pel
*
* This model is subject to change without notice.
* Users may not directly or indirectly re-sell or 
* re-distribute this model. This model may not 
* be used, modified, or altered 
* without the consent of ON Semiconductor. 
*
* Revision: January 14th 2000
*
*==========================================================
************
*SRC=NCP1200_Av;NCP1200_Av;ON Semiconductor;VHV PWM Controllers;NCP1200 Averaged model
*SYM=NCP1200_A
.SUBCKT NCP1200_Av In Out Gnd FB CTRL {FS=??? L=??? MC=??? RI=???}
BGIN IN GND I=I(VLM)*V(DON)/(V(DON)+V(DOFF)+1u)
BELM OUT1 GND V=V(IN)*V(DON)-V(OUT)*V(DOFF)
RM OUT1 5 1M
LM 5 8 {L}
VLM 8 GND
BGOUT GND OUT I=I(VLM)*V(DOFF)/(V(DON)+V(DOFF)+1u)
BDON DON GND V = ((V(CONTROL)-I(VLM)*{RI})*{FS})/({MC}+((0.5*{RI}*V(IN))/{L})+1u) < 10m ? 10m
+ : ((V(CONTROL)-I(VLM)*{RI})*{FS})/({MC}+((0.5*{RI}*V(IN))/{L})+1u) > .999 ? .999
+ : ((V(CONTROL)-I(VLM)*{RI})*{FS})/({MC}+((0.5*{RI}*V(IN))/{L})+1u)
VCLP VC 0 9M
D2 VC DOFF DBREAK
D1 DOFF 6 DBREAK
R4 DOFF 7 10
BDOFFM 6 GND V=1-V(DON)-9M
BDOFF 7 GND V=2*I(VLM)*{FS}*{L}/(V(DON)+1u)/(V(IN)+1u)-V(DON)
B1 CONTROL 0 V=V(CTRL)/4 > 1 ? 1 : V(CTRL)/4
Vref 50 GND DC=4.8V
Rfb 50 FB 8k
.MODEL DBREAK D (TT=1N CJO=10P N=0.01)
.ENDS
************
*==========================================================
* NCP1200A
* ON Semiconductor model developed by Christophe BASSO, Toulouse (FRANCE)
* VHV PWM Controllers
*
* This model is subject to change without notice.
* Users may not directly or indirectly re-sell or 
* re-distribute this model. This model may not 
* be used, modified, or altered 
* without the consent of ON Semiconductor. 
*
* Revision: October 15th 14th 2002
* This simplified models accounts for propagation delays 
* and includes the complete overcharge detection scheme
*
*==========================================================
**********
*SRC=NCP1200A;NCP1200A;ON Semiconductor;VHV PWM Controllers;Improved NCP1200
*SYM=NCP1200A
.SUBCKT NCP1200A 1   2  3  4   5   6      8 {Fs=40k}
*               Adj FB CS Gnd Drv Vcc   HV
**** SUBCIRCUIT MODELS ****
.SUBCKT UTD 1 2 {TD=???}
*
*Parameters K=GAIN TD=DELAY
RIN 1 0 1E15
E1 3 0 1 0 1
T1 3 0 2 0 Z0=1 TD={TD}
R1 2 0 1
.ENDS
* 2 INPUT COMPARATOR ****
.SUBCKT COMP2 1 2 3
*             + - S
B1 4 0 V=V(1) > V(2) ? 5V : 0
RD 4 3 100
CD 3 0 10P
.ENDS
* 4 INPUT OR GATE ****
.SUBCKT OR3 1 2 3 6
B1 5 0 V= (V(1)>800M) | (V(2)>800M) | (V(3)>800M) ? 5V : 0
RD 5 6 100
CD 6 0 10P
.ENDS
* 2 INPUT OR GATE ****
.SUBCKT OR2 1 2 3
B1 4 0 V= (V(1)>800M) | (V(2)>800M) ? 5V : 0
RD 4 3 100
CD 3 0 10P
.ENDS
* 2 INPUT AND CIRCUIT ****
.SUBCKT AND2 1 2 3
B1 4 0 V= (V(1)>800M) & (V(2)>800M) ? 5V : 0
RD 4 3 100
CD 3 0 10P
.ENDS
* 2 INPUT AND CIRCUIT ****
.SUBCKT AND2I 1 2 3
B1 4 0 V= (V(1)<800M) & (V(2)>800M) ? 5V : 0
RD 4 3 100
CD 3 0 10P
.ENDS AND2I
* 2 INPUT NOR CIRCUIT ****
.SUBCKT NOR2 1 2 3
B1 4 0 V= (V(1)>800M) | (V(2)>800M) ? 0V : 5
RD 4 3 100
CD 3 0 10P
.ENDS
*
.SUBCKT TFFLOP 6 8 2 1
*              S R Q Q\
BQB   10 0 V=(V(8)<800M) & (V(2)>800M) ? 0 : 10V
BQ    20 0 V=(V(6)<800M) & (V(1)>800M) ? 0 : 10V
RD1   10 1 100
CD1   1 0 10p IC=5
RD2   20 2 100
CD2   2 0 10p IC=0
.ENDS
**** ESD NETWORK ****
D1 4 1 DCLAMP1
D2 4 2 DCLAMP1
D3 4 3 DCLAMP1
D4 4 5 DCLAMP2
D5 4 6 DCLAMP2
**** SELF-SUPPLY ****
B2 8 6 I=V(11) > 3.5 ? 0 : 7m
XCOMP1 6 10 UVLO COMP2
B5 10 4 V=V(UVLO) < 3.5 ? 12 : 10
X2 UVLO OVERLATCH 11 OR2
XUVLO6 100 6 110 COMP2
X50 110 OVERLATCH UVLO6 AND2
VUVLO6 100 4 6.5
**** OUTPUT PULSE VALIDATION ****
XPULS UVLO OVER PULSOK NC4 TFFLOP ; turns the pulses on at UVLOh
* S R Q Q\
RDUM4 OVER 4 100k
**** CURRENT CONSUMPTION ****
ISUPP1 6 4 300u
BSUPP2 6 4 I=V(PULSOK) > 3.5 ? (300u + I(VFBM)) : 0
BSUPPDRV 6 4 I=I(VPW) > 0 ? I(VPW) : 0
**** CLOCK SECTION ****
VCLOCK clk1 4 PULSE 0 10 0 10n 10n 100n {1/Fs}
VMDUTY MDUTY 4 PULSE 0 10 {0.8/Fs} 10n 10n 100n {1/Fs}
XRESET clk1 200 clk2 AND2
BINVRST 200 4 V=V(SKIP)<800mV ? 3.5 : 0
XFFLOP clk2 RST Q NC1 TFFLOP
RNC1 NC1 4 100k
XRST MDUTY IMAX SKIP RST OR3
**** CURRENT SENSE ****
BVREF REF1 4 V=V(6) > 4.3V ? 4.3 : V(6)
VFBM REF1 REF ; feedback current measure
RFB REF 2 20k
BCLIP ISET 4 V=V(2)/3.3 > 1 ? 1V : V(2)/3.3
XCOMP2 LEBO ISET OVERI COMP2
XPROPDEL OVERI IMAX UTD {TD=200ns} ; propagation delay
XDEL3 Q 30 UTD {TD=250ns}
BLEB LEBO 4 V=V(30) > 3V ? V(3) : 0
**** OVERLOAD SECTION ****
BOVER 50 4 V=(V(ISET)>990mV) & (V(PULSOK)>3.5) ? 10 : 0
XOVER UVLO 50 OVER AND2I ; UVLO low and OVL, latches off the pulses
XLATCH OVER UVLO6 OVERLATCH NC5 TFFLOP ; latches off the current source
RNC5 NC5 4 100k
**** SKIP CYCLE SECTION ****
RADJU REF 1 82k
RADJL 1 4 30k
XSKIP 150 2 SKIP COMP2
BHYST 150 4 V=V(SKIP) < 3.5 ? V(1) : V(1)+100m
**** DRIVER SECTION ****
BDRVU 90 4 V=(V(PULSOK)>3V) & (V(Q)>3V) ? V(6) : 100mV
VPW 90 91
RON 91 5 36
ROFF 90 250 18
DOFF 5 250 DSTD
****
.MODEL DSTD D RS=100M CJO=15pF TT=50n N=0.2
.MODEL DCLAMP1 D BV=10
.MODEL DCLAMP2 D BV=20
.ENDS
************
*==========================================================
* NCP1200A
* ON Semiconductor model developed by Christophe BASSO, Toulouse (FRANCE)
* VHV PWM Controllers, average FLYBACK AC model DCM and CCM modes
* FLYBACK average model made by Ben-Gurion University (ISRAEL)
* http://www.ee.bgu.ac.il/~pel
*
* This model is subject to change without notice.
* Users may not directly or indirectly re-sell or 
* re-distribute this model. This model may not 
* be used, modified, or altered 
* without the consent of ON Semiconductor. 
*
* Revision: October 15th 2002
*
*==========================================================
************
*SRC=NCP1200A_Av;NCP1200A_Av;ON Semiconductor;VHV PWM Controllers;NCP1200A Averaged model
*SYM=NCP1200_A
.SUBCKT NCP1200A_Av In Out Gnd FB CTRL {FS=??? L=??? MC=??? RI=???}
BGIN IN GND I=I(VLM)*V(DON)/(V(DON)+V(DOFF)+1u)
BELM OUT1 GND V=V(IN)*V(DON)-V(OUT)*V(DOFF)
RM OUT1 5 1M
LM 5 8 {L}
VLM 8 GND
BGOUT GND OUT I=I(VLM)*V(DOFF)/(V(DON)+V(DOFF)+1u)
BDON DON GND V = ((V(CONTROL)-I(VLM)*{RI})*{FS})/({MC}+((0.5*{RI}*V(IN))/{L})+1u) < 10m ? 10m
+ : ((V(CONTROL)-I(VLM)*{RI})*{FS})/({MC}+((0.5*{RI}*V(IN))/{L})+1u) > .999 ? .999
+ : ((V(CONTROL)-I(VLM)*{RI})*{FS})/({MC}+((0.5*{RI}*V(IN))/{L})+1u)
VCLP VC 0 9M
D2 VC DOFF DBREAK
D1 DOFF 6 DBREAK
R4 DOFF 7 10
BDOFFM 6 GND V=1-V(DON)-9M
BDOFF 7 GND V=2*I(VLM)*{FS}*{L}/(V(DON)+1u)/(V(IN)+1u)-V(DON)
B1 CONTROL 0 V=V(CTRL)/4 > 1 ? 1 : V(CTRL)/4
Vref 50 GND DC=4.3V
Rfb 50 FB 20k
.MODEL DBREAK D (TT=1N CJO=10P N=0.01)
.ENDS
**********
*==========================================================
* NCP1205_8/NCP1205_14 
* ON Semiconductor models developed by Christophe BASSO, Toulouse (FRANCE)
* SOFA model
* VHV PWM Controllers
*
* This model is subject to change without notice.
* Users may not directly or indirectly re-sell or 
* re-distribute this model. This model may not 
* be used, modified, or altered 
* without the consent of ON Semiconductor. 
*
* Revision: 12/01/2000
* This model does not include the OverCurrent protection 
* and the timer associated circuitry
*
* NCP1205_8 corresponds to the NCP1205 DIP8
* NCP1205_14 corresponds to the NCP1205 P14
*
*==========================================================
**********
*SRC=NCP1205_8;NCP1205_8;ON Semiconductor;VHV PWM Controllers;QR operation
*SYM=NCP1205_8
.SUBCKT NCP1205_8 HV Dem FB Ct Gnd Isense Out Vcc
*                 1  2   3  4  5   6      7   8
* Error amplifier ****
.SUBCKT AMPSIMP 1 5 2  {POLE=30 GAIN=30000 VHIGH=4V VLOW=100mV}
*               + - OUT
G1 0 4 1 5 100u
R1 4 0 {GAIN/100U}
C1 4 0 {1/(6.28*(GAIN/100U)*POLE)}
E1 2 0 4 0 1
VLOW 3 0 DC={VLOW}
VHIGH 6 0 DC={VHIGH}
DHIGH 4 6 DCLP
DLOW 3 4 DCLP
.MODEL DCLP D N=0.01
.ENDS
* DRIVER STAGE ****
.SUBCKT DRIVER InDrv Out Vcc
* In Out Vcc Ground
Cboot VccBoot Out 100p
RgU 3 2 150
D1 Vint VccBoot 1N4148
M2 Out 6 0 0 NCHAN
M1 Vcc 2 Out 0 NCHAN
RgLow 6 9 150
D2 0 VccBoot DzBoot
B2 9 0 V=V(InDrv)>800mV ?  0 : V(Vint)
B1 3 0 V=V(InDrv)>800mV ?  V(VccBoot) : 0
Bint Vint 0 V=V(Vcc)>9V ? 9V : V(Vcc)
B3 VccBoot 0 I=I(RgU)> 0 ? I(RgU) : 0
Rdum3 InDrv 0 100k
.ENDS
* Comparator ****
.SUBCKT COMPAR NINV INV OUT
B1 4 0 V = V(NINV,INV) > 0  ?  10  :  100m
RO 4 OUT 100
CO OUT 0 100pF
.ENDS
**** Discrete models ****
.MODEL Dmag D BV=10V CJO=15p IS=7E-09 M=.45 N=2 RS=.8
+ TT=6E-09 VJ=.6V
.MODEL DOVP D BV=35V Cjo=10pF TT=100n Rs=150m
.MODEL 1N4148 D BV=100V CJO=4PF IS=7E-09 M=.45 N=2 RS=.8
+ TT=6E-09 VJ=.6V
.MODEL QN2222 NPN BF=105 BR=4 CJC=12.2P CJE=35.5P IKF=.5
+ IKR=.225 IS=15.2F ISE=8.2P NE=2 NF=1 NR=1 RB=1.49 RC=.149
+ RE=.373 TF=500P TR=85N VAF=98.5 VAR=20 XTB=1.5
.MODEL NCHAN NMOS Level=1 CBD=69.2P CBS=83P CGBO=334N
+ CGDO=30N CGSO=36N GAMMA=2.17U IS=35.4F KP=.27 LAMBDA=1.25M
+ MJ=.46 PB=.8 PHI=.75 RD=1.7 RS=1.1 VTO=2.3
.MODEL DzBoot D BV=16 CJO=2pF IBV=8.3333M IS=1E-9 N=2
+ RS=8.7297 TT=20N
*
.SUBCKT NAND3_0 1 2 3 4
B1 5 0 V= (V(1)>800M) & (V(2)>800M) & (V(3)>800M) ? 100m : 10
R1 5 4 10
C1 4 0 100P IC=100m
.ENDS
*
.SUBCKT NAND3_1 1 2 3 4
B1 5 0 V= (V(1)>1V) & (V(2)>1V) & (V(3)>1V) ? 100m : 10
R1 5 4 12
C1 4 0 100P IC=10
.ENDS
*
.SUBCKT INV 1 2
B1 3 0 V= V(1)>800M ? 100m : 10
R1 3 2 10
C1 2 0 100P IC=10
.ENDS
* D-FFLOP ****
.SUBCKT FFLOP 1   2 11 12 5  6
*             CLK D R  S  QB Q 
X1 7 4 2 8 NAND3_0
X2 8 3 10 9 NAND3_0
X3 1 8 10 7 NAND3_1
X4 4 9 1 10 NAND3_0
X5 4 7 6 5 NAND3_1
X6 5 10 3 6 NAND3_0
X7 11 4 INV
X8 12 3 INV
.ENDS
* 2 input AND ****
.SUBCKT AND2 1 2 3 {VHIGH=10}
B1 4 0 V= (V(1)>800M) & (V(2)>800M) ? {VHIGH} : 0
RD 4 3 100
CD 3 0 100P
.ENDS
* Simple Latch ****
.SUBCKT LATCH 6 8 2 1 {VHIGH=10 VLOW=100m}
*             S R Q Q\
BQB   10 0 V=(V(8)<800M) & (V(2)>800M) ? {VLOW} : {VHIGH}
BQ    20 0 V=(V(6)<800M) & (V(1)>800M) ? {VLOW} : {VHIGH}
RD1   10 1 100
CD1   1 0 100p IC={VHIGH}
RD2   20 2 100
CD2   2 0 100p IC={VLOW}
.ENDS
* 2 Input OR gate ****
.SUBCKT OR2 1 2 3 {VHIGH=10}
B1 4 0 V= (V(1)>800M) | (V(2)>800M) ? {VHIGH} : 0
RD 4 3 100
CD 3 0 100P
.ENDS
* 3 Input, 1 normal 2 bar (2&3) OR gate ****
.SUBCKT OR3B 1 2 3 6 {VHIGH=10}
B1 4 0 V= (V(1)>800M) | (V(2)<3V) | (V(3)<3V)? {VHIGH} : 0
RD 4 6 100
CD 6 0 100P
.ENDS
* Gain Block ****
.SUBCKT GAIN  1  2 {K=???}
*Connections: In Out
*Parameters: K Gain
E1 2 0 1 0 {K}
.ENDS
* Delay line ****
.SUBCKT UTD 1 2 {K=??? TD=???}
*
*Parameters K=GAIN TD=DELAY
RIN 1 0 1E15
E1 3 0 1 0 {K}
T1 3 0 2 0 Z0=1 TD={TD}
R1 2 0 1
.ENDS
* Voltage Controlled Switch *****
.MODEL SDIS SW RON=200 ROFF=1E6 VT=2 VH=1 ; VON = VT+VH = 3 VOFF = VT-VH = 1
*
**** UVLO CIRCUIT ****
** VH = (VON - VOFF)/2
** VT = VOFF + VH
.SUBCKT UVLO  1   2  
*            VIN OUT
S1 1 3 1 0 SUVLO
RUV 3 0 100K
B1 4 0 V= V(3) > 5V ? 5V : 0
RD 4 2 100
CD 2 0 100P
.MODEL SUVLO SW RON=1 ROFF=1E6 VT=11.25 VH=3.75 ; VON = VT+VH = 15.0 VOFF = VT-VH = 7.5V
.ENDS
**** IC Consumption ****
ISUPP Vcc Gnd 1.5mA
**** STARTUP AND UVLO ****
XUVLO Vcc UVLOIn UVLO
BSTRT HV Vcc I=V(UVLOIn)<3.5 ? 3mA : 70U
Ctm1 UVLOIn 52 100p
Rtm1 52 0 4.7k
X17 52 OVPIn UVLO UVLOB LATCH {VHIGH=10 VLOW=100m}
**** OVP Section ****
DOVP 120 Vcc DOVP
ROVP 120 0 18k
XOVP 120 28 OVPIn COMPAR
**** Internal OPAMP ****
X16 28 VG Err2 AMPSIMP {POLE=30 GAIN=3k VHIGH=3V VLOW=10mV}
Vref 28 0 DC=2.5V
R14 VG Err2 150k
CInt Err2 VG 10pF
R19 VG FB 50k
**** Driving section ****
X14 17 44 Drv 0 40 45 FFLOP
BANDdrv 350 0 V=(V(Drv)>800mV) & (V(UVLOIn)>800mV) & 
+ (V(UVLO)>800mV) ? V(Drv) : 0
XDRIVER 350 Out Vcc DRIVER
**** Demag ****
X13 Dem 10  dout COMPAR
X100 dout 17 UTD {K=1 TD=450n}
D5 0 Dem Dmag
B1 10 0 V=V(17) > 3V ? 60mV : 65mV
R16 16 17 4.7k
D4 16 4 1N4148
R3 4 0 47k
R6 4 Dis 4.7k
Q2 13 4 0 QN2222
X4 17 Vfm 21 SET 8 Drv FFLOP
X100 14 52 SET OR2 {VHIGH=10V}
**** 4us Demag Timout ****
Rtimo 13 36 25k
Vtimo 36 0 DC=10
X11 13 37 TimeO COMPAR
V5 37 0 DC=8
Ctimo 13 0 150pF
X12 40 UVLOB Dis OR2 {VHIGH=10V}
**** Current Sense and LEB ****
B4 33 0 V=V(Err2) < 750m ? 750m : V(Err2)
B6 23 0 V=V(Del) > 5V ? V(Isense) : 10m
X10 Drv Del UTD {K=1 TD=250n} ; LEB
X8 33 22 GAIN {K=0.333}
X15 55 21 UTD {K=1 TD=150n} ; CMP Prop delay
XICMP 23 22 55 COMPAR
**** Oscillator/VCO section ****
Ctm2 Drv 400 1nF
Rtm2 400 0 1k
Dtm2 0 400 1N4148
Xtm2 400 400 410 OR2 {VHIGH=10V}; 400ns discharge pulse
X21 57 UVLOIn UVLO SwDis OR3B {VHIGH=10V}
S9 Ct 0 SwDis 0 SDIS
X19 Ct 59 Vfm COMPAR
B3 59 0 V=V(VFM) > 3V ? 500m : 3V
VclpCt 61 0 DC=4.4
D3 Ct 61 1N4148
B5 0 24 I=(V(SwDis) > 3) | (V(UVLOIn) < 800mV) | (V(UVLO) < 800mV)
+ ? 0 : V(Err2) > 1V ? 350u : V(Err2)*350u
X6 410 Vfm 57 AND2 {VHIGH=5V}
X1 Vfm TimeO 14 AND2 {VHIGH=5V}
**** Dummy elements *****
Vdum1 44 0 DC=10
Vdum2 24 Ct
Rdum1 45 0 100k
Rdum2 8 0 100k
.ENDS
**********
*SRC=NCP1205_14;NCP1205_14;ON Semiconductor;VHV PWM Controllers;QR VCO operation w OVP
*SYM=NCP1205_14
.SUBCKT NCP1205_14 HV Dem FB Ct Ovp Gnd Isense Out Vcc
*                  1  3   4  5  6   10      11  12 13
* Error amplifier ****
.SUBCKT AMPSIMP 1 5 2  {POLE=30 GAIN=30000 VHIGH=4V VLOW=100mV}
*               + - OUT
G1 0 4 1 5 100u
R1 4 0 {GAIN/100U}
C1 4 0 {1/(6.28*(GAIN/100U)*POLE)}
E1 2 0 4 0 1
VLOW 3 0 DC={VLOW}
VHIGH 6 0 DC={VHIGH}
DHIGH 4 6 DCLP
DLOW 3 4 DCLP
.MODEL DCLP D N=0.01
.ENDS
* DRIVER STAGE ****
.SUBCKT DRIVER InDrv Out Vcc
* In Out Vcc Ground
Cboot VccBoot Out 100p
RgU 3 2 150
D1 Vint VccBoot 1N4148
M2 Out 6 0 0 NCHAN
M1 Vcc 2 Out 0 NCHAN
RgLow 6 9 150
D2 0 VccBoot DzBoot
B2 9 0 V=V(InDrv)>800mV ?  0 : V(Vint)
B1 3 0 V=V(InDrv)>800mV ?  V(VccBoot) : 0
Bint Vint 0 V=V(Vcc)>9V ? 9V : V(Vcc)
B3 VccBoot 0 I=I(RgU)> 0 ? I(RgU) : 0
Rdum3 InDrv 0 100k
.ENDS
* Comparator ****
.SUBCKT COMPAR NINV INV OUT
B1 4 0 V = V(NINV,INV) > 0  ?  10  :  100m
RO 4 OUT 100
CO OUT 0 100pF
.ENDS
**** Discrete models ****
.MODEL Dmag D BV=10V CJO=15p IS=7E-09 M=.45 N=2 RS=.8
+ TT=6E-09 VJ=.6V
.MODEL DOVP D BV=35V Cjo=10pF TT=100n Rs=150m
.MODEL 1N4148 D BV=100V CJO=4PF IS=7E-09 M=.45 N=2 RS=.8
+ TT=6E-09 VJ=.6V
.MODEL QN2222 NPN BF=105 BR=4 CJC=12.2P CJE=35.5P IKF=.5
+ IKR=.225 IS=15.2F ISE=8.2P NE=2 NF=1 NR=1 RB=1.49 RC=.149
+ RE=.373 TF=500P TR=85N VAF=98.5 VAR=20 XTB=1.5
.MODEL NCHAN NMOS Level=1 CBD=69.2P CBS=83P CGBO=334N
+ CGDO=30N CGSO=36N GAMMA=2.17U IS=35.4F KP=.27 LAMBDA=1.25M
+ MJ=.46 PB=.8 PHI=.75 RD=1.7 RS=1.1 VTO=2.3
.MODEL DzBoot D BV=16 CJO=2pF IBV=8.3333M IS=1E-9 N=2
+ RS=8.7297 TT=20N
*
.SUBCKT NAND3_0 1 2 3 4
B1 5 0 V= (V(1)>800M) & (V(2)>800M) & (V(3)>800M) ? 100m : 10
R1 5 4 10
C1 4 0 100P IC=100m
.ENDS
*
.SUBCKT NAND3_1 1 2 3 4
B1 5 0 V= (V(1)>1V) & (V(2)>1V) & (V(3)>1V) ? 100m : 10
R1 5 4 12
C1 4 0 100P IC=10
.ENDS
*
.SUBCKT INV 1 2
B1 3 0 V= V(1)>800M ? 100m : 10
R1 3 2 10
C1 2 0 100P IC=10
.ENDS
* D-FFLOP ****
.SUBCKT FFLOP 1   2 11 12 5  6
*             CLK D R  S  QB Q 
X1 7 4 2 8 NAND3_0
X2 8 3 10 9 NAND3_0
X3 1 8 10 7 NAND3_1
X4 4 9 1 10 NAND3_0
X5 4 7 6 5 NAND3_1
X6 5 10 3 6 NAND3_0
X7 11 4 INV
X8 12 3 INV
.ENDS
* 2 input AND ****
.SUBCKT AND2 1 2 3 {VHIGH=10}
B1 4 0 V= (V(1)>800M) & (V(2)>800M) ? {VHIGH} : 0
RD 4 3 100
CD 3 0 100P
.ENDS
* Simple Latch ****
.SUBCKT LATCH 6 8 2 1 {VHIGH=10 VLOW=100m}
*             S R Q Q\
BQB   10 0 V=(V(8)<800M) & (V(2)>800M) ? {VLOW} : {VHIGH}
BQ    20 0 V=(V(6)<800M) & (V(1)>800M) ? {VLOW} : {VHIGH}
RD1   10 1 100
CD1   1 0 100p IC={VHIGH}
RD2   20 2 100
CD2   2 0 100p IC={VLOW}
.ENDS
* 2 Input OR gate ****
.SUBCKT OR2 1 2 3 {VHIGH=10}
B1 4 0 V= (V(1)>800M) | (V(2)>800M) ? {VHIGH} : 0
RD 4 3 100
CD 3 0 100P
.ENDS
* 3 Input, 1 normal 2 bar (2&3) OR gate ****
.SUBCKT OR3B 1 2 3 6 {VHIGH=10}
B1 4 0 V= (V(1)>800M) | (V(2)<3V) | (V(3)<3V)? {VHIGH} : 0
RD 4 6 100
CD 6 0 100P
.ENDS
* Gain Block ****
.SUBCKT GAIN  1  2 {K=???}
*Connections: In Out
*Parameters: K Gain
E1 2 0 1 0 {K}
.ENDS
* Delay line ****
.SUBCKT UTD 1 2 {K=??? TD=???}
*
*Parameters K=GAIN TD=DELAY
RIN 1 0 1E15
E1 3 0 1 0 {K}
T1 3 0 2 0 Z0=1 TD={TD}
R1 2 0 1
.ENDS
* Voltage Controlled Switch *****
.MODEL SDIS SW RON=200 ROFF=1E6 VT=2 VH=1 ; VON = VT+VH = 3 VOFF = VT-VH = 1
*
**** UVLO CIRCUIT ****
** VH = (VON - VOFF)/2
** VT = VOFF + VH
.SUBCKT UVLO  1   2  
*            VIN OUT
S1 1 3 1 0 SUVLO
RUV 3 0 100K
B1 4 0 V= V(3) > 5V ? 5V : 0
RD 4 2 100
CD 2 0 100P
.MODEL SUVLO SW RON=1 ROFF=1E6 VT=11.25 VH=3.75 ; VON = VT+VH = 15.0 VOFF = VT-VH = 7.5V
.ENDS
**** IC Consumption ****
ISUPP Vcc Gnd 1.5mA
**** STARTUP AND UVLO ****
XUVLO Vcc UVLOIn UVLO
BSTRT HV Vcc I=V(UVLOIn)<3.5 ? 3mA : 70U
Ctm1 UVLOIn 52 1nF
Rtm1 52 0 4.7k
X17 52 OVPIn UVLO UVLOB LATCH {VHIGH=10 VLOW=100m}
**** OVP Section ****
DOVP 120 Vcc DOVP
ROVP1 120 0 18k
XOVP 120 28 OVPIn COMPAR
ROVP2 Ovp 120 2k ; link to the OVP pad
**** Internal OPAMP ****
X16 28 VG Err2 AMPSIMP {POLE=30 GAIN=3k VHIGH=3V VLOW=10mV}
Vref 28 0 DC=2.5V
R14 VG Err2 150k
CInt Err2 VG 10pF
R19 VG FB 50k
**** Driving section ****
X14 17 44 Drv 0 40 45 FFLOP
BANDdrv 350 0 V=(V(Drv)>800mV) & (V(UVLOIn)>800mV) & 
+ (V(UVLO)>800mV) ? V(Drv) : 0
XDRIVER 350 Out Vcc DRIVER
**** Demag ****
X13 Dem 10 dout COMPAR
X100 dout 17 UTD {K=1 TD=450n}
D5 0 Dem Dmag
B1 10 0 V=V(17) > 3V ? 60mV : 65mV
R16 16 17 4.7k
D4 16 4 1N4148
R3 4 0 47k
R6 4 Dis 4.7k
Q2 13 4 0 QN2222
X4 17 Vfm 21 SET 8 Drv FFLOP
X100 14 52 SET OR2 {VHIGH=10V}
**** 4us Demag Timout ****
Rtimo 13 36 25k
Vtimo 36 0 DC=10
X11 13 37 TimeO COMPAR
V5 37 0 DC=8
Ctimo 13 0 150pF
X12 40 UVLOB Dis OR2 {VHIGH=10V}
**** Current Sense and LEB ****
B4 33 0 V=V(Err2) < 750m ? 750m : V(Err2)
B6 23 0 V=V(Del) > 5V ? V(Isense) : 10m
X10 Drv Del UTD {K=1 TD=250n} ; LEB
X8 33 22 GAIN {K=0.333}
X15 55 21 UTD {K=1 TD=150n} ; CMP Prop delay
XICMP 23 22 55 COMPAR
**** Oscillator/VCO section ****
Ctm2 Drv 400 1nF
Rtm2 400 0 1k
Dtm2 0 400 1N4148
Xtm2 400 400 410 OR2 {VHIGH=10V} ; 400ns discharge pulse
X21 57 UVLOIn UVLO SwDis OR3B {VHIGH=10V}
S9 Ct 0 SwDis 0 SDIS
X19 Ct 59 Vfm COMPAR
B3 59 0 V=V(VFM) > 3V ? 500m : 3V
VclpCt 61 0 DC=4.4
D3 Ct 61 1N4148
B5 0 24 I=(V(SwDis) > 3) | (V(UVLOIn) < 800mV) | (V(UVLO) < 800mV)
+ ? 0 : V(Err2) > 1V ? 350u : V(Err2)*350u
X6 410 Vfm 57 AND2 {VHIGH=5V}
X1 Vfm TimeO 14 AND2 {VHIGH=5V}
**** Dummy elements *****
Vdum1 44 0 DC=10
Vdum2 24 Ct
Rdum1 45 0 100k
Rdum2 8 0 100k
.ENDS
*********
*==========================================================
* MC33501
* ON Semiconductor
* OP-AMP MACRO-MODEL with NMOS INPUT 
*
* This model was developed for ON Semiconductor by:
* AEI Systems, LLC
* 5777 W. Century Blvd. Suite 876
* Los Angeles, California 90045
* Copyright 2002, all rights reserved.
*
* This model is subject to change without notice.
* Users may not directly or indirectly re-sell or 
* re-distribute this model. This model may not 
* be used, modified, or altered 
* without the consent of ON Semiconductor. 
*
* For more information regarding modeling services,
* model libraries and simulation products, please
* call AEi Systems at (310) 863-8034, or contact 
* AEi by email: info@aeng.com. http://www.AENG.com
*
* Revision: REV - 8/17/01 
*==========================================================
*********
*SRC=MC33501;MC33501;ON Semiconductor;OpAmps;1V CMOS
*SYM=MC3350X
*
* Connections:  Inverting input
*               | Non-inverting input
*               | | Output
*               | | |  Positive power supply
*               | | |  |  Negative power supply
*               | | |  |  |
*               | | |  |  |
.SUBCKT MC33501 1 2 18 50 99
*
* CAUTION:  SET .OPTIONS GMIN=1E-16 TO CORRECTLY MODEL INPUT BIAS CURRENT AND CMR
*
* NOTE: - Noise is not modeled.
*       - Temperature is not modeled.
*       - PSR is not modeled.
*
I1 4 99 DC=50U
R3 5 50 1K
R15 22 40 .0001
R4 6 50 1K
I2 50 99 DC=.81M
G0 98 9 6 5 2E-2
R0 98 9 1K
C1 29 98 12.186P
D3 1 50 DINB 
.MODEL DINB D IS=9.6e-13
D1 2 50 DINA 
.MODEL DINA D IS=1.04e-12
D2 99 2 DINC 
.MODEL DINC D IS=1e-12
R11 124 0 10MEG
C4 5 6 6.094P
D4 99 1 DINC 
C6 98 22 3.897U
G8 98 14 0 124 1E-6
G3 98 29 9 98 1E-3
R12 98 29 1K
R8 50 49 3.333K
R9 49 99 3.333K
EN 98 99 49 96 1
GN3 98 14 40 98 1U
RN1 98 14 1MEG
L2 0 37 3.183
ENP 97 0 50 0 1
ENN 0 96 0 99 1
G6 98 40 98 29 11.72
R16 98 40 1K
V4 19 40 DC=.77
D5 19 97 DDEF 
.MODEL DDEF D
V5 40 31 DC=.77
D6 96 31 DDEF 
R13 37 124 1K
M2 6 7 4 99 MOSFET 
.MODEL MOSFET NMOS KP=3.684E-3
M1 5 1 4 99 MOSFET 
VOS 7 2 DC=0.5M
G7 0 124 4 99 10E-9
Q2 48 11 50 QPNPOUT 
.MODEL QPNPOUT PNP NE=1.5 NF=.67
F1 99 11 V25 .01
R32 48 52 31.7
Q1 53 54 99 QNPNOUT 
.MODEL QNPNOUT NPN NF=.597
F2 54 50 V24 .01
R33 52 53 16.7
D19 56 59 DDEF 
D20 58 56 DDEF 
R34 57 58 100
V24 0 60 DC=.63
V25 57 0 DC=.63
R1 59 60 100
F3 56 0 V6 1
V6 52 18 DC=0
R7 14 52 10K
.ENDS 
*********
*==========================================================
* MC33502
* ON Semiconductor
* OP-AMP MACRO-MODEL with NMOS INPUT 
*
* This model was developed for ON Semiconductor by:
* AEI Systems, LLC
* 5777 W. Century Blvd. Suite 876
* Los Angeles, California 90045
* Copyright 2002, all rights reserved.
*
* This model is subject to change without notice.
* Users may not directly or indirectly re-sell or 
* re-distribute this model. This model may not 
* be used, modified, or altered 
* without the consent of ON Semiconductor. 
*
* For more information regarding modeling services,
* model libraries and simulation products, please
* call AEi Systems at (310) 863-8034, or contact 
* AEi by email: info@aeng.com. http://www.AENG.com
*
* Revision: REV - 8/17/01 
*==========================================================
*********
*SRC=MC33502;MC33502;ON Semiconductor;OpAmps;1V CMOS
*SYM=MC3350X
*
* Connections:  Inverting input
*               | Non-inverting input
*               | | Output
*               | | |  Positive power supply
*               | | |  |  Negative power supply
*               | | |  |  |
*               | | |  |  |
.SUBCKT MC33502 1 2 18 50 99
*
* CAUTION:  SET .OPTIONS GMIN=1E-16 TO CORRECTLY MODEL INPUT BIAS CURRENT AND CMR
*
* NOTE: - Noise is not modeled.
*       - Temperature is not modeled.
*       - PSR is not modeled.
*       - Model is for single device only.  Simulated supply current is 1/2 of
*         total package current.
*
I1 4 99 DC=50U
R3 5 50 1K
R15 22 40 .0001
R4 6 50 1K
I2 50 99 DC=.81M
G0 98 9 6 5 2E-2
R0 98 9 1K
C1 29 98 12.186P
D3 1 50 DINB 
.MODEL DINB D IS=9.6e-13
D1 2 50 DINA 
.MODEL DINA D IS=1.04e-12
D2 99 2 DINC 
.MODEL DINC D IS=1e-12
R11 124 0 10MEG
C4 5 6 6.094P
D4 99 1 DINC 
C6 98 22 3.897U
G8 98 14 0 124 1E-6
G3 98 29 9 98 1E-3
R12 98 29 1K
R8 50 49 3.333K
R9 49 99 3.333K
EN 98 99 49 96 1
GN3 98 14 40 98 1U
RN1 98 14 1MEG
L2 0 37 3.183
ENP 97 0 50 0 1
ENN 0 96 0 99 1
G6 98 40 98 29 11.72
R16 98 40 1K
V4 19 40 DC=.77
D5 19 97 DDEF 
.MODEL DDEF D
V5 40 31 DC=.77
D6 96 31 DDEF 
R13 37 124 1K
M2 6 7 4 99 MOSFET 
.MODEL MOSFET NMOS KP=3.684E-3
M1 5 1 4 99 MOSFET 
VOS 7 2 DC=0.5M
G7 0 124 4 99 10E-9
Q2 48 11 50 QPNPOUT 
.MODEL QPNPOUT PNP NE=1.5 NF=.67
F1 99 11 V25 .01
R32 48 52 31.7
Q1 53 54 99 QNPNOUT 
.MODEL QNPNOUT NPN NF=.597
F2 54 50 V24 .01
R33 52 53 16.7
D19 56 59 DDEF 
D20 58 56 DDEF 
R34 57 58 100
V24 0 60 DC=.63
V25 57 0 DC=.63
R1 59 60 100
F3 56 0 V6 1
V6 52 18 DC=0
R7 14 52 10K
.ENDS 
*********
*==========================================================
* MC33503
* ON Semiconductor
* OP-AMP MACRO-MODEL with NMOS INPUT 
*
* This model was developed for ON Semiconductor by:
* AEI Systems, LLC
* 5777 W. Century Blvd. Suite 876
* Los Angeles, California 90045
* Copyright 2002, all rights reserved.
*
* This model is subject to change without notice.
* Users may not directly or indirectly re-sell or 
* re-distribute this model. This model may not 
* be used, modified, or altered 
* without the consent of ON Semiconductor. 
*
* For more information regarding modeling services,
* model libraries and simulation products, please
* call AEi Systems at (310) 863-8034, or contact 
* AEi by email: info@aeng.com. http://www.AENG.com
*
* Revision: REV - 8/17/01 
*==========================================================
************
*SRC=MC33503;MC33503;ON Semiconductor;OpAmps;1V CMOS
*SYM=MC3350X
*
* Connections:  Inverting input
*               | Non-inverting input
*               | | Output
*               | | |  Positive power supply
*               | | |  |  Negative power supply
*               | | |  |  |
*               | | |  |  |
.SUBCKT MC33503 1 2 18 50 99
*
* CAUTION:  SET .OPTIONS GMIN=1E-16 TO CORRECTLY MODEL INPUT BIAS CURRENT AND CMR
*
* NOTE: - Noise is not modeled.
*       - Temperature is not modeled.
*       - PSR is not modeled.
*
I1 4 99 DC=50U
R3 5 50 1K
R15 22 40 .0001
R4 6 50 1K
I2 50 99 DC=.81M
G0 98 9 6 5 2E-2
R0 98 9 1K
C1 29 98 12.186P
D3 1 50 DINB 
.MODEL DINB D IS=9.6e-13
D1 2 50 DINA 
.MODEL DINA D IS=1.04e-12
D2 99 2 DINC 
.MODEL DINC D IS=1e-12
R11 124 0 10MEG
C4 5 6 6.094P
D4 99 1 DINC 
C6 98 22 3.897U
G8 98 14 0 124 1E-6
G3 98 29 9 98 1E-3
R12 98 29 1K
R8 50 49 3.333K
R9 49 99 3.333K
EN 98 99 49 96 1
GN3 98 14 40 98 1U
RN1 98 14 1MEG
L2 0 37 3.183
ENP 97 0 50 0 1
ENN 0 96 0 99 1
G6 98 40 98 29 11.72
R16 98 40 1K
V4 19 40 DC=.77
D5 19 97 DDEF 
.MODEL DDEF D
V5 40 31 DC=.77
D6 96 31 DDEF 
R13 37 124 1K
M2 6 7 4 99 MOSFET 
.MODEL MOSFET NMOS KP=3.684E-3
M1 5 1 4 99 MOSFET 
VOS 7 2 DC=0.5M
G7 0 124 4 99 10E-9
Q2 48 11 50 QPNPOUT 
.MODEL QPNPOUT PNP NE=1.5 NF=.67
F1 99 11 V25 .01
R32 48 52 31.7
Q1 53 54 99 QNPNOUT 
.MODEL QNPNOUT NPN NF=.597
F2 54 50 V24 .01
R33 52 53 16.7
D19 56 59 DDEF 
D20 58 56 DDEF 
R34 57 58 100
V24 0 60 DC=.63
V25 57 0 DC=.63
R1 59 60 100
F3 56 0 V6 1
V6 52 18 DC=0
R7 14 52 10K
.ENDS 
*********
*==========================================================
* TLV431
* ON Semiconductor
* 1.2V Reference
*
* This model was developed for ON Semiconductor by:
* AEI Systems, LLC
* 5777 W. Century Blvd. Suite 876
* Los Angeles, California 90045
* Copyright 2002, all rights reserved.
*
* This model is subject to change without notice.
* Users may not directly or indirectly re-sell or 
* re-distribute this model. This model may not 
* be used, modified, or altered 
* without the consent of ON Semiconductor. 
*
* For more information regarding modeling services,
* model libraries and simulation products, please
* call AEi Systems at (310) 863-8034, or contact 
* AEi by email: info@aeng.com. http://www.AENG.com
*
* Revision: 2.0 
*==========================================================
********
*SRC=TLV431_ON;TLV431_ON;ON Semiconductor;Voltage Reference;CMOS 1.2V ref.
*SYM=TLV431
.SUBCKT TLV431_ON 7 6 11
*             K A FDBK
.MODEL DCLAMP D (IS=13.5N RS=25M N=1.59 
+ CJO=45P VJ=.75 M=.302 TT=50.4N BV=36V IBV=1MA)
.MODEL DCL2 D RS=660K
V1 1 6 1.24
R1 6 2 15.6
C1 2 6 .5U
R2 2 3 100
C2 3 4 1.3n
R3 4 6 8
G2 6 8 3 6 .86
D1 5 8 DCLAMP
D2 7 8 DCLAMP
D4 6 8 DCLAMP
V4 5 6 1.2
G1 6 2 1 11 0.11
VCLAMP 9 6 14.5
D3  7 9 DCL2
.ENDS
*********
*==========================================================
* TL431
* ON Semiconductor
* Three-Terminal Programmable shunt Regulator Diode
*
* This model was developed for ON Semiconductor by:
* AEI Systems, LLC
* 5777 W. Century Blvd. Suite 876
* Los Angeles, California 90045
* Copyright 2002, all rights reserved.
*
* This model is subject to change without notice.
* Users may not directly or indirectly re-sell or 
* re-distribute this model. This model may not 
* be used, modified, or altered 
* without the consent of ON Semiconductor. 
*
* For more information regarding modeling services,
* model libraries and simulation products, please
* call AEi Systems at (310) 863-8034, or contact 
* AEi by email: info@aeng.com. http://www.AENG.com
*
* Revision: B
*==========================================================
**********
*SRC=TL431_ON;TL431_ON;ON Semiconductor;Voltage Reference;Bip. 2.5V ref.
*SYM=TL431
.SUBCKT TL431_ON 7 6 11
*             K A FDBK
.MODEL DCLAMP D (IS=13.5N RS=25M N=1.59 
+ CJO=45P VJ=.75 M=.302 TT=50.4N BV=34V IBV=1MA)
*V1 1 6 2.495 ; used for fixed reference, replaced with B1 Limiter
B1 1 6 V=V(7,6) > 2.495 ? 2.495 : V(7,6)
R1 6 2 15.6
C1 2 6 .5U
R2 2 3 100
C2 3 4 .08U
R3 4 6 10
G2 6 8 3 6 1.73
D1 5 8 DCLAMP
D2 7 8 DCLAMP
V4 5 6 2
G1 6 2 1 11 0.11
.ENDS
**********
*==========================================================
* MC33161
* ON Semiconductor
* Universal Supervisor
*
* This model was developed for ON Semiconductor by:
* AEI Systems, LLC
* 5777 W. Century Blvd. Suite 876
* Los Angeles, California 90045
* Copyright 2002, all rights reserved.
*
* This model is subject to change without notice.
* Users may not directly or indirectly re-sell or 
* re-distribute this model. This model may not 
* be used, modified, or altered 
* without the consent of ON Semiconductor. 
*
* For more information regarding modeling services,
* model libraries and simulation products, please
* call AEi Systems at (310) 863-8034, or contact 
* AEi by email: info@aeng.com. http://www.AENG.com
*
* Revision: 1.0
*==========================================================
***********
*SRC=MC33161;MC33161;ON Semiconductor;Supervisors;Universal
*SYM=MC33161
.SUBCKT MC33161 23   5   24  7   22   15   1    3
*               VREF IN1 IN2 GND OUT2 OUT1 MODE VCC
.MODEL COMP SW (VT=1.27 VH=0.025 RON=1K ROFF=10MEG)
.MODEL DMOD D (IS=1E-16)
.MODEL QN1 NPN (BF=200 RC=8.5)
.MODEL QN2 NPN (BF=50)
.MODEL M1 NMOS VTO=2.3 KP=100
R1 2 3 1MEG
BCOND 4 7 V=V(2) > 2.5 ? 5 : 0
R3 9 7 250K
V3 11 10 2
R4 10 6 12K
I1 6 7 24U
D2 7 6 DMOD
D5 1 9 DMOD
D6 9 11 DMOD
BCOMP1 12 7 V=2.8 > V(1) ? 5 : 0
BXOR1 13 7 V=ABS(V(12,4)) < 2.5 ? 0 : 5
R5 26 13 44K
Q1 15 26 7 QN1
S2 17 7 24 7 COMP
R8 17 3 1MEG
B2 16 7 V=V(17) > 2.5 ? 5 : 0
BCOM2B 20 7 V=0.6 > V(1) ? 5 : 0
B4 19 7 V=ABS(V(20,16)) < 2.5 ? 0 : 5
R9 18 19 44K
Q3 22 18 7 QN1
Q4 3 21 25 QN2
R12 3 21 25K
R13 25 23 0.3
R15 23 27 10K
R16 27 7 100K
M1 21 27 7 7 M1
S1 2 7 5 7 COMP
.ENDS
*************
*==========================================================
* MC33201
* ON Semiconductor
* OP-AMP MACRO-MODEL with NPN/PNP INPUT
*
* This model was developed for ON Semiconductor by:
* AEI Systems, LLC
* 5777 W. Century Blvd. Suite 876
* Los Angeles, California 90045
* Copyright 2002, all rights reserved.
*
* This model is subject to change without notice.
* Users may not directly or indirectly re-sell or 
* re-distribute this model. This model may not 
* be used, modified, or altered 
* without the consent of ON Semiconductor. 
*
* For more information regarding modeling services,
* model libraries and simulation products, please
* call AEi Systems at (310) 863-8034, or contact 
* AEi by email: info@aeng.com. http://www.AENG.com
*
* Revision: REV - 10/5/01 
*==========================================================
**********
*SRC=MC33201;MC33201;ON Semiconductor;OpAmps;General purp.
*SYM=MC3350X
* Connections:  Inverting input
*               | Non-inverting input
*               | | Output
*               | | |  Positive power supply
*               | | |  |  Negative power supply
*               | | |  |  |
*               | | |  |  |
.SUBCKT MC33201 1 2 18 50 99
*
* NOTE: - Noise is not modeled.
*       - Temperature is not modeled.
*       - PSR is not modeled.
*
I1 4 99 DC=62.66U
R3 5 50 1K
R15 22 40 1K
G4 56 0 14 120 1.364E-2
R4 6 50 1K
I2 50 99 DC=.604M
G0 98 9 6 5 2E-2
R0 98 9 1K
C8 53 129 80P
C7 15 48 80P
D3 1 50 DDEF 
.MODEL DDEF D
D1 2 50 DDEF 
D2 99 2 DDEF 
R11 30 0 10MEG
I3 50 24 DC=45U
C5 8 23 5.88P
C4 5 6 5.88P
R5 8 99 1K
D4 99 1 DDEF 
C6 98 22 60N
G8 98 14 0 30 1E-6
R6 23 99 1K
G2 98 9 23 8 2E-2
V1 25 99 DC=5.3
V2 50 26 DC=4.6
IOS 2 1 DC=2.5N
D8 2 1 DDEF 
D7 1 2 DDEF 
EN 98 99 50 99 .5
D10 24 26 DBIAS 
.MODEL DBIAS D N=10
D9 25 4 DBIAS 
GN3 98 14 40 98 1U
RN1 98 14 1MEG
Q3 5 1 4 QNPNIN 
.MODEL QNPNIN NPN VAF=100
Q4 6 7 4 QNPNIN 
Q6 8 1 24 QPNPDEF 
.MODEL QPNPDEF PNP
Q5 23 7 24 QPNPDEF 
L2 0 37 10
E1 120 98 18 98 .1
R19 0 0 1K
F2 11 99 V10 1
R17 127 15 14.7K
G6 98 40 98 9 .6M
R16 98 40 1.92MEG
V4 19 98 DC=5.23
D5 40 19 DDEF 
V5 98 121 DC=5.23
D6 121 40 DDEF 
R13 37 30 700
F4 50 54 V13 1
V10 50 127 DC=0
V13 20 99 DC=0
R18 129 20 14.7K
VOS 7 2 DC=2M
G7 0 30 4 99 10E-9
Q2 48 11 50 QPNPOUT1 
.MODEL QPNPOUT1 PNP NF=1.026
F1 50 15 V25 .01
R32 48 18 7.5
Q1 53 54 99 QNPNOUT1 
.MODEL QNPNOUT1 NPN NF=1.026
F3 129 99 V24 .01
R33 18 53 7.5
D19 56 59 DDEF 
D20 58 56 DDEF 
R34 57 58 100
V24 0 60 DC=.63
V25 57 0 DC=.63
R1 59 60 100
R7 0 18 1MEG
.ENDS
*********
*==========================================================
* MC33202
* ON Semiconductor
* OP-AMP MACRO-MODEL with NPN/PNP INPUT
*
* This model was developed for ON Semiconductor by:
* AEI Systems, LLC
* 5777 W. Century Blvd. Suite 876
* Los Angeles, California 90045
* Copyright 2002, all rights reserved.
*
* This model is subject to change without notice.
* Users may not directly or indirectly re-sell or 
* re-distribute this model. This model may not 
* be used, modified, or altered 
* without the consent of ON Semiconductor. 
*
* For more information regarding modeling services,
* model libraries and simulation products, please
* call AEi Systems at (310) 863-8034, or contact 
* AEi by email: info@aeng.com. http://www.AENG.com
*
* Revision: REV - 10/8/01 
*==========================================================
************
*SRC=MC33202;MC33202;ON Semiconductor;OpAmps;General purp.
*SYM=MC3350X
* Connections:  Inverting input
*               | Non-inverting input
*               | | Output
*               | | |  Positive power supply
*               | | |  |  Negative power supply
*               | | |  |  |
*               | | |  |  |
.SUBCKT MC33202 1 2 18 50 99
*
* NOTE: - Noise is not modeled.
*       - Temperature is not modeled.
*       - PSR is not modeled.
*       - Single amplifier is modeled for dual pkg.
*       - Supply current is 1/2 of total pkg current.
*
I1 4 99 DC=62.66U
R3 5 50 1K
R15 22 40 1K
G4 56 0 14 120 1.364E-2
R4 6 50 1K
I2 50 99 DC=.604M
G0 98 9 6 5 2E-2
R0 98 9 1K
C8 53 129 80P
C7 15 48 80P
D3 1 50 DDEF 
.MODEL DDEF D
D1 2 50 DDEF 
D2 99 2 DDEF 
R11 30 0 10MEG
I3 50 24 DC=45U
C5 8 23 5.88P
C4 5 6 5.88P
R5 8 99 1K
D4 99 1 DDEF 
C6 98 22 60N
G8 98 14 0 30 1E-6
R6 23 99 1K
G2 98 9 23 8 2E-2
V1 25 99 DC=5.3
V2 50 26 DC=4.6
IOS 2 1 DC=2.5N
D8 2 1 DDEF 
D7 1 2 DDEF 
EN 98 99 50 99 .5
D10 24 26 DBIAS 
.MODEL DBIAS D N=10
D9 25 4 DBIAS 
GN3 98 14 40 98 1U
RN1 98 14 1MEG
Q3 5 1 4 QNPNIN 
.MODEL QNPNIN NPN VAF=100
Q4 6 7 4 QNPNIN 
Q6 8 1 24 QPNPDEF 
.MODEL QPNPDEF PNP
Q5 23 7 24 QPNPDEF 
L2 0 37 10
E1 120 98 18 98 .1
R19 0 0 1K
F2 11 99 V10 1
R17 127 15 14.7K
G6 98 40 98 9 .6M
R16 98 40 1.92MEG
V4 19 98 DC=5.23
D5 40 19 DDEF 
V5 98 121 DC=5.23
D6 121 40 DDEF 
R13 37 30 700
F4 50 54 V13 1
V10 50 127 DC=0
V13 20 99 DC=0
R18 129 20 14.7K
VOS 7 2 DC=2M
G7 0 30 4 99 10E-9
Q2 48 11 50 QPNPOUT1 
.MODEL QPNPOUT1 PNP NF=1.026
F1 50 15 V25 .01
R32 48 18 7.5
Q1 53 54 99 QNPNOUT1 
.MODEL QNPNOUT1 NPN NF=1.026
F3 129 99 V24 .01
R33 18 53 7.5
D19 56 59 DDEF 
D20 58 56 DDEF 
R34 57 58 100
V24 0 60 DC=.63
V25 57 0 DC=.63
R1 59 60 100
R7 0 18 1MEG
.ENDS
*********
*==========================================================
* MC33204
* ON Semiconductor
* OP-AMP MACRO-MODEL with NPN/PNP INPUT
*
* This model was developed for ON Semiconductor by:
* AEI Systems, LLC
* 5777 W. Century Blvd. Suite 876
* Los Angeles, California 90045
* Copyright 2002, all rights reserved.
*
* This model is subject to change without notice.
* Users may not directly or indirectly re-sell or 
* re-distribute this model. This model may not 
* be used, modified, or altered 
* without the consent of ON Semiconductor. 
*
* For more information regarding modeling services,
* model libraries and simulation products, please
* call AEi Systems at (310) 863-8034, or contact 
* AEi by email: info@aeng.com. http://www.AENG.com
*
* Revision: REV - 10/8/01 
*==========================================================
***********
*SRC=MC33204;MC33204;ON Semiconductor;OpAmps;General Purp.
*SYM=MC3350X
* Connections:  Inverting input
*               | Non-inverting input
*               | | Output
*               | | |  Positive power supply
*               | | |  |  Negative power supply
*               | | |  |  |
*               | | |  |  |
.SUBCKT MC33204 1 2 18 50 99
*
* NOTE: - Noise is not modeled.
*       - Temperature is not modeled.
*       - PSR is not modeled.
*       - Single amplifier is modeled for quad pkg.
*       - Supply current is 1/4 of total pkg current.
*
I1 4 99 DC=62.66U
R3 5 50 1K
R15 22 40 1K
G4 56 0 14 120 1.364E-2
R4 6 50 1K
I2 50 99 DC=.604M
G0 98 9 6 5 2E-2
R0 98 9 1K
C8 53 129 80P
C7 15 48 80P
D3 1 50 DDEF 
.MODEL DDEF D
D1 2 50 DDEF 
D2 99 2 DDEF 
R11 30 0 10MEG
I3 50 24 DC=45U
C5 8 23 5.88P
C4 5 6 5.88P
R5 8 99 1K
D4 99 1 DDEF 
C6 98 22 60N
G8 98 14 0 30 1E-6
R6 23 99 1K
G2 98 9 23 8 2E-2
V1 25 99 DC=5.3
V2 50 26 DC=4.6
IOS 2 1 DC=2.5N
D8 2 1 DDEF 
D7 1 2 DDEF 
EN 98 99 50 99 .5
D10 24 26 DBIAS 
.MODEL DBIAS D N=10
D9 25 4 DBIAS 
GN3 98 14 40 98 1U
RN1 98 14 1MEG
Q3 5 1 4 QNPNIN 
.MODEL QNPNIN NPN VAF=100
Q4 6 7 4 QNPNIN 
Q6 8 1 24 QPNPDEF 
.MODEL QPNPDEF PNP
Q5 23 7 24 QPNPDEF 
L2 0 37 10
E1 120 98 18 98 .1
R19 0 0 1K
F2 11 99 V10 1
R17 127 15 14.7K
G6 98 40 98 9 .6M
R16 98 40 1.92MEG
V4 19 98 DC=5.23
D5 40 19 DDEF 
V5 98 121 DC=5.23
D6 121 40 DDEF 
R13 37 30 700
F4 50 54 V13 1
V10 50 127 DC=0
V13 20 99 DC=0
R18 129 20 14.7K
VOS 7 2 DC=2M
G7 0 30 4 99 10E-9
Q2 48 11 50 QPNPOUT1 
.MODEL QPNPOUT1 PNP NF=1.026
F1 50 15 V25 .01
R32 48 18 7.5
Q1 53 54 99 QNPNOUT1 
.MODEL QNPNOUT1 NPN NF=1.026
F3 129 99 V24 .01
R33 18 53 7.5
D19 56 59 DDEF 
D20 58 56 DDEF 
R34 57 58 100
V24 0 60 DC=.63
V25 57 0 DC=.63
R1 59 60 100
R7 0 18 1MEG
.ENDS
*********
*==========================================================
* LM324
* ON Semiconductor
* OP-AMP MACRO-MODEL
*
* This model is subject to change without notice.
* Users may not directly or indirectly re-sell or 
* re-distribute this model. This model may not 
* be used, modified, or altered 
* without the consent of ON Semiconductor. 
*
* Revision: 1.0
*==========================================================
*********
*SRC=LM324;LM324;ON Semiconductor;OpAmps;General Purp.
*SYM=LM3XX
*
* LM324 OPERATIONAL AMPLIFIER 
*"MACROMODEL" SUBCIRCUIT
*
* CONNECTIONS:
*	1 -	NON-INVERTING INPUT
*	2 -	INVERTING INPUT
*	3 -	POSITIVE POWER SUPPLY
*	4 -	NEGATIVE POWER SUPPLY
*	5 -	OUTPUT
*
.SUBCKT LM324  1 2 3 4 5
*
C1   11 12 3.000E-12
C2    6  7 6.000E-12
CEE  10 99 315.8E-15
DC    5 53 DX
DE   54  5 DX
DLP  90 91 DX
DLN  92 90 DX
DP    4  3 DX
EGND 99  0 POLY(2) (3,0) (4,0) 0 .5 .5
FB    7 99 POLY(5) VB VC VE VLP VLN 0 53.05E6 
+ -50E6 50E6 50E6 -50E6
GA    6  0 11 12 37.70E-6
GCM   0  6 10 99 11.92E-9
IEE   3 10 DC 2.476E-6
HLIM 90  0 VLIM 1K
Q1   11  2 13 QX
Q2   12  1 14 QX
R2    6  9 100.0E3
RC1   4 11 26.53E3
RC2   4 12 26.53E3
RE1  13 10 4.820E3
RE2  14 10 4.820E3
REE  10 99 80.78E6
RO1   8  5 50
RO2   7 99 50
RP    3  4 34.71E3
VB    9  0 DC 0
VC    3 53 DC 2
VE   54  4 DC 5.000E-3
VLIM  7  8 DC 0
VLP  91  0 DC 40
VLN   0 92 DC 40
.MODEL DX D(IS=800.0E-18)
.MODEL QX PNP(IS=800.0E-18 BF=31.58)
.ENDS
************* 
*==========================================================
* LM358
* ON Semiconductor
* OP-AMP MACRO-MODEL
*
* This model is subject to change without notice.
* Users may not directly or indirectly re-sell or 
* re-distribute this model. This model may not 
* be used, modified, or altered 
* without the consent of ON Semiconductor. 
*
* Revision: 1.0
*==========================================================
********
*SRC=LM358;LM358;ON Semiconductor;OpAmps;General Purp.
*SYM=LM3XX
*
* LM358 OPERATIONAL AMPLIFIER
* "MACROMODEL" SUBCIRCUIT
*
* CONNECTIONS:
*	1 -	NON-INVERTING INPUT
*	2 -	INVERTING INPUT
*	3 -	POSITIVE POWER SUPPLY
*	4 -	NEGATIVE POWER SUPPLY
*	5 -	OUTPUT
*
.SUBCKT LM358 1 2 3 4 5
*
C1   11 12 3.000E-12
C2    6  7 6.000E-12
CEE  10 99 388.6E-15
DC    5 53 DX
DE   54  5 DX
DLP  90 91 DX
DLN  92 90 DX
DP    4  3 DX
EGND 99  0 POLY(2) (3,0) (4,0) 0 .5 .5
FB    7 99 POLY(5) VB VC VE VLP VLN 0 48.23E6 
+ -50E6 50E6 50E6 -50E6
GA    6  0 11 12 41.47E-6
GCM   0  6 10 99 414.7E-12
IEE   3 10 DC 2.543E-6
HLIM 90  0 VLIM 1K
Q1   11  2 13 QX
Q2   12  1 14 QX
R2    6  9 100.0E3
RC1   4 11 24.11E3
RC2   4 12 24.11E3
RE1  13 10 3.043E3
RE2  14 10 3.043E3
REE  10 99 78.65E6
RO1   8  5 50
RO2   7 99 25
RP    3  4 37.62E3
VB    9  0 DC 0
VC    3 53 DC 1.800
VE   54  4 DC .88
VLIM  7  8 DC 0
VLP  91  0 DC 40
VLN   0 92 DC 40
DESD1  1  3 DX
DESD2  2  3 DX
.MODEL DX D(IS=800.0E-18)
.MODEL QX PNP(IS=800.0E-18 BF=32.03)
.ENDS
***********
*==========================================================
* LM833
* ON Semiconductor
* OP-AMP MACRO-MODEL
*
* This model is subject to change without notice.
* Users may not directly or indirectly re-sell or 
* re-distribute this model. This model may not 
* be used, modified, or altered 
* without the consent of ON Semiconductor. 
*
* Revision: 1.0
*==========================================================
**********
*SRC=LM833;LM833;ON Semiconductor;OpAmps;General Purp.
*SYM=LM3XX
*
* LM833 OPERATIONAL AMPLIFIER 
*"MACROMODEL" SUBCIRCUIT
*
* CONNECTIONS:
*	1 -	NON-INVERTING INPUT
*	2 -	INVERTING INPUT
*	3 -	POSITIVE POWER SUPPLY
*	4 -	NEGATIVE POWER SUPPLY
*	5 -	OUTPUT
*
.SUBCKT LM833 1 2 3 4 5
*
C1   11 12 3.501E-12
C2    6  7 10.00E-12
DC    5 53 DX
DE   54  5 DX
DLP  90 91 DX
DLN  92 90 DX
DP    4  3 DX
EGND 99  0 POLY(2) (3,0) (4,0) 0 .5 .5
FB    7 99 POLY(5) VB VC VE VLP VLN 0 27.96E6 
+ -30E6 30E6 30E6 -30E6
GA    6  0 11 12 565.5E-6
GCM   0  6 10 99 5.655E-9
ISS  10  4 DC 70.00E-6
HLIM 90  0 VLIM 1K
J1   11  2 10 JX
J2   12  1 10 JX
R2    6  9 100.0E3
RD1   3 11 1.768E3
RD2   3 12 1.768E3
RO1   8  5 10
RO2   7 99 20
RP    3  4 29.03E3
RSS  10 99 2.857E6
VB    9  0 DC 0
VC    3 53 DC .9
VE   54  4 DC .4
VLIM  7  8 DC 0
VLP  91  0 DC 30
VLN   0 92 DC 30
.MODEL DX D(IS=800.0E-18)
.MODEL JX NJF(IS=150.0E-9 BETA=4.568E-3 
+ VTO=-1)
.ENDS
***********
*==========================================================
* LM2902
* ON Semiconductor
* OP-AMP MACRO-MODEL
*
* This model is subject to change without notice.
* Users may not directly or indirectly re-sell or 
* re-distribute this model. This model may not 
* be used, modified, or altered 
* without the consent of ON Semiconductor. 
*
* Revision: 1.0
*==========================================================
*********
*SRC=LM2902;LM2902;ON Semiconductor;OpAmps;General Purp.
*SYM=LM3XX
*
* LM2902 OPERATIONAL AMPLIFIER 
*"MACROMODEL" SUBCIRCUIT
*
* CONNECTIONS:
*	1 -	NON-INVERTING INPUT
*	2 -	INVERTING INPUT
*	3 -	POSITIVE POWER SUPPLY
*	4 -	NEGATIVE POWER SUPPLY
*	5 -	OUTPUT
*
.SUBCKT LM2902 1 2 3 4 5
*
C1   11 12 2.000E-12
C2    6  7 6.000E-12
CEE  10 99 388.6E-15
DC    5 53 DX
DE   54  5 DX
DLP  90 91 DX
DLN  92 90 DX
DP    4  3 DX
EGND 99  0 POLY(2) (3,0) (4,0) 0 .5 .5
FB    7 99 POLY(5) VB VC VE VLP VLN 0 48.23E6 
+ -50E6 50E6 50E6 -50E6
GA    6  0 11 12 41.47E-6
GCM   0  6 10 99 414.7E-12
IEE   3 10 DC 2.543E-6
HLIM 90  0 VLIM 1K
Q1   11  2 13 QX
Q2   12  1 14 QX
R2    6  9 100.0E3
RC1   4 11 24.11E3
RC2   4 12 24.11E3
RE1  13 10 3.043E3
RE2  14 10 3.043E3
REE  10 99 78.65E6
RO1   8  5 50
RO2   7 99 25
RP    3  4 37.62E3
VB    9  0 DC 0
VC    3 53 DC 1.800
VE   54  4 DC .88
VLIM  7  8 DC 0
VLP  91  0 DC 40
VLN   0 92 DC 40
.MODEL DX D(IS=800.0E-18)
.MODEL QX PNP(IS=800.0E-18 BF=32.03)
.ENDS
***********
*==========================================================
* LM2904
* ON Semiconductor
* OP-AMP MACRO-MODEL
*
* This model is subject to change without notice.
* Users may not directly or indirectly re-sell or 
* re-distribute this model. This model may not 
* be used, modified, or altered 
* without the consent of ON Semiconductor. 
*
* Revision: 1.0
*==========================================================
*******
*SRC=LM2904;LM2904;ON Semiconductor;OpAmps;General Purp.
*SYM=LM3XX
*
* LM2904 OPERATIONAL AMPLIFIER 
*"MACROMODEL" SUBCIRCUIT
*
* CONNECTIONS:
*	1 -	NON-INVERTING INPUT
*	2 -	INVERTING INPUT
*	3 -	POSITIVE POWER SUPPLY
*	4 -	NEGATIVE POWER SUPPLY
*	5 -	OUTPUT
*
.SUBCKT LM2904 1 2 3 4 5
*
C1   11 12 3.000E-12
C2    6  7 6.000E-12
CEE  10 99 388.6E-15
DC    5 53 DX
DE   54  5 DX
DLP  90 91 DX
DLN  92 90 DX
DP    4  3 DX
EGND 99  0 POLY(2) (3,0) (4,0) 0 .5 .5
FB    7 99 POLY(5) VB VC VE VLP VLN 0 48.23E6 
+ -50E6 50E6 50E6 -50E6
GA    6  0 11 12 41.47E-6
GCM   0  6 10 99 414.7E-12
IEE   3 10 DC 2.543E-6
HLIM 90  0 VLIM 1K
Q1   11  2 13 QX
Q2   12  1 14 QX
R2    6  9 100.0E3
RC1   4 11 24.11E3
RC2   4 12 24.11E3
RE1  13 10 3.043E3
RE2  14 10 3.043E3
REE  10 99 78.65E6
RO1   8  5 50
RO2   7 99 25
RP    3  4 37.62E3
VB    9  0 DC 0
VC    3 53 DC 1.800
VE   54  4 DC .88
VLIM  7  8 DC 0
VLP  91  0 DC 40
VLN   0 92 DC 40
DESD1  1  3 DX
DESD2  2  3 DX
.MODEL DX D(IS=800.0E-18)
.MODEL QX PNP(IS=800.0E-18 BF=32.03)
.ENDS
***********
*==========================================================
* MC3403
* ON Semiconductor
* OP-AMP MACRO-MODEL
*
* This model is subject to change without notice.
* Users may not directly or indirectly re-sell or 
* re-distribute this model. This model may not 
* be used, modified, or altered 
* without the consent of ON Semiconductor. 
*
* Revision: 1.0
*==========================================================
*********
*SRC=MC3403;MC3403;ON Semiconductor;OpAmps;General Purp.
*SYM=LM3XX
*
*MC3403 OPERATIONAL AMPLIFIER *"MACROMODEL" SUBCIRCUIT
*
* CONNECTIONS:
*	1 -	NON-INVERTING INPUT
*	2 -	INVERTING INPUT
*	3 -	POSITIVE POWER SUPPLY
*	4 -	NEGATIVE POWER SUPPLY
*	5 -	OUTPUT
*
.SUBCKT MC3403 1 2 3 4 5
*
C1   11 12 5.750E-12
C2    6  7 12.50E-12
DC    5 53 DX
DE   54  5 DX
DLP  90 91 DX
DLN  92 90 DX
DP    4  3 DX
EGND 99  0 POLY(2) (3,0) (4,0) 0 .5 .5
FB    7 99 POLY(5) VB VC VE VLP VLN 0 45.39E6
+ -50E6 50E6 50E6 -50E6
GA    6  0 11 12 117.5E-6
GCM   0  6 10 99 3.716E-9
IEE   3 10 DC 7.000E-6
HLIM 90  0 VLIM 1K
Q1   11  2 13 QX
Q2   12  1 14 QX
R2    6  9 100.0E3
RC1   4 11 8.511E3
RC2   4 12 8.511E3
RE1  13 10 634.9
RE2  14 10 634.9
REE  10 99 28.57E6
RO1   8  5 37.50
RO2   7 99 37.50
RP    3  4 18.83E3
VB    9  0 DC 0
VC    3 53 DC 2.740
VE   54  4 DC 2.740
VLIM  7  8 DC 0
VLP  91  0 DC 20
VLN   0 92 DC 20
.MODEL DX D(IS=800.0E-18)
.MODEL QX PNP(IS=800.0E-18 BF=16.50)
.ENDS
***********
*==========================================================
* MC33071
* ON Semiconductor
* OP-AMP MACRO-MODEL
*
* This model is subject to change without notice.
* Users may not directly or indirectly re-sell or 
* re-distribute this model. This model may not 
* be used, modified, or altered 
* without the consent of ON Semiconductor. 
*
* Revision: 1.0
*==========================================================
*********
*SRC=MC33071;MC33071;ON Semiconductor;OpAmps;General Purp.
*SYM=LM3XX
*
* MC33071 OPERATIONAL AMPLIFIER 
*"MACROMODEL" SUBCIRCUIT
*
* CONNECTIONS:
*	1 -	NON-INVERTING INPUT
*	2 -	INVERTING INPUT
*	3 -	POSITIVE POWER SUPPLY
*	4 -	NEGATIVE POWER SUPPLY
*	5 -	OUTPUT
*
.SUBCKT MC33071  1 2 3 4 5
*
C1   11 12 8.660E-12
C2    6  7 8.000E-12
CEE  10 99 1.231E-12
DC    5 53 DX
DE   54  5 DX
DLP  90 91 DX
DLN  92 90 DX
DP    4  3 DX
EGND 99  0 POLY(2) (3,0) (4,0) 0 .5 .5
FB    7 99 POLY(5) VB VC VE VLP VLN 0 8.842E6 
+ -9E6 9E6 9E6 -9E6
GA    6  0 11 12 251.3E-6
GCM   0  6 10 99 3.550E-9
IEE   3 10 DC 120.2E-6
HLIM 90  0 VLIM 1K
Q1   11  2 13 QX
Q2   12  1 14 QX
R2    6  9 100.0E3
RC1   4 11 3.979E3
RC2   4 12 3.979E3
RE1  13 10 3.542E3
RE2  14 10 3.542E3
REE  10 99 1.664E6
RO1   8  5 30
RO2   7 99 45
RP    3  4 34.09E3
VB    9  0 DC 0
VC    3 53 DC 1
VE   54  4 DC .3
VLIM  7  8 DC 0
VLP  91  0 DC 30
VLN   0 92 DC 30
.MODEL DX D(IS=800.0E-18)
.MODEL QX PNP(IS=800.0E-18 BF=600)
.ENDS
***********
*==========================================================
* MC33072
* ON Semiconductor
* OP-AMP MACRO-MODEL
*
* This model is subject to change without notice.
* Users may not directly or indirectly re-sell or 
* re-distribute this model. This model may not 
* be used, modified, or altered 
* without the consent of ON Semiconductor. 
*
* Revision: 1.0
*==========================================================
*********
*SRC=MC33072;MC33072;ON Semiconductor;OpAmps;General Purp.
*SYM=LM3XX
*
* MC33072 OPERATIONAL AMPLIFIER *"MACROMODEL" SUBCIRCUIT
* CREATED USING PARTS RELEASE 4.05
*
* CONNECTIONS:
	1 -	NON-INVERTING INPUT
	2 -	INVERTING INPUT
	3 -	POSITIVE POWER SUPPLY
	4 -	NEGATIVE POWER SUPPLY
	5 -	OUTPUT
*
.SUBCKT MC33072  1 2 3 4 5
*
C1   11 12 8.660E-12
C2    6  7 8.000E-12
CEE  10 99 1.231E-12
DC    5 53 DX
DE   54  5 DX
DLP  90 91 DX
DLN  92 90 DX
DP    4  3 DX
EGND 99  0 POLY(2) (3,0) (4,0) 0 .5 .5
FB    7 99 POLY(5) VB VC VE VLP VLN 0 8.842E6 
+ -9E6 9E6 9E6 -9E6
GA    6  0 11 12 251.3E-6
GCM   0  6 10 99 3.550E-9
IEE   3 10 DC 120.2E-6
HLIM 90  0 VLIM 1K
Q1   11  2 13 QX
Q2   12  1 14 QX
R2    6  9 100.0E3
RC1   4 11 3.979E3
RC2   4 12 3.979E3
RE1  13 10 3.542E3
RE2  14 10 3.542E3
REE  10 99 1.664E6
RO1   8  5 30
RO2   7 99 45
RP    3  4 34.09E3
VB    9  0 DC 0
VC    3 53 DC 1
VE   54  4 DC .3
VLIM  7  8 DC 0
VLP  91  0 DC 30
VLN   0 92 DC 30
DESD1 1  3 DX
DESD2 2  3 DX
.MODEL DX D(IS=800.0E-18)
.MODEL QX PNP(IS=800.0E-18 BF=600)
.ENDS
***********
*==========================================================
* MC33074
* ON Semiconductor
* OP-AMP MACRO-MODEL
*
* This model is subject to change without notice.
* Users may not directly or indirectly re-sell or 
* re-distribute this model. This model may not 
* be used, modified, or altered 
* without the consent of ON Semiconductor. 
*
* Revision: 1.0
*==========================================================
********
*SRC=MC33074;MC33074;ON Semiconductor;OpAmps;General Purp.
*SYM=LM3XX
*
* MC33074 OPERATIONAL AMPLIFIER 
*"MACROMODEL" SUBCIRCUIT
*
* CONNECTIONS:
*	1 -	NON-INVERTING INPUT
*	2 -	INVERTING INPUT
*	3 -	POSITIVE POWER SUPPLY
*	4 -	NEGATIVE POWER SUPPLY
*	5 -	OUTPUT
*
.SUBCKT MC33074  1 2 3 4 5
*
C1   11 12 8.660E-12
C2    6  7 8.000E-12
CEE  10 99 1.231E-12
DC    5 53 DX
DE   54  5 DX
DLP  90 91 DX
DLN  92 90 DX
DP    4  3 DX
EGND 99  0 POLY(2) (3,0) (4,0) 0 .5 .5
FB    7 99 POLY(5) VB VC VE VLP VLN 0 8.842E6 
+ -9E6 9E6 9E6 -9E6
GA    6  0 11 12 251.3E-6
GCM   0  6 10 99 3.550E-9
IEE   3 10 DC 120.2E-6
HLIM 90  0 VLIM 1K
Q1   11  2 13 QX
Q2   12  1 14 QX
R2    6  9 100.0E3
RC1   4 11 3.979E3
RC2   4 12 3.979E3
RE1  13 10 3.542E3
RE2  14 10 3.542E3
REE  10 99 1.664E6
RO1   8  5 30
RO2   7 99 45
RP    3  4 34.09E3
VB    9  0 DC 0
VC    3 53 DC 1
VE   54  4 DC .3
VLIM  7  8 DC 0
VLP  91  0 DC 30
VLN   0 92 DC 30
DESD1 1  3 DX
DESD2 2  3 DX
.MODEL DX D(IS=800.0E-18)
.MODEL QX PNP(IS=800.0E-18 BF=600)
.ENDS
***********
*==========================================================
* MC33077
* ON Semiconductor
* OP-AMP MACRO-MODEL
*
* This model is subject to change without notice.
* Users may not directly or indirectly re-sell or 
* re-distribute this model. This model may not 
* be used, modified, or altered 
* without the consent of ON Semiconductor. 
*
* Revision: 1.0
*==========================================================
**********
*SRC=MC33077;MC33077;ON Semiconductor;OpAmps;General Purp.
*SYM=LM3XX
*
* MC33077 OPERATIONAL AMPLIFIER 
*"MACROMODEL" SUBCIRCUIT
*
* CONNECTIONS:
*	1 -	NON-INVERTING INPUT
*	2 -	INVERTING INPUT
*	3 -	POSITIVE POWER SUPPLY
*	4 -	NEGATIVE POWER SUPPLY
*	5 -	OUTPUT
*
.SUBCKT MC33077  1 2 3 4 5
*
C1   11 12 3.851E-12
C2    6  7 9.50E-12
DC    5 53 DX
DE   54  5 DX
DLP  90 91 DX
DLN  92 90 DX
DP    4  3 DX
EGND 99  0 POLY(2) (3,0) (4,0) 0 .5 .5
FB    7 99 POLY(5) VB VC VE VLP VLN 0 42.87E6
+ -40E6 40E6 40E6 -40E6
GA    6  0 11 12 541.9E-6
GCM   0  6 10 99 2.421E-9
IEE   3 10 DC 104.1E-6
HLIM 90  0 VLIM 1K
Q1   11  2 13 QX
Q2   12  1 14 QX
R2    6  9 100.0E3
RC1   4 11 1.845E3
RC2   4 12 1.845E3
RE1  13 10 1.338E3
RE2  14 10 1.338E3
REE  10 99 1.922E6
RO1   8  5 18
RO2   7 99 18
RP    3  4 8.833E3
VB    9  0 DC 0
VC    3 53 DC 2.0
VE   54  4 DC 1.5
VLIM  7  8 DC 0
VLP  91  0 DC 30
VLN   0 92 DC 30
.MODEL DX D(IS=800.0E-18)
.MODEL QX PNP(IS=800.0E-18 BF=178.4)
.ENDS
***********
*==========================================================
* MC33078
* ON Semiconductor
* OP-AMP MACRO-MODEL
*
* This model is subject to change without notice.
* Users may not directly or indirectly re-sell or 
* re-distribute this model. This model may not 
* be used, modified, or altered 
* without the consent of ON Semiconductor. 
*
* Revision: 1.0
*==========================================================
********
*SRC=MC33078;MC33078;ON Semiconductor;OpAmps;General Purp.
*SYM=LM3XX
*
* MC33078 OPERATIONAL AMPLIFIER 
*"MACROMODEL" SUBCIRCUIT
*
* CONNECTIONS:
*	1 -	NON-INVERTING INPUT
*	2 -	INVERTING INPUT
*	3 -	POSITIVE POWER SUPPLY
*	4 -	NEGATIVE POWER SUPPLY
*	5 -	OUTPUT
*
.SUBCKT MC33078  1 2 3 4 5
*
C1   11 12 3.501E-12
C2    6  7 10.00E-12
DC    5 53 DX
DE   54  5 DX
DLP  90 91 DX
DLN  92 90 DX
DP    4  3 DX
EGND 99  0 POLY(2) (3,0) (4,0) 0 .5 .5
FB    7 99 POLY(5) VB VC VE VLP VLN 0 27.96E6 
+ -30E6 30E6 30E6 -30E6
GA    6  0 11 12 565.5E-6
GCM   0  6 10 99 5.655E-9
ISS  10  4 DC 70.00E-6
HLIM 90  0 VLIM 1K
J1   11  2 10 JX
J2   12  1 10 JX
R2    6  9 100.0E3
RD1   3 11 1.768E3
RD2   3 12 1.768E3
RO1   8  5 10
RO2   7 99 20
RP    3  4 29.03E3
RSS  10 99 2.857E6
VB    9  0 DC 0
VC    3 53 DC .9
VE   54  4 DC .4
VLIM  7  8 DC 0
VLP  91  0 DC 30
VLN   0 92 DC 30
.MODEL DX D(IS=800.0E-18)
.MODEL JX NJF(IS=150.0E-9 BETA=4.568E-3 
+ VTO=-1)
.ENDS
***********
*==========================================================
* MC33079
* ON Semiconductor
* OP-AMP MACRO-MODEL
*
* This model is subject to change without notice.
* Users may not directly or indirectly re-sell or 
* re-distribute this model. This model may not 
* be used, modified, or altered 
* without the consent of ON Semiconductor. 
*
* Revision: 1.0
*==========================================================
********
*SRC=MC33079;MC33079;ON Semiconductor;OpAmps;General Purp.
*SYM=LM3XX
*
* MC33079 OPERATIONAL AMPLIFIER 
*"MACROMODEL" SUBCIRCUIT
*
* CONNECTIONS:
	1 -	NON-INVERTING INPUT
	2 -	INVERTING INPUT
	3 -	POSITIVE POWER SUPPLY
	4 -	NEGATIVE POWER SUPPLY
	5 -	OUTPUT
*
.SUBCKT MC33079  1 2 3 4 5
*
C1   11 12 3.501E-12
C2    6  7 10.00E-12
DC    5 53 DX
DE   54  5 DX
DLP  90 91 DX
DLN  92 90 DX
DP    4  3 DX
EGND 99  0 POLY(2) (3,0) (4,0) 0 .5 .5
FB    7 99 POLY(5) VB VC VE VLP VLN 0 27.96E6 
+ -30E6 30E6 30E6 -30E6
GA    6  0 11 12 565.5E-6
GCM   0  6 10 99 5.655E-9
ISS  10  4 DC 70.00E-6
HLIM 90  0 VLIM 1K
J1   11  2 10 JX
J2   12  1 10 JX
R2    6  9 100.0E3
RD1   3 11 1.768E3
RD2   3 12 1.768E3
RO1   8  5 10
RO2   7 99 20
RP    3  4 29.03E3
RSS  10 99 2.857E6
VB    9  0 DC 0
VC    3 53 DC .9
VE   54  4 DC .4
VLIM  7  8 DC 0
VLP  91  0 DC 30
VLN   0 92 DC 30
.MODEL DX D(IS=800.0E-18)
.MODEL JX NJF(IS=150.0E-9 BETA=4.568E-3 
+ VTO=-1)
.ENDS
***********
*==========================================================
* MC33171
* ON Semiconductor
* OP-AMP MACRO-MODEL
*
* This model is subject to change without notice.
* Users may not directly or indirectly re-sell or 
* re-distribute this model. This model may not 
* be used, modified, or altered 
* without the consent of ON Semiconductor. 
*
* Revision: 1.0
*==========================================================
********
*SRC=MC33171;MC33171;ON Semiconductor;OpAmps;General Purp.
*SYM=LM3XX
*
* MC33171 OPERATIONAL AMPLIFIER 
*"MACROMODEL" SUBCIRCUIT
*
* CONNECTIONS:
*	1 -	NON-INVERTING INPUT
*	2 -	INVERTING INPUT
*	3 -	POSITIVE POWER SUPPLY
*	4 -	NEGATIVE POWER SUPPLY
*	5 -	OUTPUT
*
.SUBCKT MC33171  1 2 3 4 5
*
C1   11 12 8.660E-12
C2    6  7 5.500E-12
CEE  10 99 4.976E-12
DC    5 53 DX
DE   54  5 DX
DLP  90 91 DX
DLN  92 90 DX
DP    4  3 DX
EGND 99  0 POLY(2) (3,0) (4,0) 0 .5 .5
FB    7 99 POLY(5) VB VC VE VLP VLN 0 89.31E6 
+ -90E6 90E6 90E6 -90E6
GA    6  0 11 12 62.20E-6
GCM   0  6 10 99 1.967E-9
IEE   3 10 DC 22.04E-6
HLIM 90  0 VLIM 1K
Q1   11  2 13 QX
Q2   12  1 14 QX
R2    6  9 100.0E3
RC1   4 11 16.08E3
RC2   4 12 16.08E3
RE1  13 10 13.70E3
RE2  14 10 13.70E3
REE  10 99 9.074E6
RO1   8  5 110
RO2   7 99 90
RP    3  4 291.3E3
VB    9  0 DC 0
VC    3 53 DC .8
VE   54  4 DC .8
VLIM  7  8 DC 0
VLP  91  0 DC 10
VLN   0 92 DC 10
DESD1  1  3 DX
DESD2  2  3 DX
.MODEL DX D(IS=800.0E-18)
.MODEL QX PNP(IS=800.0E-18 BF=550)
.ENDS
***********
*==========================================================
* MC33172
* ON Semiconductor
* OP-AMP MACRO-MODEL
*
* This model is subject to change without notice.
* Users may not directly or indirectly re-sell or 
* re-distribute this model. This model may not 
* be used, modified, or altered 
* without the consent of ON Semiconductor. 
*
* Revision: 1.0
*==========================================================
********
*SRC=MC33172;MC33172;ON Semiconductor;OpAmps;General Purp.
*SYM=LM3XX
*
* MC33172 OPERATIONAL AMPLIFIER 
*"MACROMODEL" SUBCIRCUIT
*
* CONNECTIONS:
*	1 -	NON-INVERTING INPUT
*	2 -	INVERTING INPUT
*	3 -	POSITIVE POWER SUPPLY
*	4 -	NEGATIVE POWER SUPPLY
*	5 -	OUTPUT
*
.SUBCKT MC33172  1 2 3 4 5
*
C1   11 12 8.660E-12
C2    6  7 5.500E-12
CEE  10 99 4.976E-12
DC    5 53 DX
DE   54  5 DX
DLP  90 91 DX
DLN  92 90 DX
DP    4  3 DX
EGND 99  0 POLY(2) (3,0) (4,0) 0 .5 .5
FB    7 99 POLY(5) VB VC VE VLP VLN 0 89.31E6 
+ -90E6 90E6 90E6 -90E6
GA    6  0 11 12 62.20E-6
GCM   0  6 10 99 1.967E-9
IEE   3 10 DC 22.04E-6
HLIM 90  0 VLIM 1K
Q1   11  2 13 QX
Q2   12  1 14 QX
R2    6  9 100.0E3
RC1   4 11 16.08E3
RC2   4 12 16.08E3
RE1  13 10 13.70E3
RE2  14 10 13.70E3
REE  10 99 9.074E6
RO1   8  5 110
RO2   7 99 90
RP    3  4 291.3E3
VB    9  0 DC 0
VC    3 53 DC .8
VE   54  4 DC .8
VLIM  7  8 DC 0
VLP  91  0 DC 10
VLN   0 92 DC 10
DESD1  1  3 DX
DESD2  2  3 DX
.MODEL DX D(IS=800.0E-18)
.MODEL QX PNP(IS=800.0E-18 BF=550)
.ENDS
***********
*==========================================================
* MC33174
* ON Semiconductor
* OP-AMP MACRO-MODEL
*
* This model is subject to change without notice.
* Users may not directly or indirectly re-sell or 
* re-distribute this model. This model may not 
* be used, modified, or altered 
* without the consent of ON Semiconductor. 
*
* Revision: 1.0
*==========================================================
********
*SRC=MC33174;MC33174;ON Semiconductor;OpAmps;General Purp.
*SYM=LM3XX
*
* MC33174 OPERATIONAL AMPLIFIER 
*"MACROMODEL" SUBCIRCUIT
*
* CONNECTIONS:
*	1 -	NON-INVERTING INPUT
*	2 -	INVERTING INPUT
*	3 -	POSITIVE POWER SUPPLY
*	4 -	NEGATIVE POWER SUPPLY
*	5 -	OUTPUT
*
.SUBCKT MC33174  1 2 3 4 5
*
C1   11 12 8.660E-12
C2    6  7 5.500E-12
CEE  10 99 4.976E-12
DC    5 53 DX
DE   54  5 DX
DLP  90 91 DX
DLN  92 90 DX
DP    4  3 DX
EGND 99  0 POLY(2) (3,0) (4,0) 0 .5 .5
FB    7 99 POLY(5) VB VC VE VLP VLN 0 89.31E6 
+ -90E6 90E6 90E6 -90E6
GA    6  0 11 12 62.20E-6
GCM   0  6 10 99 1.967E-9
IEE   3 10 DC 22.04E-6
HLIM 90  0 VLIM 1K
Q1   11  2 13 QX
Q2   12  1 14 QX
R2    6  9 100.0E3
RC1   4 11 16.08E3
RC2   4 12 16.08E3
RE1  13 10 13.70E3
RE2  14 10 13.70E3
REE  10 99 9.074E6
RO1   8  5 110
RO2   7 99 90
RP    3  4 291.3E3
VB    9  0 DC 0
VC    3 53 DC .8
VE   54  4 DC .8
VLIM  7  8 DC 0
VLP  91  0 DC 10
VLN   0 92 DC 10
DESD1  1  3 DX
DESD2  2  3 DX
.MODEL DX D(IS=800.0E-18)
.MODEL QX PNP(IS=800.0E-18 BF=550)
.ENDS
***********
*==========================================================
* MC33178
* ON Semiconductor
* OP-AMP MACRO-MODEL
*
* This model is subject to change without notice.
* Users may not directly or indirectly re-sell or 
* re-distribute this model. This model may not 
* be used, modified, or altered 
* without the consent of ON Semiconductor. 
*
* Revision: 1.0
*==========================================================
********
*SRC=MC33178;MC33178;ON Semiconductor;OpAmps;General Purp.
*SYM=LM3XX
*
* MC33178 OPERATIONAL AMPLIFIER 
*"MACROMODEL" SUBCIRCUIT
*
* CONNECTIONS:
*	1 -	NON-INVERTING INPUT
*	2 -	INVERTING INPUT
*	3 -	POSITIVE POWER SUPPLY
*	4 -	NEGATIVE POWER SUPPLY
*	5 -	OUTPUT
*
.SUBCKT MC33178  1 2 3 4 5
*
C1   11 12 8.660E-12
C2    6  7 15.00E-12
DC    5 53 DX
DE   54  5 DX
DLP  90 91 DX
DLN  92 90 DX
DP    4  3 DX
EGND 99  0 POLY(2) (3,0) (4,0) 0 .5 .5
FB    7 99 POLY(5) VB VC VE VLP VLN 0 17.68E6 
+ -20E6 20E6 20E6 -20E6
GA    6  0 11 12 282.7E-6
GCM   0  6 10 99 894.1E-12
IEE   3 10 DC 30.20E-6
HLIM 90  0 VLIM 1K
Q1   11  2 13 QX
Q2   12  1 14 QX
R2    6  9 100.0E3
RC1   4 11 3.537E3
RC2   4 12 3.537E3
RE1  13 10 1.800E3
RE2  14 10 1.800E3
REE  10 99 6.623E6
RO1   8  5 60
RO2   7 99 40
RP    3  4 164.5E3
VB    9  0 DC 0
VC    3 53 DC 1
VE   54  4 DC 1.200
VLIM  7  8 DC 0
VLP  91  0 DC 100
VLN   0 92 DC 100
DESD1  1  3 DX
DESD2  2  3 DX
.MODEL DX D(IS=800.0E-18)
.MODEL QX PNP(IS=800.0E-18 BF=150)
.ENDS
***********
*==========================================================
* MC33179
* ON Semiconductor
* OP-AMP MACRO-MODEL
*
* This model is subject to change without notice.
* Users may not directly or indirectly re-sell or 
* re-distribute this model. This model may not 
* be used, modified, or altered 
* without the consent of ON Semiconductor. 
*
* Revision: 1.0
*==========================================================
********
*SRC=MC33179;MC33179;ON Semiconductor;OpAmps;General Purp.
*SYM=LM3XX 
*
* MC33179 OPERATIONAL AMPLIFIER 
*"MACROMODEL" SUBCIRCUIT
*
* CONNECTIONS:
*	1 -	NON-INVERTING INPUT
*	2 -	INVERTING INPUT
*	3 -	POSITIVE POWER SUPPLY
*	4 -	NEGATIVE POWER SUPPLY
*	5 -	OUTPUT
*
.SUBCKT MC33179  1 2 3 4 5
*
C1   11 12 2.887E-12
C2    6  7 2.500E-12
CEE  10 99 31.03E-15
DC    5 53 DX
DE   54  5 DX
DLP  90 91 DX
DLN  92 90 DX
DP    4  3 DX
EGND 99  0 POLY(2) (3,0) (4,0) 0 .5 .5
FB    7 99 POLY(5) VB VC VE VLP VLN 0 84.88E6 
+ -80E6 80E6 80E6 -80E6
GA    6  0 11 12 47.12E-6
GCM   0  6 10 99 149.0E-12
IEE  10  4 DC 5.293E-6
HLIM 90  0 VLIM 1K
Q1   11  2 13 QX
Q2   12  1 14 QX
R2    6  9 100.0E3
RC1   3 11 21.22E3
RC2   3 12 21.22E3
RE1  13 10 10.66E3
RE2  14 10 10.66E3
REE  10 99 37.78E6
RO1   8  5 50
RO2   7 99 50
RP    3  4 33.53E3
VB    9  0 DC 0
VC    3 53 DC 1
VE   54  4 DC 1.200
VLIM  7  8 DC 0
VLP  91  0 DC 80
VLN   0 92 DC 80
.MODEL DX D(IS=800.0E-18)
.MODEL QX NPN(IS=800.0E-18 BF=26.01)
.ENDS
***********
*==========================================================
* MC33272
* ON Semiconductor
* OP-AMP MACRO-MODEL
*
* This model is subject to change without notice.
* Users may not directly or indirectly re-sell or 
* re-distribute this model. This model may not 
* be used, modified, or altered 
* without the consent of ON Semiconductor. 
*
* Revision: 1.0
*==========================================================
********
*SRC=MC33272;MC33272;ON Semiconductor;OpAmps;General Purp.
*SYM=LM3XX 
*
* MC33272 OPERATIONAL AMPLIFIER 
*"MACROMODEL" SUBCIRCUIT
*
* CONNECTIONS:
*	1 -	NON-INVERTING INPUT
*	2 -	INVERTING INPUT
*	3 -	POSITIVE POWER SUPPLY
*	4 -	NEGATIVE POWER SUPPLY
*	5 -	OUTPUT
*
.SUBCKT MC33272  1 2 3 4 5
*
C1   11 12 2.451E-12
C2    6  7 6.000E-12
DC    5 53 DX
DE   54  5 DX
DLP  90 91 DX
DLN  92 90 DX
DP    4  3 DX
EGND 99  0 POLY(2) (3,0) (4,0) 0 .5 .5
FB    7 99 POLY(5) VB VC VE VLP VLN 0 12.63E6
+ -10E6 10E6 10E6 -10E6
GA    6  0 11 12 263.9E-6
GCM   0  6 10 99 8.345E-9
IEE   3 10 DC 67.12E-6
HLIM 90  0 VLIM 1K
Q1   11  2 13 QX
Q2   12  1 14 QX
R2    6  9 100.0E3
RC1   4 11 3.789E3
RC2   4 12 3.789E3
RE1  13 10 2.984E3
RE2  14 10 2.984E3
REE  10 99 2.980E6
RO1   8  5 30
RO2   7 99 30
RP    3  4 14.40E3
VB    9  0 DC 0
VC    3 53 DC 1.700
VE   54  4 DC 1.700
VLIM  7  8 DC 0
VLP  91  0 DC 37
VLN   0 92 DC 37
.MODEL DX D(IS=800.0E-18)
.MODEL QX PNP(IS=800.0E-18 BF=107.3)
.ENDS
***********
*==========================================================
* MC33274
* ON Semiconductor
* OP-AMP MACRO-MODEL
*
* This model is subject to change without notice.
* Users may not directly or indirectly re-sell or 
* re-distribute this model. This model may not 
* be used, modified, or altered 
* without the consent of ON Semiconductor. 
*
* Revision: 1.0
*==========================================================
********
*SRC=MC33274;MC33274;ON Semiconductor;OpAmps;General Purp.
*SYM=LM3XX
*
* MC33274 OPERATIONAL AMPLIFIER 
*"MACROMODEL" SUBCIRCUIT
*
* CONNECTIONS:
*	1 -	NON-INVERTING INPUT
*	2 -	INVERTING INPUT
*	3 -	POSITIVE POWER SUPPLY
*	4 -	NEGATIVE POWER SUPPLY
*	5 -	OUTPUT
*
.SUBCKT MC33274  1 2 3 4 5
*
C1   11 12 2.451E-12
C2    6  7 6.000E-12
DC    5 53 DX
DE   54  5 DX
DLP  90 91 DX
DLN  92 90 DX
DP    4  3 DX
EGND 99  0 POLY(2) (3,0) (4,0) 0 .5 .5
FB    7 99 POLY(5) VB VC VE VLP VLN 0 12.63E6
+ -10E6 10E6 10E6 -10E6
GA    6  0 11 12 263.9E-6
GCM   0  6 10 99 8.345E-9
IEE   3 10 DC 67.12E-6
HLIM 90  0 VLIM 1K
Q1   11  2 13 QX
Q2   12  1 14 QX
R2    6  9 100.0E3
RC1   4 11 3.789E3
RC2   4 12 3.789E3
RE1  13 10 2.984E3
RE2  14 10 2.984E3
REE  10 99 2.980E6
RO1   8  5 30
RO2   7 99 30
RP    3  4 14.40E3
VB    9  0 DC 0
VC    3 53 DC 1.700
VE   54  4 DC 1.700
VLIM  7  8 DC 0
VLP  91  0 DC 37
VLN   0 92 DC 37
.MODEL DX D(IS=800.0E-18)
.MODEL QX PNP(IS=800.0E-18 BF=107.3)
.ENDS
***********
*==========================================================
* TCA0372
* ON Semiconductor
* OP-AMP MACRO-MODEL
*
* This model is subject to change without notice.
* Users may not directly or indirectly re-sell or 
* re-distribute this model. This model may not 
* be used, modified, or altered 
* without the consent of ON Semiconductor. 
*
* Revision: 1.0
*==========================================================
********
*SRC=TCA0372;TCA0372;ON Semiconductor;OpAmps;General Purp.
*SYM=LM3XX
*
* TCA0372 OPERATIONAL AMPLIFIER 
*"MACROMODEL" SUBCIRCUIT
*
* CONNECTIONS:
*	1 -	NON-INVERTING INPUT
*	2 -	INVERTING INPUT
*	3 -	POSITIVE POWER SUPPLY
*	4 -	NEGATIVE POWER SUPPLY
*	5 -	OUTPUT
*
.SUBCKT TCA0372  1 2 3 4 5
*
C1   11 12 2.469E-12
C2    6  7 28.00E-12
DC    5 53 DX
DE   54  5 DX
DLP  90 91 DX
DLN  92 90 DX
DP    4  3 DX
EGND 99  0 POLY(2) (3,0) (4,0) 0 .5 .5
FB    7 99 POLY(5) VB VC VE VLP VLN 0 10.33E6
+  -10E6 10E6 10E6 -10E6
GA    6  0 11 12 193.5E-6
GCM   0  6 10 99 6.120E-9
IEE   3 10 DC 39.40E-6
HLIM 90  0 VLIM 1K
Q1   11  2 13 QX
Q2   12  1 14 QX
R2    6  9 100.0E3
RC1   4 11 5.167E3
RC2   4 12 5.167E3
RE1  13 10 3.828E3
RE2  14 10 3.828E3
REE  10 99 5.076E6
RO1   8  5 50
RO2   7 99 50
RP    3  4 4.310E3
VB    9  0 DC 0
VC    3 53 DC 1.40
VE   54  4 DC 1.40
VLIM  7  8 DC 0
VLP  91  0 DC 20
VLN   0 92 DC 20
.MODEL DX D(IS=800.0E-18)
.MODEL QX PNP(IS=800.0E-18 BF=196)
.ENDS
***********
*==========================================================
* NCP1203
* ON Semiconductor model developed by Christophe BASSO, Toulouse (FRANCE)
* VHV PWM Controllers 
*
* This model is subject to change without notice.
* Users may not directly or indirectly re-sell or 
* re-distribute this model. This model may not 
* be used, modified, or altered 
* without the consent of ON Semiconductor. 
*
* Revision: October 25th 2001
* This simplified models accounts for propagation delays 
* and includes the complete overcharge detection scheme
*
*==========================================================
**********
*SRC=NCP1203P40;NCP1203P40;ON Semiconductor;VHV PWM Controllers;NCP1203P40 40kHz
*SYM=NCP1203
.SUBCKT NCP1203P40 skip FB CS GND DRV VCC HV
X1 skip FB CS GND DRV VCC HV NCP1203 params: Ct=1nF Conso=750u
.ENDS
*INCLUDE ONIC.LIB
**********
*SRC=NCP1203P60;NCP1203P60;ON Semiconductor;VHV PWM Controllers;NCP1203P60 60kHz
*SYM=NCP1203
.SUBCKT NCP1203P60 skip FB CS GND DRV VCC HV
X1 skip FB CS GND DRV VCC HV NCP1203 params: Ct=650pF Conso=750u
.ENDS
*INCLUDE ONIC.LIB
**********
*SRC=NCP1203P100;NCP1203P100;ON Semiconductor;VHV PWM Controllers;NCP1203P100 100kHz
*SYM=NCP1203
.SUBCKT NCP1203P100 skip FB CS GND DRV VCC HV
X1 skip FB CS GND DRV VCC HV NCP1203 params: Ct=400pF Conso=750u
.ENDS
*INCLUDE ONIC.LIB
**********
.SUBCKT NCP1203 skip FB CS GND DRV VCC HV {Ct=1nF Conso=750u}
*
.SUBCKT LATCH 6 8 2 1 {VHIGH=10 VLOW=100m}
*             S R Q Q\
BQB   10 0 V=(V(8)<800M) & (V(2)>800M) ? {VLOW} : {VHIGH}
BQ    20 0 V=(V(6)<800M) & (V(1)>800M) ? {VLOW} : {VHIGH}
RD1   10 1 100
CD1   1 0 10p IC={VHIGH}
RD2   20 2 100
CD2   2 0 10p IC={VLOW}
.ENDS
*
.SUBCKT INV 1 2
B1 4 0 V= V(1)>800mV ? 0 : 10V
RD 4 2 100
CD 2 0 10P
.ENDS
*
.SUBCKT OR2 1 2 3
B1 4 0 V= (V(1)>800mV) | (V(2)>800mV) ? 10V : 100m
RD 4 3 100
CD 3 0 10P
.ENDS
*
.SUBCKT COMPAR NINV INV OUT {VHIGH=12 VLOW=100m}
B1 4 0 V = V(NINV,INV) > 0  ?  {VHIGH}  :  {VLOW}
RO 4 OUT 100
CO OUT 0 100PF
.ENDS
*
.SUBCKT UTD 1 2 {K=??? TD=???}
RIN 1 0 1E15
E1 3 0 1 0 {K}
T1 3 0 2 0 Z0=1 TD={TD}
R1 2 0 1
.ENDS
*
.SUBCKT UVLO  1   2  {VON=12 VOFF=10}
*            VIN OUT
S1 10 3 1 0 SUVLO
RUV 3 0 100K
VCC 10 0 10V
B1 4 0 V= V(3) > 5V ? 5V : 0
RD 4 2 100
CD 2 0 100P
.MODEL SUVLO SW RON=1 ROFF=1E6 VT={((VON-VOFF)/2) + VOFF} VH={(VON-VOFF)/2}
; VON = VT+VH = 15.0 VOFF = VT-VH = 7.6V
.ENDS
*
.SUBCKT OR3 1 2 3 5
B1 4 0 V= (V(1)>800mV) | (V(2)>800mV) | (V(3)>800mV) ? 10V : 100m
RD 4 5 100
CD 5 0 10P
.ENDS
*
.SUBCKT AND2 1 2 3
B1 4 0 V= (V(1)>800mV) & (V(2)>800mV) ? 10V : 100m
RD 4 3 100
CD 3 0 10P
.ENDS
*
C8 cmp rst 100p
R21 rst gnd 1k
R1 4 gnd 100k
X16 cmp 49 INV
Rskip skip 48 22k
X17 45 rst 38 OR2
X4 6 9 cmp COMPAR {VHIGH=5}
B1 9 gnd V=V(CMP,gnd) > 3V ? 500m : 3V
Rfb 3 FB 20k
Bsetp setpoint gnd V=V(FB,gnd)/3.3 > 1V ? 1V : V(FB,gnd)/3.3
X5 13 setpoint 16 COMPAR
X6 Q LEB UTD { K=1 TD=250n } ; Internal LEB duration
BiMeas 13 gnd V=V(LEB,gnd) > 3.5V ? V(CS,gnd) : 0
RdumCS CS gnd 1Meg
X7 16 44 UTD {K=1 TD=90n} 	; Current sense prop. delay
Bdrive 35 gnd V=V(Q,gnd) > 3.5 ? V(Vcc,gnd) : 100m
Rsource 39 DRV 40
Rsink 36 DRV 18
D4 36 39 _D4_mod 
Desd1 gnd skip _D5_mod 
C1 49 15 100p
X8 Vcc UVLO1 UVLO {VON=12.8 VOFF=7.8} ; First UVLO levels
X11 Vcc UVLO2 UVLO {VON=12.8 VOFF=4.9} ; Second UVLO levels
D6 0 FB _D5_mod 
B3 HV Vcc I=V(UVLO2,gnd) > 3.5 ? 35u : 7m ; HV source level
X14 44 46 38 2 OR3
X1x 1 2 Q 4 LATCH
Ct 6 gnd {Ct}
R100 101 46 1k
Q100 6 101 gnd QMOD
B6 6 gnd I=V(CMP) > 3.5 ? 500u : 0
BCons1 Vcc gnd I=V(UVLO2,gnd) > 3.5 ? {Conso} : 350u ; IC and drive consumption
BconsDRV Vcc gnd I=(V(UVLO1,gnd) > 3.5)  & (I(Vdrv) > 0) ? I(Vdrv) : 0
Vdrv 35 39
X15 UVLO1 46 INV
D7 gnd CS _D5_mod 
D8 gnd Vcc _D8_mod 
Bskip 48 gnd V=V(UVLO1,gnd) > 3.5 ? 1.2V : 0
BFB 3 gnd V=V(UVLO1,gnd) > 3.5 ? 4.8V : 0
X13 skip FB 45 COMPAR
B12 gnd 6 I=(V(CMP,gnd) < 3.5) & (V(UVLO1,gnd) > 3.5) ? 125u : 0
R2 15 gnd 1k
D10 gnd 15 _D5_mod 
D11 gnd rst _D5_mod 
X2 15 53 1 AND2
X3 2 53 INV
** Discrete models **
.MODEL QMOD NPN (IS=15.2F NF=1 BF=105 VAF=98.5 IKF=.5
+ ISE=8.2P NE=2 BR=4 NR=1 VAR=20 IKR=.225 RE=.373 RB=1.49
+ RC=.149 XTB=1.5 CJE=35.5P CJC=12.2P TF=500P TR=85N)
.MODEL _D8_mod D BV=20 CJO=10p N=0.8 RS=100m TT=100n
.MODEL _D5_mod D BV=10 CJO=10p N=0.8 RS=100m TT=100n
.MODEL _D4_mod D CJO=10p N=0.01 RS=10m TT=10n
.ENDS
************
*==========================================================
* NCP1203 AC
* ON Semiconductor model developed by Christophe BASSO, Toulouse (FRANCE)
* NCP1203 average FLYBACK AC model DCM and CCM modes
* FLYBACK average model made by Ben-Gurion University (ISRAEL)
* http://www.ee.bgu.ac.il/~pel
*
* This model is subject to change without notice.
* Users may not directly or indirectly re-sell or 
* re-distribute this model. This model may not 
* be used, modified, or altered 
* without the consent of ON Semiconductor. 
*
* Revision: October 25th 2001
*==========================================================
********
*SRC=NCP1203_Av;NCP1203_Av;ON Semiconductor;VHV PWM Controllers;NCP1203 Averaged model
*SYM=NCP1203_A
.SUBCKT NCP1203_Av In Out Gnd FB CTRL {FS=??? L=??? MC=??? RI=???}
BGIN IN GND I=I(VLM)*V(DON)/(V(DON)+V(DOFF)+1u)
BELM OUT1 GND V=V(IN)*V(DON)-V(OUT)*V(DOFF)
RM OUT1 5 1M
LM 5 8 {L}
VLM 8 GND
BGOUT GND OUT I=I(VLM)*V(DOFF)/(V(DON)+V(DOFF)+1u)
BDON DON GND V = ((V(CONTROL)-I(VLM)*{RI})*{FS})/({MC}+((0.5*{RI}*V(IN))/{L})+1u) < 10m ? 10m
+ : ((V(CONTROL)-I(VLM)*{RI})*{FS})/({MC}+((0.5*{RI}*V(IN))/{L})+1u) > .999 ? .999
+ : ((V(CONTROL)-I(VLM)*{RI})*{FS})/({MC}+((0.5*{RI}*V(IN))/{L})+1u)
VCLP VC 0 9M
D2 VC DOFF DBREAK
D1 DOFF 6 DBREAK
R4 DOFF 7 10
BDOFFM 6 GND V=1-V(DON)-9M
BDOFF 7 GND V=2*I(VLM)*{FS}*{L}/(V(DON)+1u)/(V(IN)+1u)-V(DON)
B1 CONTROL 0 V=V(CTRL)/4 > 1 ? 1 : V(CTRL)/4
Vref 50 GND DC=4.8V
Rfb 50 FB 20k
.MODEL DBREAK D (TT=1N CJO=10P N=0.01)
.ENDS
*********
*==========================================================
* MC33262
* ON Semiconductor
* Power Factor Controllers
*
* This model was developed for ON Semiconductor by:
* AEI Systems, LLC
* 5777 W. Century Blvd. Suite 876
* Los Angeles, California 90045
* Copyright 2002, all rights reserved.
*
* This model is subject to change without notice.
* Users may not directly or indirectly re-sell or 
* re-distribute this model. This model may not 
* be used, modified, or altered 
* without the consent of ON Semiconductor. 
*
* For more information regarding modeling services,
* model libraries and simulation products, please
* call AEi Systems at (310) 863-8034, or contact 
* AEi by email: info@aeng.com. http://www.AENG.com
*
* Revision: 1.0 
*==========================================================
**********
*SRC=MC33262;MC33262;ON Semiconductor;PFC Controllers;free-running
*SYM=MC33262
.SUBCKT MC33262 1 2 3 4 5 0 7 8
*POWER FACTOR CONTROLLER
*Terminal Identifications are
*Voltage fedback Input=1 Compensation=2
*Multiplier Input=3 Current sense Input=4
*Zero Current Detect Input=5 GND=0 Drive Output=7 Vcc=8
.MODEL UVL_INPUT SW (VT=10.5 VH=2.5 RON=1 ROFF=1MEG
.MODEL IDET_INPUT SW (VT=1.5 VH=0.1 RON=1 ROFF=1MEG
.MODEL D33262A D  CJO=2P
.MODEL D33262 D  CJO=2P N=0.5
.MODEL Q33262 NPN (IS=15.2F NF=1 BF=105 VAF=98.5 IKF=.5
+ ISE=8.2P NE=2 BR=4 NR=1 VAR=20 IKR=.225 RE=.373 RB=1.49
+ RC=.149 XTB=1.5 CJE=35.5P CJC=12.2P TF=0.5N TR=10N)
.SUBCKT LIM33262 1 2
RIN 1 0 1E12
E1 3 0 0 1 {K}
RC1 2 4 1MEG
C1 2 4 1F IC=0
R1 3 4 1MEG
E2 2 0 0 4 1E6
VN 5 2 {NLIM-.0597}
DN 4 5 DN
.MODEL DN D(IS=1E-12 N=.14319)
VP 2 6 {PLIM-.0597}
DP 6 4 DN
.ENDS
.SUBCKT RS33262 2 3 4 5 {TD=1N}
C1 11 0 10P
R3 10 8 {TD/6.9315P}
C3 8 0 10P
B1 10 0 V=V(2)>1 ? V(5)>1 ? 0 : 2
B2 16 0 V=V(3)>1 ? V(4)>1 ? 0 : 2
B5 4 0 V=V(8)>1 ? 2 : 0
B6 5 0 V=V(11)>1 ? 2 : 0
R1 16 11 {TD/6.9315P}
.ENDS
S1 9 11 8 0 UVL_INPUT
V1 9 0 2.5
R1 11 0 100K
E1 10 0 12 13 1
Q1 8 14 12 Q33262
Q2 15 16 0 Q33262
V3 10 17 
R2 13 14 200
R3 17 16 1
B1 12 13 I=0.55M*V(18)*V(8)+I(V3)
R4 12 7 10
R5 15 7 10
C1 12 0 50P
V4 19 0 16
D1 14 19 D33262A
B2 18 0 V=V(50)<1 ? V(11)>1 ? 2 : -2
B3 2 0 I=20U/(1+EXP(V(26)))
X1 21 22 LIM33262 {K=1 PLIM=100 NLIM=100 }
E2 21 0 9 1 20
V5 24 0 6.4
D2 2 24 D33262
I1 0 2 10U
D3 25 20 D33262
D4 25 2 D33262
C2 26 0 100P
R6 0 26 2.901K
L1 22 26 3.161M
X2 23 30 LIM33262 {K=10 PLIM=16 NLIM=16 }
V7 3 23 1.6
B4 32 0 V=V(30)/10+1.6
X3 27 31 LIM33262 {K=10 PLIM=8.75 NLIM=8.75 }
V8 2 27 2.875
B5 28 0 V=V(31)/10+2.875
B6 29 0 V=544M*(V(28)-1.98)*V(32)+41.7M*(V(28)-1.98)
X4 29 38 LIM33262 {K=1 PLIM=1.55 NLIM=1.55 }
C3 34 0 10P IC=0
R9 4 34 20K
B7 36 0 V=V(34)>V(33) ? 0 : 2
R10 37 45 40K
C4 45 0 10P
VOFFSET 33 38 9M
B8 35 0 V=V(45)>2.7 ? 0 : 2
V9 39 46 32.5
D5 8 39 D33262A
V10 40 0 1.2
D6 5 43 D33262A
V11 43 0 6
S2 0 42 49 0 IDET_INPUT
R13 42 9 100K
E3 37 0 1 0 1
E4 57 0 5 0 1
R14 57 49 32K
C5 49 0 10P IC=0
X5 47 48 50 51 RS33262  {TD=1N }
B9 47 0 V=V(44)>1 ? V(59)>1 ? 2 : 0
B10 48 0 V=V(47)>1 ? V(54)>1 ? 0 : V(52)>1.667 ? 0 : 2
D7 52 9 D33262A
B11 52 0 I=V(44)>1 ? V(42)>1 ? V(50)>1 ? V(11)>1 ?  -10U : 2M
D8 0 52 D33262A
C6 52 0 2.8N IC=-0.673
V13 53 0 PULSE 0 2
B13 8 0 I=V(11)<1 ? V(8)/28K : 81.6U*V(8)+7.847M
R17 46 0 454
D9 40 5 D33262A
X6 44 54 60 59 RS33262  {TD=1N }
B14 44 0 V=V(53)>1 ? V(35)>1 ? V(36)>1 ? 2 : 0
B16 54 0 V=V(44)<1 ? 2 : V(52)>1.667 ? 0 : V(42)
V14 20 0 1.7
I4 0 25 680U
.ENDS
****************
*SRC=MC34063A;MC34063A;ON Semiconductor;DC-DC;Gated Osc. 1.5A
*SYM=MC34063
*
* |=======================================================
* |                     MC34063A        REV - 12/23/03
* |                (IsSpice version)
* |                ON SEMICONDUCTOR
* |        DC-TO-DC CONVERTER CONTROL CIRCUITS
* |
* | This model was developed by
* | Magnetico Inc.
* | 182 Morris Avenue
* | Holtsville, NY 11742
* |
* | Copyright 2002 Magnetico
* | All Rights Reserved
* |
* | The content of this model is subject to change
* | without notice and may not be modified or altered
* | without permission from ON Semiconductor. This model
* | has been carefully checked and is believed to be
* | accurate, however neither Magnetico nor ON Semiconductor
* | assume liability for the use of this model or the
* | results obtained from using it.
* |
* | For more information regarding modeling services,
* | model libraries or simulation productors, please
* | call Magnetico at (631) 654-0253 ext 116 or 106.
* | email: Sales@Magnetico.com.
* |=======================================================
*by Kehinde Omolayo
*******
*SRC=MC34063;MC34063;ON Semiconductor;DC-DC;Gated Osc. 1.5A
*SYM=MC34063
.SUBCKT MC34063 1 2 3 4 5 6 7 8
*Terminal ID
*Switch Collector=1 Switch Emitter=2 Timing Capacitor=3 GND=4
*Comparator Inverting Input=5 VCC=6 Ipk Sense=7 Driver Collector=8
.MODEL DMC34063 D (CJO=2P N=0.05)
.MODEL QSWITCH NPN BF=75 CJC=2P IS=3E-9 RB=1 RC=0.45 RE=0
+ VJC=.75 VJE=.75 VJS=.75
.MODEL DMC34063 D (CJO=2P N=0.05)
E1 10 0 5 4 1
R1 4 5 10MEG
V1 20 0 PULSE 0 2
E2 11 0 3 4 1
B1 13 0 V=1M/(ABS((27.475-195M*V(12))+(36.002+244M*V(12))*V(9)-
+(302.302+651M*V(12))*V(9)^2)+1F)
E3 12 0 6 4 1
E4 9 0 6 7 1
R2 6 7 10MEG
B2 14 0 V=1M*((-10.765-151M*V(12))+(45.344+864M*V(12))*V(9)-
+(35.99+1.378*V(12))*V(9)^2+(8.341+839M*V(12))*V(9)^3)
B4 15 0 V=V(9)>0.32 ? V(14) : V(13)
C1 19 0 10P
B5 16 0 V= V(20)<1 ? 2 :  V(24)>1 ? 2 : V(19)>1 ? 0 : 2
R3 16 17 150
C2 17 0 10P
B6 18 0 V=V(20)<1 ? 0 : V(24)>1 ? 0 : V(11)<0 ? 2 : V(17)>1 ? 0 : 2
R4 18 19 150
D1 4 3 DMC34063
D2 3 6 DMC34063
C3 3 4 66P
B7 4 3 I=V(17)>1 ? -(224.4U+2.359U*V(12)) : V(15)
C5 23 0 10P
B9 21 0 V= V(20)<1 ? 2 : V(17)>1 ? 2 : V(26)>1 ? 0 : 2
R5 27 26 150
C6 26 0 10P
B10 27 0 V=V(20)<1 ? 0 : V(17)>1 ? 0 : V(10)<1.25 ? 2 : V(23)>1 ? 0 : 2
R6 21 23 150
B12 33 0 V=V(11)>(443M+71M*V(12)) ? 2 : 0
R13 33 24 1K
C8 24 0 10P
Q1 8 30 25 QSWITCH
Q2 1 25 2 QSWITCH
R15 25 2 100
D5 2 30 DMC34063
G1 2 30 26 23 5M
R16 2 4 10MEG
.ENDS
**********
*==========================================================
* NCP1000
* ON Semiconductor
* Integrated Off-Line 100kHz Switching Regulator
*
* This model was developed for ON Semiconductor by:
* AEI Systems, LLC
* 5777 W. Century Blvd. Suite 876
* Los Angeles, California 90045
* Copyright 2002, all rights reserved.
*
* This model is subject to change without notice.
* Users may not directly or indirectly re-sell or 
* re-distribute this model. This model may not 
* be used, modified, or altered 
* without the consent of ON Semiconductor. 
*
* For more information regarding modeling services,
* model libraries and simulation products, please
* call AEi Systems at (310) 863-8034, or contact 
* AEi by email: info@aeng.com. http://www.AENG.com
*
* Revision: 1.0 
*==========================================================
*********
*SRC=NCP1000;NCP1000;ON Semiconductor;Monolithic Switchers;NCP1000 500mA 18ohms
*SYM=NCP1000
.SUBCKT NCP1000 1 2 3 4 5 6 7 8
*TERMINAL IDENTIFICATION NUMBERS ARE:
*VCC=1 FEEDBACK INPUT=2 STARTUP=4 
*POWER SWITCH CIRCUIT=5 GND=3, 6, 7, 8.
.MODEL D1000 D (RS=0.78 N=0.05 IS=7.075E-9 
+ CJO=4P TT=7.2N M=.4 VJ=.657 BV=100 IBV=100U)
.MODEL JN1000 NJF (VTO=-15.00 BETA=2.90E-03 LAMBDA=5.16M
+ RD=4K RS=4K IS=8.74E-15
+ PB=1.00 FC=.5 CGS=1.35E-11 CGD=4.00E-12 AF=1 KF=2.65E-17)
.SUBCKT RS1000 2 3 4 5 {TD=1N}
C1 11 0 10P
R3 10 8 {TD/6.9315P}
C3 8 0 10P
B1 10 0 V=V(2)>1 ? V(5)>1 ? 0 : 2
B2 16 0 V=V(3)>1 ? V(4)>1 ? 0 : 2
B5 4 0 V=V(8)>1 ? 2 : 0
B6 5 0 V=V(11)>1 ? 2 : 0
R1 16 11 {TD/6.9315P}
.ENDS
.SUBCKT T1000 18   17   15 16 {TD=1N}
*--------------SET TOGGLE Q QB
*TOGGLE FLIP_FLOP
R2 3 19 {TD/6.9315P}
B1 2 0 V=V(3)>1 ? 0 : 2
C4 0 7 10P
R4 7 4 {TD/6.9315P}
B2 14 0 V=V(7)>1 ? 0 : 2
C6 0 10 10P
R6 10 5 {TD/6.9315P}
B3 15 0 V=V(10)>1 ? 0 : 2
C8 0 13 10P
R8 13 8 {TD/6.9315P}
B4 16 0 V=V(13)>1 ? 0 : 2
B5 19 0 V=V(18)<1 ? 2 : V(17)<1 ? 0 : V(2)<1 ? V(14) :
+  V(14)>1 ? V(16)>1 ? V(14) : 0
B6 4 0 V=V(18)<1 ? 0 : V(17)<1 ? 0 : V(14)>1 ? V(16)>1 ? 0 : V(2)
B7 5 0 V=V(18)<1 ? 0 : V(2)<1 ? 0 : V(16)
B8 8 0 V=V(18)<1 ? 2 : V(2)<1 ? 2 : V(14)<1 ? 0 : V(15)
C2 0 3 10P
.ENDS
.SUBCKT NCP1000Q 10 20 30
*     TERMINALS:  D  G  S
M1   1  2  3  3  DMOS L=1U W=1U
RD  10  1  0.949
RS  40  3  51M
RG  20  2  30
CGS  2  3  341P
EGD 12  0  2  1  1
VFB 14  0  0
FFB  2  1  VFB  1
CGD 13 14  436P
R1  13  0  1
D1  12 13  DLIM
DDG 15 14  DCGD
R2  12 15  1
D2  15  0  DLIM
DSD  3 10  DSUB
LS  30 40  7.5N
.MODEL DMOS NMOS (LEVEL=1 LAMBDA=2M VTO=3.1 KP=0.224)
.MODEL DCGD D (CJO=436P VJ=0.6 M=0.68)
.MODEL DSUB D (IS=4.15N N=1.5 RS=0.7 BV=700 CJO=340P 
+VJ=0.8 M=0.42 TT=250N)
.MODEL DLIM D (IS=100U)
.ENDS 
B2 1 0 I=V(14)>1 ? 1M+0.1M*V(11) : 0
X1 12 13 14 15 RS1000 {TD=1N }
B3 12 0 V=V(13)<1 ? 2 : V(1)>8.5 ? 0 : 2
B4 13 0 V=V(1)<7.5 ? 0 : V(9)
V2 9 0 PULSE 0 2
D2 0 1 D1000
D3 1 17 D1000
J1 4 0 17 JN1000
B5 17 1 I=V(14)>1 ? 20U : 5M
X2 19 14 20 21 T1000 {TD=5N }
X3 19 20 22 23 T1000 {TD=5N }
X4 19 22 24 25 T1000 {TD=5N }
B6 11 0 V=V(14)>1 ? V(21)>1 ? V(23)<1 ? V(25)<1 ? 2 : 0
B7 19 0 V=I(V3)>18M ? 0 : V(9)
V4 26 0 PULSE 0 2 0 1N 1N 7.2U 10U
V6 28 0 PULSE 4.1 2.7 0 7.2U 2.799U 1N 10U
V7 29 0 10
R2 2 0 2.7K
D5 2 29 D1000
R3 2 30 220.736K
C2 30 0 0.1N
B8 27 0 V=V(43)<1 ? 2 : V(26)
X5 43 27 16 33 RS1000 {TD=1N }
B9 43 0 V=V(30)<V(28) ? V(40)<1 ? V(9) : 0
B10 35 0 V=V(11)>1 ? V(26)>1 ? V(34)<1 ? 8 : 0
B11 32 0 V=V(31)>1 ? V(27)>1 ? 0 : 2
D4 1 10 D1000
V3 10 0 8.55
X6 46 35 37 NCP1000Q
V10 37 0 
B14 42 0 V=I(V10)>0.48 ? 2 : 0
R6 42 40 21.78K
C4 40 0 10P
R7 46 5 11
X7 31 32 34 47 RS1000 {TD=1N }
B15 31 0 V=V(43)>1 ? V(33)>1 ? 2 : 0
.ENDS
************
*==========================================================
* NCP1001
* ON Semiconductor
* Integrated Off-Line 100kHz Switching Regulator
*
* This model was developed for ON Semiconductor by:
* AEI Systems, LLC
* 5777 W. Century Blvd. Suite 876
* Los Angeles, California 90045
* Copyright 2002, all rights reserved.
*
* This model is subject to change without notice.
* Users may not directly or indirectly re-sell or 
* re-distribute this model. This model may not 
* be used, modified, or altered 
* without the consent of ON Semiconductor. 
*
* For more information regarding modeling services,
* model libraries and simulation products, please
* call AEi Systems at (310) 863-8034, or contact 
* AEi by email: info@aeng.com. http://www.AENG.com
*
* Revision: 1.0 
*==========================================================
*********
*SRC=NCP1001;NCP1001;ON Semiconductor;Monolithic Switchers;NCP1001 1A 9ohms
*SYM=NCP1000
.SUBCKT NCP1001 1 2 3 4 5 6 7 8
*TERMINAL IDENTIFICATION NUMBERS ARE:
*VCC=1 FEEDBACK INPUT=2 STARTUP=4 
*POWER SWITCH CIRCUIT=5 GND=3, 6, 7, 8.
.MODEL D1000 D (RS=0.78 N=0.05 IS=7.075E-9 
+ CJO=4P TT=7.2N M=.4 VJ=.657 BV=100 IBV=100U)
.MODEL JN1000 NJF (VTO=-15.00 BETA=2.90E-03 LAMBDA=5.16M
+ RD=4K RS=4K IS=8.74E-15
+ PB=1.00 FC=.5 CGS=1.35E-11 CGD=4.00E-12 AF=1 KF=2.65E-17)
.SUBCKT RS1000 2 3 4 5 {TD=1N}
C1 11 0 10P
R3 10 8 {TD/6.9315P}
C3 8 0 10P
B1 10 0 V=V(2)>1 ? V(5)>1 ? 0 : 2
B2 16 0 V=V(3)>1 ? V(4)>1 ? 0 : 2
B5 4 0 V=V(8)>1 ? 2 : 0
B6 5 0 V=V(11)>1 ? 2 : 0
R1 16 11 {TD/6.9315P}
.ENDS
.SUBCKT T1000 18   17   15 16 {TD=1N}
*--------------SET TOGGLE Q QB
*TOGGLE FLIP_FLOP
R2 3 19 {TD/6.9315P}
B1 2 0 V=V(3)>1 ? 0 : 2
C4 0 7 10P
R4 7 4 {TD/6.9315P}
B2 14 0 V=V(7)>1 ? 0 : 2
C6 0 10 10P
R6 10 5 {TD/6.9315P}
B3 15 0 V=V(10)>1 ? 0 : 2
C8 0 13 10P
R8 13 8 {TD/6.9315P}
B4 16 0 V=V(13)>1 ? 0 : 2
B5 19 0 V=V(18)<1 ? 2 : V(17)<1 ? 0 : V(2)<1 ? V(14) :
+  V(14)>1 ? V(16)>1 ? V(14) : 0
B6 4 0 V=V(18)<1 ? 0 : V(17)<1 ? 0 : V(14)>1 ? V(16)>1 ? 0 : V(2)
B7 5 0 V=V(18)<1 ? 0 : V(2)<1 ? 0 : V(16)
B8 8 0 V=V(18)<1 ? 2 : V(2)<1 ? 2 : V(14)<1 ? 0 : V(15)
C2 0 3 10P
.ENDS
.SUBCKT NCP1000Q 10 20 30
*     TERMINALS:  D  G  S
M1   1  2  3  3  DMOS L=1U W=1U
RD  10  1  0.949
RS  40  3  51M
RG  20  2  30
CGS  2  3  341P
EGD 12  0  2  1  1
VFB 14  0  0
FFB  2  1  VFB  1
CGD 13 14  436P
R1  13  0  1
D1  12 13  DLIM
DDG 15 14  DCGD
R2  12 15  1
D2  15  0  DLIM
DSD  3 10  DSUB
LS  30 40  7.5N
.MODEL DMOS NMOS (LEVEL=1 LAMBDA=2M VTO=3.1 KP=0.224)
.MODEL DCGD D (CJO=436P VJ=0.6 M=0.68)
.MODEL DSUB D (IS=4.15N N=1.5 RS=0.7 BV=700 CJO=340P 
+VJ=0.8 M=0.42 TT=250N)
.MODEL DLIM D (IS=100U)
.ENDS 
B2 1 0 I=V(14)>1 ? 1M+0.2M*V(11) : 0 
X1 12 13 14 15 RS1000 {TD=1N }
B3 12 0 V=V(13)<1 ? 2 : V(1)>8.5 ? 0 : 2
B4 13 0 V=V(1)<7.5 ? 0 : V(9)
V2 9 0 PULSE 0 2
D2 0 1 D1000
D3 1 17 D1000
J1 4 0 17 JN1000
B5 17 1 I=V(14)>1 ? 20U : 5M
X2 19 14 20 21 T1000 {TD=5N }
X3 19 20 22 23 T1000 {TD=5N }
X4 19 22 24 25 T1000 {TD=5N }
B6 11 0 V=V(14)>1 ? V(21)>1 ? V(23)<1 ? V(25)<1 ? 2 : 0
B7 19 0 V=I(V3)>18M ? 0 : V(9)
V4 26 0 PULSE 0 2 0 1N 1N 7.2U 10U
V6 28 0 PULSE 4.1 2.7 0 7.2U 2.799U 1N 10U
V7 29 0 10
R2 2 0 2.7K
D5 2 29 D1000
R3 2 30 220.736K
C2 30 0 0.1N
B8 27 0 V=V(43)<1 ? 2 : V(26)
X5 43 27 16 33 RS1000 {TD=1N }
B9 43 0 V=V(30)<V(28) ? V(40)<1 ? V(9) : 0
B10 35 0 V=V(11)>1 ? V(26)>1 ? V(34)<1 ? 8 : 0
B11 32 0 V=V(31)>1 ? V(27)>1 ? 0 : 2
D4 1 10 D1000
V3 10 0 8.55
X6 46 35 37 NCP1000Q
V10 37 0 
B14 42 0 V=I(V10)>0.96 ? 2 : 0
R6 42 40 21.78K
C4 40 0 10P
R7 46 5 5
X7 31 32 34 47 RS1000 {TD=1N }
B15 31 0 V=V(43)>1 ? V(33)>1 ? 2 : 0
.ENDS
************
*==========================================================
* NCP1002
* ON Semiconductor
* Integrated Off-Line 100kHz Switching Regulator
*
* This model was developed for ON Semiconductor by:
* AEI Systems, LLC
* 5777 W. Century Blvd. Suite 876
* Los Angeles, California 90045
* Copyright 2002, all rights reserved.
*
* This model is subject to change without notice.
* Users may not directly or indirectly re-sell or 
* re-distribute this model. This model may not 
* be used, modified, or altered 
* without the consent of ON Semiconductor. 
*
* For more information regarding modeling services,
* model libraries and simulation products, please
* call AEi Systems at (310) 863-8034, or contact 
* AEi by email: info@aeng.com. http://www.AENG.com
*
* Revision: 1.0 
*==========================================================
*********
*SRC=NCP1002;NCP1002;ON Semiconductor;Monolithic Switchers;NCP1002 1.5A 6ohms
*SYM=NCP1000
.SUBCKT NCP1002 1 2 3 4 5 6 7 8
*TERMINAL IDENTIFICATION NUMBERS ARE:
*VCC=1 FEEDBACK INPUT=2 STARTUP=4 
*POWER SWITCH CIRCUIT=5 GND=3, 6, 7, 8.
.MODEL D1000 D (RS=0.78 N=0.05 IS=7.075E-9 
+ CJO=4P TT=7.2N M=.4 VJ=.657 BV=100 IBV=100U)
.MODEL JN1000 NJF (VTO=-15.00 BETA=2.90E-03 LAMBDA=5.16M
+ RD=4K RS=4K IS=8.74E-15
+ PB=1.00 FC=.5 CGS=1.35E-11 CGD=4.00E-12 AF=1 KF=2.65E-17)
.SUBCKT RS1000 2 3 4 5 {TD=1N}
C1 11 0 10P
R3 10 8 {TD/6.9315P}
C3 8 0 10P
B1 10 0 V=V(2)>1 ? V(5)>1 ? 0 : 2
B2 16 0 V=V(3)>1 ? V(4)>1 ? 0 : 2
B5 4 0 V=V(8)>1 ? 2 : 0
B6 5 0 V=V(11)>1 ? 2 : 0
R1 16 11 {TD/6.9315P}
.ENDS
.SUBCKT T1000 18   17   15 16 {TD=1N}
*--------------SET TOGGLE Q QB
*TOGGLE FLIP_FLOP
R2 3 19 {TD/6.9315P}
B1 2 0 V=V(3)>1 ? 0 : 2
C4 0 7 10P
R4 7 4 {TD/6.9315P}
B2 14 0 V=V(7)>1 ? 0 : 2
C6 0 10 10P
R6 10 5 {TD/6.9315P}
B3 15 0 V=V(10)>1 ? 0 : 2
C8 0 13 10P
R8 13 8 {TD/6.9315P}
B4 16 0 V=V(13)>1 ? 0 : 2
B5 19 0 V=V(18)<1 ? 2 : V(17)<1 ? 0 : V(2)<1 ? V(14) :
+  V(14)>1 ? V(16)>1 ? V(14) : 0
B6 4 0 V=V(18)<1 ? 0 : V(17)<1 ? 0 : V(14)>1 ? V(16)>1 ? 0 : V(2)
B7 5 0 V=V(18)<1 ? 0 : V(2)<1 ? 0 : V(16)
B8 8 0 V=V(18)<1 ? 2 : V(2)<1 ? 2 : V(14)<1 ? 0 : V(15)
C2 0 3 10P
.ENDS
.SUBCKT NCP1000Q 10 20 30
*     TERMINALS:  D  G  S
M1   1  2  3  3  DMOS L=1U W=1U
RD  10  1  0.949
RS  40  3  51M
RG  20  2  30
CGS  2  3  341P
EGD 12  0  2  1  1
VFB 14  0  0
FFB  2  1  VFB  1
CGD 13 14  436P
R1  13  0  1
D1  12 13  DLIM
DDG 15 14  DCGD
R2  12 15  1
D2  15  0  DLIM
DSD  3 10  DSUB
LS  30 40  7.5N
.MODEL DMOS NMOS (LEVEL=1 LAMBDA=2M VTO=3.1 KP=0.224)
.MODEL DCGD D (CJO=436P VJ=0.6 M=0.68)
.MODEL DSUB D (IS=4.15N N=1.5 RS=0.7 BV=700 CJO=340P 
+VJ=0.8 M=0.42 TT=250N)
.MODEL DLIM D (IS=100U)
.ENDS 
B2 1 0 I=V(14)>1 ? 1M+0.3M*V(11) : 0
X1 12 13 14 15 RS1000 {TD=1N }
B3 12 0 V=V(13)<1 ? 2 : V(1)>8.5 ? 0 : 2
B4 13 0 V=V(1)<7.5 ? 0 : V(9)
V2 9 0 PULSE 0 2
D2 0 1 D1000
D3 1 17 D1000
J1 4 0 17 JN1000
B5 17 1 I=V(14)>1 ? 20U : 5M
X2 19 14 20 21 T1000 {TD=5N }
X3 19 20 22 23 T1000 {TD=5N }
X4 19 22 24 25 T1000 {TD=5N }
B6 11 0 V=V(14)>1 ? V(21)>1 ? V(23)<1 ? V(25)<1 ? 2 : 0
B7 19 0 V=I(V3)>18M ? 0 : V(9)
V4 26 0 PULSE 0 2 0 1N 1N 7.2U 10U
V6 28 0 PULSE 4.1 2.7 0 7.2U 2.799U 1N 10U
V7 29 0 10
R2 2 0 2.7K
D5 2 29 D1000
R3 2 30 220.736K
C2 30 0 0.1N
B8 27 0 V=V(43)<1 ? 2 : V(26)
X5 43 27 16 33 RS1000 {TD=1N }
B9 43 0 V=V(30)<V(28) ? V(40)<1 ? V(9) : 0
B10 35 0 V=V(11)>1 ? V(26)>1 ? V(34)<1 ? 8 : 0
B11 32 0 V=V(31)>1 ? V(27)>1 ? 0 : 2
D4 1 10 D1000
V3 10 0 8.55
X6 46 35 37 NCP1000Q
V10 37 0 
B14 42 0 V=I(V10)>1.43 ? 2 : 0
R6 42 40 21.78K
C4 40 0 10P
R7 46 5 2
X7 31 32 34 47 RS1000 {TD=1N }
B15 31 0 V=V(43)>1 ? V(33)>1 ? 2 : 0
.ENDS
************
*==========================================================
* NCP1000 SERIES STATE-SPACE-AVERAGE (SSA) MODEL
* ON Semiconductor
* Integrated Off-Line 100kHz Switching Regulator
*
* This model was developed for ON Semiconductor by:
* AEI Systems, LLC
* 5777 W. Century Blvd. Suite 876
* Los Angeles, California 90045
* Copyright 2002, all rights reserved.
*
* This model is subject to change without notice.
* Users may not directly or indirectly re-sell or 
* re-distribute this model. This model may not 
* be used, modified, or altered 
* without the consent of ON Semiconductor. 
*
* For more information regarding modeling services,
* model libraries and simulation products, please
* call AEi Systems at (310) 216-1144, or contact 
* AEi by email: info@aeng.com. http://www.AENG.com
*
* Revision: 1.0 
*==========================================================
*********
*SRC=NCP1000_AC;NCP1000_AC;ON Semiconductor;Monolithic Switchers;NCP100X Averaged model
*SYM=NCP1000A
.SUBCKT NCP1000_AC 7 2 3 4 14 30 {LP=1M LK=30U RDS=13}
*TERMINAL IDENTIFICATIONS AND NOTES:
*INPUT VOLTAGE=7 DUTY CYCLE OUTPUT=2 FEEDBACK INPUT=3
*POSITIVE INPUT SUPPLY VOLTAGE (VCC)=4
*OUTPUT VOLTAGE=14
*LP PARAMETER=PRIMARY INDUCTANCE
*LK PARAMETER=PRIMARY LEAKAGE INDUCTANCE
*RDS=POWER SWITCH ON-STATE RESISTANCE
*OVER CURRENT LIMIT CIRCUIT IS NOT INCLUDED
.MODEL D1000 D (RS=0.78 N=0.05 IS=7.075E-9 
+ CJO=4P TT=7.2N M=.4 VJ=.657 BV=100 IBV=100U)
.MODEL D100SSA D N=0.05
.SUBCKT LIMITNCP 1 2
RIN 1 0 1E12
E1 3 0 0 1 1
RC1 2 4 1MEG
C1 2 4 1F IC=0
R1 3 4 1MEG
E2 2 0 0 4 1E6
VN 5 2 -2.7597
DN 4 5 DN
.MODEL DN D(IS=1E-12 N=.14319)
VP 2 6 4.0403
DP 6 4 DN
.ENDS
R1 3 0 2.7K
D1 30 1 D1000
R2 30 11 220.736K
C1 11 0 0.1N
B1 7 0 I=I(V7)*V(2)/(1-V(2))+V(9)*I(V3)/V(17)*{(LP+LK)/LP}
D2 0 4 D1000
D3 4 5 D1000
V2 5 0 8.55
I1 4 0 1.2M
B2 8 0 V={LP/(LP+LK)}*V(6)*V(2)/(1-V(2))
B3 9 0 V={1/(200K*(LP+LK))}*(V(2)*V(17))^2/(1F+I(V3)+I(V7))
X1 11 10 LIMITNCP
E1 2 12 0 10 0.514
V5 12 0 2.109
B4 17 0 V={200K*(LP+LK)}*V(7)/({200K*(LP+LK)}+{RDS}*V(2)^2)+1U
V7 8 13
B5 6 0 V=V(7)-{RDS}*(I(V7)+I(V3))*V(2)/(1-V(2))+1U
V3 9 40 
D4 13 14 D100SSA
D5 40 14 D100SSA
D6 0 14 D100SSA
V1 1 0 10
D7 0 7 D100SSA
.ENDS
************
*==========================================================
* CS5165
* ON Semiconductor
* Synchronous BUCK Controller
*
* This model was developed for ON Semiconductor by:
* AEI Systems, LLC
* 5777 W. Century Blvd. Suite 876
* Los Angeles, California 90045
* Copyright 2002, all rights reserved.
*
* This model is subject to change without notice.
* Users may not directly or indirectly re-sell or 
* re-distribute this model. This model may not 
* be used, modified, or altered 
* without the consent of ON Semiconductor. 
*
* For more information regarding modeling services,
* model libraries and simulation products, please
* call AEi Systems at (310) 863-8034, or contact 
* AEi by email: info@aeng.com. http://www.AENG.com
*
* Revision: 1.0
*==========================================================
*************
*SRC=CS5165;CS5165;ON Semiconductor;DC-DC;Synchronous Buck Controller
*SYM=CS5165
.SUBCKT CS5165 33  32   31   24   27 40   6    19     9   46      62   44      2     64   26   8
* Nodes       VID0 VID1 VID2 VID3 SS VID4 COFF Enable Vcc Gate(H) PGnd Gate(L) PwrGd LGnd Comp VFB
*
R7 19 7 20K
V2 17 64 1.25
D1 7 17 DN
I1 9 7 7U
R8 7 64 100MEG
X2 7 17 64 20 COMP {IBIAS=1P IOS=1P VOS=1P TD=10N RSAT=10 VSAT=.1 COUT=1P}
R9 18 20 1K
E1 21 0 20 64 1
R11 18 1 1K
X3 8 26 64 1 COMP {IBIAS=1P IOS=1P VOS=1P TD=10N RSAT=10 VSAT=.1 COUT=1P}
V6 34 18 1
X5 34 40 24 31 32 33 22 VID4
B3 11 64 V=(100 * ABS(V(8,22)) / V(22)) < 8.5 ? V(20) > 2.5 ? 10 : 0
R19 11 36 100K
C6 36 64 1N
D3 36 11 DN
D4 38 36 D2
Q10 39 38 64 QN
R20 34 39 10K
R21 39 2 250
S1 42 64 9 64 SVCC
R22 42 9 100K
B4 56 62 V=V(5) > 2 ? V(16) > 2.5 ? V(9) : 0
B5 41 62 V=V(46) < 2 ? V(9) : 0
R23 56 46 5
R24 41 44 5
X8 8 10 64 48 COMP {IBIAS=1P IOS=1P VOS=1P TD=10N RSAT=10 VSAT=.1 COUT=1P}
R25 34 48 1K
R26 34 10 4K
R27 10 64 1K
X9 21 1 48 6 5 64 LOGIC
X10 27 4 64 12 COMP {IBIAS=1P IOS=1P VOS=1P TD=10N RSAT=10 VSAT=.1 COUT=1P}
R28 34 12 1K
R29 34 4 10K
R30 4 64 10K
X11 13 27 64 15 COMP {IBIAS=1P IOS=1P VOS=1P TD=10N RSAT=10 VSAT=.1 COUT=1P}
R31 34 15 1K
R32 34 13 17.2K
R33 13 64 2.8K
X12 0 0 15 14 16 25 FFLOP2
BSS 14 64 V=V(48) < 2.5 ? V(12) > 2.5 ? 5 : 0
R42 27 64 10MEG
BTEST 27 64 I=V(16) > 2.5 ? -60U : 2U
D8 27 18 DN
R44 26 35 1K
Q12 0 28 35 QP
V9 50 64 1
R45 9 64 40K
G3 9 64 9 42 1M
Q13 27 54 64 QN
R47 54 51 100K
BVCC 51 64 V=V(42) < 2.5 ? 0 : 5
G4 64 30 22 8 100U
R48 30 64 100MEG
C20 30 64 8P
E4 55 0 30 0 1
D10 64 30 DCLAMP
R49 55 58 100
D11 58 60 DN
I4 60 64 65U
Q14 64 60 61 QP
D12 26 61 DN
I5 34 26 1M
D13 50 27 DN
Q15 0 27 28 QP
BREF 34 64 V=V(9) - .5 > 5 ? 5 : V(9) - .5
.ENDS
*
.SUBCKT LOGIC   18   25  48     6    5   80
*              BIAS PWM LVCOMP COFF GATE GND
.MODEL QP PNP
.MODEL QN NPN IS=3.2F 
.MODEL D2 D BV=4 IBV=10U
.MODEL DN D
.MODEL SVCC SW VT=3.91 VH=.04 RON=1 ROFF=1MEG
R1 1 80 7K
Q3 6 1 18 QP
Q4 6 4 80 QN
R2 5 3 1K
Q5 6 3 4 QN
R3 3 80 1K
*X1 25 80 0 59 10 5 FFLOP2
X1 25 80 25 59 10 5 FFLOP2
B2 22 80 V=V(51) > 2.85 ? 5 : 0
C3 25 80 10P IC=0
D2 22 25 DN
R12 25 80 100K
R28 55 80 10K
R29 54 80 10K
B_OR 50 80 V=V(55) > 2.5 ? 5 : V(54) > 2.5 ? 5 : 0
R30 50 49 1K
Q11 52 52 18 QP
R31 52 80 7K
Q12 51 52 18 QP
C9 51 80 5N
Q13 51 53 80 QN
Q14 51 49 53 QN
R32 49 80 1K
BNORM 56 80 V=V(48) < 2.5 ? V(51) > 2.75 ? 5 : 0
BEXTD_TM 58 80 V=V(48) > 2.5 ? V(6) > 2.75 ? 5 : 0
BOR2 59 80 V=V(62) > 2.85 ? V(48) < 2.5 ? 5 : V(6) > 2.85 ? V( 48) > 2.5 ? 5 :0
C10 5 55 200P
C11 10 54 200P
R33 5 64 1K
Q15 61 61 18 QP
R34 61 80 7K
Q16 62 61 18 QP
C12 62 80 5N
Q17 62 63 80 QN
Q18 62 64 63 QN
R35 64 80 1K
Q1 1 1 18 QP
.ENDS LOGIC
*
.SUBCKT VID4 6 1 3 4 2 5 11
* V(1)=VID4 V(3)=VID3
* V(4)=VID2  V(2)=VID1
* V(5)=VID0
R1 6 3 50K
R2 6 1 50K
R3 6 4 50K
R4 6 2 50K
R5 6 5 50K
BDAC 7 0 V=V(1) < 1.25 ? 2.09 : V(5) > 1.25 ? V(2) > 1.25 ? V(4) > 1.25 ? V(3) > 1.25 ? 2.747 : 3.54
BV1 7 8 V=V(1) > 1.25 ? V(5) > 1.25 ? .1 : V(1) < 1.25 ? V(5) > 1.25 ? .05  : 0
B2 8 9 V=V(1) > 1.25 ? V(2) > 1.25 ? .2 : V(1) < 1.25 ? V(2) > 1.25 ? .1  : 0
B3 9 10 V=V(1) > 1.25 ? V(4) > 1.25 ? .4 : V(1) < 1.25 ? V(4) > 1.25 ? .2  : 0
B4 10 11 V=V(1) > 1.25 ? V(3) > 1.25 ? .8 : V(1) < 1.25 ? V(3) > 1.25 ? .4  : 0
.ENDS
*
.SUBCKT FFLOP2 1  2 11 12 5  6
*            CLK D R  S  QB Q 
X1 7 4 2 8 NAND3_0
X2 8 3 10 9 NAND3_0
X3 1 8 10 7 NAND3_1
X4 4 9 1 10 NAND3_0
X5 4 7 6 5 NAND3_1
X6 5 10 3 6 NAND3_0
X7 11 4 INV
X8 12 3 INV
.ENDS FFLOP2
*
.SUBCKT NAND3_0 1 2 3 4
B1 5 0 V= (V(1)>800M) & (V(2)>800M) & (V(3)>800M) ? 0V : 5V
R1 5 4 400
C1 4 0 20P IC=0
.ENDS NAND3_0
.SUBCKT NAND3_1 1 2 3 4
B1 5 0 V= (V(1)>800M) & (V(2)>800M) & (V(3)>800M) ? 0V : 5V
R1 5 4 400
C1 4 0 20P IC=5
.ENDS NAND3_1
.SUBCKT INV 1 2
B1 3 0 V= V(1)>800M ? 0 : 5V
R1 3 2 100
C1 2 0 10P IC=5
.ENDS INV
*
.SUBCKT COMP 6 7 9 2 
.MODEL SCOMP SW (VT=5 RON=.1 ROFF=1MEG)
S1 5 4 8 9 SCOMP
COUT 2 9 1.0000P
VSAT 4 9 100.000M
RSAT 5 2 10.0000 
R3 1 3 1.386
CDELAY 3 9 10.0000N
E1 8 0 3 0 1
VOS 7 12 1.0000P
IBIAS 6 14 1.0000P
V5 14 0 
F1 12 0 V5 1
IOS 12 0 1.0000P
B1 1 9 V=V(12) > V(6) ? 10 : 0
.ENDS
* Discrete models *
.MODEL QP PNP
.MODEL QN NPN IS=3.2F 
.MODEL D2 D BV=4 IBV=10U
.MODEL DN D
.MODEL DCLAMP D BV=5 RS=10 IBV=.01
.MODEL SVCC SW VT=3.91 VH=.04 RON=1 ROFF=1MEG
*************
*SRC=CS5165NEA;CS5165NEA;ON Semiconductor;DC-DC;Synchronous Buck Controller
*SYM=CS5165
.SUBCKT CS5165NEA 33  32   31   24   27 40   6    19     9   46      62   44      2     64   26   8
* Nodes          VID0 VID1 VID2 VID3 SS VID4 COFF Enable Vcc Gate(H) PGnd Gate(L) PwrGd LGnd Comp VFB
*
R7 19 7 20K
V2 17 64 1.25
D1 7 17 DN
I1 9 7 7U
R8 7 64 100MEG
X2 7 17 64 20 COMP {IBIAS=1P IOS=1P VOS=1P TD=10N RSAT=10 VSAT=.1 COUT=1P}
R9 18 20 1K
E1 21 0 20 64 1
R11 18 1 1K
X3 8 35 64 1 COMP {IBIAS=1P IOS=1P VOS=1P TD=10N RSAT=10 VSAT=.1 COUT=1P}
V6 34 18 1
X5 34 40 24 31 32 33 22 VID4
B3 11 64 V=(100 * ABS(V(8,35)) / V(35)) < 8.5 ? V(20) > 2.5 ? 10 : 0
R19 11 36 100K
C6 36 64 1N
D3 36 11 DN
D4 38 36 D2
Q10 39 38 64 QN
R20 34 39 10K
R21 39 2 250
S1 42 64 9 64 SVCC
R22 42 9 100K
B4 56 62 V=V(5) > 2 ? V(16) > 2.5 ? V(9) : 0
B5 41 62 V=V(46) < 2 ? V(9) : 0
R23 56 46 5
R24 41 44 5
X8 8 10 64 48 COMP {IBIAS=1P IOS=1P VOS=1P TD=10N RSAT=10 VSAT=.1 COUT=1P}
R25 34 48 1K
R26 34 10 4K
R27 10 64 1K
X9 21 1 48 6 5 64 LOGIC
X10 27 4 64 12 COMP {IBIAS=1P IOS=1P VOS=1P TD=10N RSAT=10 VSAT=.1 COUT=1P}
R28 34 12 1K
R29 34 4 10K
R30 4 64 10K
X11 13 27 64 15 COMP {IBIAS=1P IOS=1P VOS=1P TD=10N RSAT=10 VSAT=.1 COUT=1P}
R31 34 15 1K
R32 34 13 17.2K
R33 13 64 2.8K
X12 0 0 15 14 16 25 FFLOP2
BSS 14 64 V=V(48) < 2.5 ? V(12) > 2.5 ? 5 : 0
R42 27 64 10MEG
BTEST 27 64 I=V(16) > 2.5 ? -60U : 2U
D8 27 18 DN
R44 22 35 1K
Q12 0 28 35 QP
V9 50 64 1
R45 9 64 40K
G3 9 64 9 42 1M
Q13 27 54 64 QN
R47 54 51 100K
BVCC 51 64 V=V(42) < 2.5 ? 0 : 5
G4 64 30 64 26 100U
R48 30 64 100MEG
C20 30 64 8P
E4 55 0 30 0 1
D10 64 30 DCLAMP
R49 55 58 100
D11 58 60 DN
I4 60 64 65U
Q14 64 60 61 QP
D12 26 61 DN
I5 34 26 1M
D13 50 27 DN
Q15 0 27 28 QP
BREF 34 64 V=V(9) - .5 > 5 ? 5 : V(9) - .5
.ENDS
*
.SUBCKT LOGIC   18   25  48     6    5   80
*              BIAS PWM LVCOMP COFF GATE GND
.MODEL QP PNP
.MODEL QN NPN IS=3.2F 
.MODEL D2 D BV=4 IBV=10U
.MODEL DN D
.MODEL SVCC SW VT=3.91 VH=.04 RON=1 ROFF=1MEG
R1 1 80 7K
Q3 6 1 18 QP
Q4 6 4 80 QN
R2 5 3 1K
Q5 6 3 4 QN
R3 3 80 1K
*X1 25 80 0 59 10 5 FFLOP2
X1 25 80 25 59 10 5 FFLOP2
B2 22 80 V=V(51) > 2.85 ? 5 : 0
C3 25 80 10P IC=0
D2 22 25 DN
R12 25 80 100K
R28 55 80 10K
R29 54 80 10K
B_OR 50 80 V=V(55) > 2.5 ? 5 : V(54) > 2.5 ? 5 : 0
R30 50 49 1K
Q11 52 52 18 QP
R31 52 80 7K
Q12 51 52 18 QP
C9 51 80 5N
Q13 51 53 80 QN
Q14 51 49 53 QN
R32 49 80 1K
BNORM 56 80 V=V(48) < 2.5 ? V(51) > 2.75 ? 5 : 0
BEXTD_TM 58 80 V=V(48) > 2.5 ? V(6) > 2.75 ? 5 : 0
BOR2 59 80 V=V(62) > 2.85 ? V(48) < 2.5 ? 5 : V(6) > 2.85 ? V( 48) > 2.5 ? 5 :0
C10 5 55 200P
C11 10 54 200P
R33 5 64 1K
Q15 61 61 18 QP
R34 61 80 7K
Q16 62 61 18 QP
C12 62 80 5N
Q17 62 63 80 QN
Q18 62 64 63 QN
R35 64 80 1K
Q1 1 1 18 QP
.ENDS LOGIC
*
.SUBCKT VID4 6 1 3 4 2 5 11
* V(1)=VID4 V(3)=VID3
* V(4)=VID2  V(2)=VID1
* V(5)=VID0
R1 6 3 50K
R2 6 1 50K
R3 6 4 50K
R4 6 2 50K
R5 6 5 50K
BDAC 7 0 V=V(1) < 1.25 ? 2.09 : V(5) > 1.25 ? V(2) > 1.25 ? V(4) > 1.25 ? V(3) > 1.25 ? 2.747 : 3.54
BV1 7 8 V=V(1) > 1.25 ? V(5) > 1.25 ? .1 : V(1) < 1.25 ? V(5) > 1.25 ? .05  : 0
B2 8 9 V=V(1) > 1.25 ? V(2) > 1.25 ? .2 : V(1) < 1.25 ? V(2) > 1.25 ? .1  : 0
B3 9 10 V=V(1) > 1.25 ? V(4) > 1.25 ? .4 : V(1) < 1.25 ? V(4) > 1.25 ? .2  : 0
B4 10 11 V=V(1) > 1.25 ? V(3) > 1.25 ? .8 : V(1) < 1.25 ? V(3) > 1.25 ? .4  : 0
.ENDS
*
.SUBCKT FFLOP2 1  2 11 12 5  6
*            CLK D R  S  QB Q 
X1 7 4 2 8 NAND3_0
X2 8 3 10 9 NAND3_0
X3 1 8 10 7 NAND3_1
X4 4 9 1 10 NAND3_0
X5 4 7 6 5 NAND3_1
X6 5 10 3 6 NAND3_0
X7 11 4 INV
X8 12 3 INV
.ENDS FFLOP2
*
.SUBCKT NAND3_0 1 2 3 4
B1 5 0 V= (V(1)>800M) & (V(2)>800M) & (V(3)>800M) ? 0V : 5V
R1 5 4 400
C1 4 0 20P IC=0
.ENDS NAND3_0
.SUBCKT NAND3_1 1 2 3 4
B1 5 0 V= (V(1)>800M) & (V(2)>800M) & (V(3)>800M) ? 0V : 5V
R1 5 4 400
C1 4 0 20P IC=5
.ENDS NAND3_1
.SUBCKT INV 1 2
B1 3 0 V= V(1)>800M ? 0 : 5V
R1 3 2 100
C1 2 0 10P IC=5
.ENDS INV
*
.SUBCKT COMP 6 7 9 2 
.MODEL SCOMP SW (VT=5 RON=.1 ROFF=1MEG)
S1 5 4 8 9 SCOMP
COUT 2 9 1.0000P
VSAT 4 9 100.000M
RSAT 5 2 10.0000 
R3 1 3 1.386
CDELAY 3 9 10.0000N
E1 8 0 3 0 1
VOS 7 12 1.0000P
IBIAS 6 14 1.0000P
V5 14 0 
F1 12 0 V5 1
IOS 12 0 1.0000P
B1 1 9 V=V(12) > V(6) ? 10 : 0
.ENDS
** Discrete models **
.MODEL QP PNP
.MODEL QN NPN IS=3.2F 
.MODEL D2 D BV=4 IBV=10U
.MODEL DN D
.MODEL DCLAMP D BV=5 RS=10 IBV=.01
.MODEL SVCC SW VT=3.91 VH=.04 RON=1 ROFF=1MEG
*************
*==========================================================
* CS5171
* ON Semiconductor
* 1.5A 280 kHz Boost Regulator
*
* This model was developed for ON Semiconductor by:
* AEI Systems, LLC
* 5777 W. Century Blvd. Suite 876
* Los Angeles, California 90045
* Copyright 2002, all rights reserved.
*
* This model is subject to change without notice.
* Users may not directly or indirectly re-sell or 
* re-distribute this model. This model may not 
* be used, modified, or altered 
* without the consent of ON Semiconductor. 
*
* For more information regarding modeling services,
* model libraries and simulation products, please
* call AEi Systems at (310) 863-8034, or contact 
* AEi by email: info@aeng.com. http://www.AENG.com
*
* Revision: 2/18/02, version 1.1
*==========================================================
******************
*SRC=CS5171;CS5171;ON Semiconductor;DC-DC;1.5A Boost
*SYM=CS5171
.SUBCKT CS5171 Vcc Sync FB com vc Pgnd Vsw
*
.SUBCKT X1_osc Sync rate RAMP com Q R
C1 RAMP com 100p
B1 3 com V=tanh(100*(1-v(RAMP)+.5*v(2)))-.9
B2 com RAMP I=v(rate)*v(2)
R2 3 2 1
C2 2 com 1n
X3 16 18 com 13 X_gate {  }
B3 6 com V=(1+tanh(1000*(.1-v(RAMP))))*2.5 ; rate equation
R4 18 5 100
R3 rate com 1g
X4 R R com 20 X_gate {  }
M1 RAMP 5 com com SST211
.MODEL SST211 NMOS Level=1 CBD=5.13E-12 CBS=6.16E-12
+ CGBO=2.34E-08 CGDO=3.00E-09 CGSO=3.60E-09 GAMMA=5.00E-06
+ IS=3.25E-14 KP=1.00E-02 LAMBDA=1.40E-02 MJ=.46 PB=0.80
+ PHI=0.75 RD=3.00E+01 RS=3.60E+01 TOX=3.00E-07 VTO=0.80
X5 13 6 com 18 X_gate {  }
X6 sync 17 com 16 X_gate {  }
X7 sync 4 com 17 X_gate {  }
X1 9 Q com 7 X_gate {  }
X2 7 12 com Q X_gate {  }
R5 RAMP com 10meg
R6 6 9 1k
C3 9 com 100p
X8 6 20 com 12 X1_X8_gate {  }
R7 sync 4 1k
C5 4 com 100p
.ENDS 

.SUBCKT X2_ErrorAmp FB com out
B1 I1 com V=sqrt((-25m-v(Vfb))^2)*12
V5 7 0 DC=1.2
B3 com out I=40u*tanh(sinh(v(I1))^1.5)-12u*v(i2)
B4 I2 com V=expl(200*(5m+v(vfb)),1)
V3 Vfb FB DC=-1.276
R1 FB com 1g
D1 out 7 DN916
.MODEL DN916 D BV=133.3 CJO=1.75P IBV=10U IS=442P M=.333
+ N=1.70 RS=.42 TT=3.6N VJ=.75
D2 7 out DN916
R3 out com 1meg
C1 out com 120p
.ENDS 

.SUBCKT X_gate A B com out
R1 A B 1meg
B1 3 com V=(1+tanh(1000*(1.5-v(A))))*(1+tanh(1000*(1.5-v(B))))
R2 3 out 1
C1 out com 1n
.ENDS 

.SUBCKT X1_X8_gate A B com out
R1 A B 1meg
B1 3 com V=4-(1+tanh(1000*(1.5-v(A))))*(1+tanh(1000*(1.5-v(B))))
R2 3 out 1
C1 out com 1n
.ENDS 

X1 1 2 ramp com 5 3 X1_osc {  }
R9 5 16 100
X2 FB com vc X2_ErrorAmp {  }
R12 sync 19 500k
B1 3 com V=1+tanh(1000*(v(vc)-v(sum)))
R2 7 Pgnd 100k
R3 16 7 7
R4x 8 Pgnd 63m
Q3 Vsw 7 8 Q2SC1847 
.MODEL Q2SC1847 NPN BF=250 BR=4 CJC=82.8P CJE=256P IKF=.9
+ IKR=1.35 IS=152F ISE=60.8P MJC=.3 MJE=.5 NE=2 NF=1 NR=1
+ RB=.263 RC=26.3M RE=65.7M TF=1.06N TR=737N VAF=113 VAR=16
+ VJC=.3 VJE=1.1 XTB=1.5
B2 27 com V=5*v(8)+.2*v(ramp)+1.05
V2 19 com DC=1.5
X4 vcc vcc com 17 X_gate {  }
R4 22 20 100
B3 2 com V=(56u+(2*56u)*(1+tanh(400*(v(FB)-.402))))*0.25*(v(enable))
M1 23 20 com com SST211
.MODEL SST211 NMOS Level=1 CBD=5.13E-12 CBS=6.16E-12
+ CGBO=2.34E-08 CGDO=3.00E-09 CGSO=3.60E-09 GAMMA=5.00E-06
+ IS=3.25E-14 KP=1.00E-02 LAMBDA=1.40E-02 MJ=.46 PB=0.80
+ PHI=0.75 RD=3.00E+01 RS=3.60E+01 TOX=3.00E-07 VTO=0.80
B4 22 com V=1+tanh(100*(v(sync)-0.85))
C2 23 18 1n
X6 17 23 com enable X_gate {  }
R14 23 vcc 1meg
B5 1 com V=1+tanh(100*(v(sync)-2.5))
R11 23 18 100k
X8 17 17 com 18 X_gate {  }
D3 16 Vsw BAT83  M=2
.MODEL BAT83 D BV=9.00E+01 CJO=1.31E-12 EG=0.69
+ IBV=1.00E-07 IS=9.98E-08 M=.333 N=1.47 RS=1.02E+01
+ TT=1.44E-11 VJ=.75 XTI=2
R16 sum 27 1k
C4 sum com 10p
B7 vcc com I=v(enable) * (i(r3) * (1+0.002 * v(vcc)^2) + 0.25 * (6.2m + 0.023m * v(vcc)))
B8 vcc com I=25u * (8 + v(vcc)^2) / (40 + v(vcc)^2) - v(vcc) * 1u
.ENDS
*************
*==========================================================
* CS5172
* ON Semiconductor
* 1.5A 280 kHz Boost Regulator
*
* This model was developed for ON Semiconductor by:
* AEI Systems, LLC
* 5777 W. Century Blvd. Suite 876
* Los Angeles, California 90045
* Copyright 2002, all rights reserved.
*
* This model is subject to change without notice.
* Users may not directly or indirectly re-sell or 
* re-distribute this model. This model may not 
* be used, modified, or altered 
* without the consent of ON Semiconductor. 
*
* For more information regarding modeling services,
* model libraries and simulation products, please
* call AEi Systems at (310) 863-8034, or contact 
* AEi by email: info@aeng.com. http://www.AENG.com
*
* Revision: 2/18/02, version 1.1
*==========================================================
***********************
*SRC=CS5172;CS5172;ON Semiconductor;DC-DC;1.5A Boost
*SYM=CS5172
.SUBCKT CS5172 vcc sync NFB com vc Pgnd swich
*
.SUBCKT X1_X1_osc Sync rate RAMP com Q R
C1 RAMP com 100p
B1 3 com V=tanh(100*(1-v(ramp)+.5*v(2)))-.9
B2 com RAMP I=v(rate)*v(2)
R2 3 2 1
C2 2 com .1n
X3 16 18 com 13 X_gate {  }
B3 6 com V=(1+tanh(1000*(.1-v(RAMP))))*2.5
R4 18 5 100
R3 rate com 1g
X4 R R com 20 X_gate {  }
M1 RAMP 5 com com SST211
.MODEL SST211 NMOS Level=1 CBD=5.13E-12 CBS=6.16E-12
+ CGBO=2.34E-08 CGDO=3.00E-09 CGSO=3.60E-09 GAMMA=5.00E-06
+ IS=3.25E-14 KP=1.00E-02 LAMBDA=1.40E-02 MJ=.46 PB=0.80
+ PHI=0.75 RD=3.00E+01 RS=3.60E+01 TOX=3.00E-07 VTO=0.80
X5 13 6 com 18 X_gate {  }
X6 sync 17 com 16 X_gate {  }
X7 sync 4 com 17 X_gate {  }
X1 9 Q com 7 X_gate {  }
X2 7 12 com Q X_gate {  }
R5 RAMP com 10meg
R6 6 9 1k
C3 9 com 100p
X8 6 20 com 12 X1_X1_X8_gate {  }
R7 sync 4 1k
C5 4 com 100p
.ENDS 

.SUBCKT Nerror_amp NFB com Vc
V1 1 com DC=2
R1 3 1 200k
R2 NFB 3 250k
B1 5 0 V=.000425*(v(7,com)+10m)*(-.4+tanh(500*(-v(7,com)-10m)))
B2 6 0 V=10e-6*expl(100*(v(7,com)-10m),2)
B4 com Vc I=130u*v(5)/(130u+abs(v(5)))+900u*v(6)/(abs(v(6))+900u)+20u
V5 8 com DC=1.08
D1 Vc 8 DN916
.MODEL DN916 D BV=133.3 CJO=1.75P IBV=10U IS=442P M=.333
+ N=1.70 RS=.42 TT=3.6N VJ=.75
D2 8 Vc DN916
R3 Vc com 1meg
C1 Vc com 120p
V4 NFB 7 DC=-2.45
.ENDS 

.SUBCKT X_gate A B com out
R1 A B 1meg
B1 3 com V=(1+tanh(1000*(1.5-v(A))))*(1+tanh(1000*(1.5-v(B))))
R2 3 out 1
C1 out com 1n
.ENDS 

.SUBCKT X1_X1_X8_gate A B com out
R1 A B 1meg
B1 3 com V=4-(1+tanh(1000*(1.5-v(A))))*(1+tanh(1000*(1.5-v(B))))
R2 3 out 1
C1 out com 1n
.ENDS 

X1 1 2 ramp com 5 3 X1_X1_osc {  }
R9 5 16 80
R12 sync 19 500k
B1 3 com V=1+tanh(1000*(v(vc)-v(sum)))
R2 7 Pgnd 100k
R3 16 7 7
R4x 8 Pgnd 63m
Q3 swich 7 8 Q2SC1847 
.MODEL Q2SC1847 NPN BF=250 BR=4 CJC=82.8P CJE=256P IKF=.9
+ IKR=1.35 IS=152F ISE=60.8P MJC=.3 MJE=.5 NE=2 NF=1 NR=1
+ RB=.263 RC=26.3M RE=65.7M TF=1.06N TR=737N VAF=113 VAR=16
+ VJC=.3 VJE=1.1 XTB=1.5
B2 27 com V=5*v(8)+.2*v(ramp)+1.05
X3 NFB com vc Nerror_amp {  }
V2 19 com DC=1.5
X4 vcc vcc com 17 X_gate {  }
R4 22 20 100
B3 2 com V=(56u+(2*56u)*(1-tanh(100*(v(NFB)+.670))))*0.25*(v(enable))
M1 23 20 com com SST211
.MODEL SST211 NMOS Level=1 CBD=5.13E-12 CBS=6.16E-12
+ CGBO=2.34E-08 CGDO=3.00E-09 CGSO=3.60E-09 GAMMA=5.00E-06
+ IS=3.25E-14 KP=1.00E-02 LAMBDA=1.40E-02 MJ=.46 PB=0.80
+ PHI=0.75 RD=3.00E+01 RS=3.60E+01 TOX=3.00E-07 VTO=0.80
B4 22 com V=1+tanh(100*(v(sync)-0.85))
C2 23 18 1n
X6 17 23 com enable X_gate {  }
R14 23 vcc 1meg
B5 1 com V=1+tanh(100*(v(sync)-2.5))
R11 23 18 100k
X8 17 17 com 18 X_gate {  }
D3 16 swich BAT83  M=2
.MODEL BAT83 D BV=9.00E+01 CJO=1.31E-12 EG=0.69
+ IBV=1.00E-07 IS=9.98E-08 M=.333 N=1.47 RS=1.02E+01
+ TT=1.44E-11 VJ=.75 XTI=2
R16 sum 27 1k
C4 sum com 100p
B7 vcc Pgnd I=v(enable) * (i(r3) *(1 + 0.002 * v(vcc)^2) + 0.25 * (6.2m + 0.023m * v(vcc)))
B8 vcc Pgnd I=25u * (8 + v(vcc)^2) / (40 + v(vcc)^2) - v(vcc) * 1u
.ENDS 

*************
*==========================================================
* CS5173
* ON Semiconductor
* 1.5A 280 kHz Boost Regulator
*
* This model was developed for ON Semiconductor by:
* AEI Systems, LLC
* 5777 W. Century Blvd. Suite 876
* Los Angeles, California 90045
* Copyright 2002, all rights reserved.
*
* This model is subject to change without notice.
* Users may not directly or indirectly re-sell or 
* re-distribute this model. This model may not 
* be used, modified, or altered 
* without the consent of ON Semiconductor. 
*
* For more information regarding modeling services,
* model libraries and simulation products, please
* call AEi Systems at (310) 863-8034, or contact 
* AEi by email: info@aeng.com. http://www.AENG.com
*
* Revision: 2/18/02, version 1.1
*==========================================================
*******************
*SRC=CS5173;CS5173;ON Semiconductor;DC-DC;1.5A Boost
*SYM=CS5173
.SUBCKT CS5173 Vcc Sync FB com vc Pgnd Vsw

.SUBCKT X1_osc Sync rate RAMP com Q R
C1 RAMP com 100p
B1 3 com V=tanh(100*(1-v(RAMP)+.5*v(2)))-.9
B2 com RAMP I=v(rate)*v(2)
R2 3 2 1
C2 2 com .1n
X3 16 18 com 13 X_gate {  }
B3 6 com V=(1+tanh(1000*(.1-v(RAMP))))*2.5
R4 18 5 100
R3 rate com 1g
X4 R R com 20 X_gate {  }
M1 RAMP 5 com com SST211
.MODEL SST211 NMOS Level=1 CBD=5.13E-12 CBS=6.16E-12
+ CGBO=2.34E-08 CGDO=3.00E-09 CGSO=3.60E-09 GAMMA=5.00E-06
+ IS=3.25E-14 KP=1.00E-02 LAMBDA=1.40E-02 MJ=.46 PB=0.80
+ PHI=0.75 RD=3.00E+01 RS=3.60E+01 TOX=3.00E-07 VTO=0.80
X5 13 6 com 18 X_gate {  }
X6 sync 17 com 16 X_gate {  }
X7 sync 4 com 17 X_gate {  }
X1 9 Q com 7 X_gate {  }
X2 7 12 com Q X_gate {  }
R5 RAMP com 10meg
R6 6 9 1k
C3 9 com 100p
X8 6 20 com 12 X1_X8_gate {  }
R7 sync 4 1k
C5 4 com 100p
.ENDS 

.SUBCKT X2_ErrorAmp FB com out
B1 I1 com V=sqrt((-25m-v(Vfb))^2)*12
V5 7 0 DC=1.2
B3 com out I=40u*tanh(sinh(v(I1))^1.5)-12u*v(i2)
B4 I2 com V=expl(200*(5m+v(vfb)),1)
V3 Vfb FB DC=-1.276
R1 FB com 1g
D1 out 7 DN916
.MODEL DN916 D BV=133.3 CJO=1.75P IBV=10U IS=442P M=.333
+ N=1.70 RS=.42 TT=3.6N VJ=.75
D2 7 out DN916
R3 out com 1meg
C1 out com 120p
.ENDS 

.SUBCKT X_gate A B com out
R1 A B 1meg
B1 3 com V=(1+tanh(1000*(1.5-v(A))))*(1+tanh(1000*(1.5-v(B))))
R2 3 out 1
C1 out com 1n
.ENDS 

.SUBCKT X1_X8_gate A B com out
R1 A B 1meg
B1 3 com V=4-(1+tanh(1000*(1.5-v(A))))*(1+tanh(1000*(1.5-v(B))))
R2 3 out 1
C1 out com 1n
.ENDS 

X1 1 2 ramp com 5 3 X1_osc {  }
R9 5 16 100
X2 FB com vc X2_ErrorAmp {  }
R12 sync 19 500k
B1 3 com V=1+tanh(1000*(v(vc)-v(sum)))
R2 7 Pgnd 100k
R3 16 7 7
R4x 8 Pgnd 63m
Q3 Vsw 7 8 Q2SC1847 
.MODEL Q2SC1847 NPN BF=250 BR=4 CJC=82.8P CJE=256P IKF=.9
+ IKR=1.35 IS=152F ISE=60.8P MJC=.3 MJE=.5 NE=2 NF=1 NR=1
+ RB=.263 RC=26.3M RE=65.7M TF=1.06N TR=737N VAF=113 VAR=16
+ VJC=.3 VJE=1.1 XTB=1.5
B2 27 com V=5*v(8)+.2*v(ramp)+1.05
V2 19 com DC=1.5
X4 vcc vcc com 17 X_gate {  }
R4 22 20 100
B3 2 com V=(116u+(2*116u)*(1+tanh(400*(v(FB)-.402))))*0.25*(v(enable))
M1 23 20 com com SST211
.MODEL SST211 NMOS Level=1 CBD=5.13E-12 CBS=6.16E-12
+ CGBO=2.34E-08 CGDO=3.00E-09 CGSO=3.60E-09 GAMMA=5.00E-06
+ IS=3.25E-14 KP=1.00E-02 LAMBDA=1.40E-02 MJ=.46 PB=0.80
+ PHI=0.75 RD=3.00E+01 RS=3.60E+01 TOX=3.00E-07 VTO=0.80
B4 22 com V=1+tanh(100*(v(sync)-0.85))
C2 23 18 1n
X6 17 23 com enable X_gate {  }
R14 23 vcc 1meg
B5 1 com V=1+tanh(100*(v(sync)-2.5))
R11 23 18 100k
X8 17 17 com 18 X_gate {  }
D3 16 Vsw BAT83  M=2
.MODEL BAT83 D BV=9.00E+01 CJO=1.31E-12 EG=0.69
+ IBV=1.00E-07 IS=9.98E-08 M=.333 N=1.47 RS=1.02E+01
+ TT=1.44E-11 VJ=.75 XTI=2
R16 sum 27 1k
C4 sum com 10p
B7 vcc com I=v(enable) * (i(r3) * (1 + 0.002 * v(vcc)^2) + 0.25 * (6.2m + 0.023m * v(vcc)))
B8 vcc com I=25u * (8 + v(vcc)^2) / (40 + v(vcc)^2) - v(vcc) * 1u

.ENDS 
***************
*==========================================================
* CS5174
* ON Semiconductor
* 1.5A 280 kHz Boost Regulator
*
* This model was developed for ON Semiconductor by:
* AEI Systems, LLC
* 5777 W. Century Blvd. Suite 876
* Los Angeles, California 90045
* Copyright 2002, all rights reserved.
*
* This model is subject to change without notice.
* Users may not directly or indirectly re-sell or 
* re-distribute this model. This model may not 
* be used, modified, or altered 
* without the consent of ON Semiconductor. 
*
* For more information regarding modeling services,
* model libraries and simulation products, please
* call AEi Systems at (310) 863-8034, or contact 
* AEi by email: info@aeng.com. http://www.AENG.com
*
* Revision: 2/18/02, version 1.1
*==========================================================
*******************
*SRC=CS5174;CS5174;ON Semiconductor;DC-DC;1.5A Boost
*SYM=CS5174
.SUBCKT CS5174 vcc sync NFB com vc Pgnd swich

.SUBCKT X1_X1_osc Sync rate RAMP com Q R
C1 RAMP com 100p
B1 3 com V=tanh(100*(1-v(ramp)+.5*v(2)))-.9
B2 com RAMP I=v(rate)*v(2)
R2 3 2 1
C2 2 com .1n
X3 16 18 com 13 X_gate {  }
B3 6 com V=(1+tanh(1000*(.1-v(RAMP))))*2.5
R4 18 5 100
R3 rate com 1g
X4 R R com 20 X_gate {  }
M1 RAMP 5 com com SST211
.MODEL SST211 NMOS Level=1 CBD=5.13E-12 CBS=6.16E-12
+ CGBO=2.34E-08 CGDO=3.00E-09 CGSO=3.60E-09 GAMMA=5.00E-06
+ IS=3.25E-14 KP=1.00E-02 LAMBDA=1.40E-02 MJ=.46 PB=0.80
+ PHI=0.75 RD=3.00E+01 RS=3.60E+01 TOX=3.00E-07 VTO=0.80
X5 13 6 com 18 X_gate {  }
X6 sync 17 com 16 X_gate {  }
X7 sync 4 com 17 X_gate {  }
X1 9 Q com 7 X_gate {  }
X2 7 12 com Q X_gate {  }
R5 RAMP com 10meg
R6 6 9 1k
C3 9 com 100p
X8 6 20 com 12 X1_X1_X8_gate {  }
R7 sync 4 1k
C5 4 com 100p
.ENDS 

.SUBCKT Nerror_amp NFB com Vc
V1 1 com DC=2
R1 3 1 200k
R2 NFB 3 250k
B1 5 0 V=.000425*(v(7,com)+10m)*(-.4+tanh(500*(-v(7,com)-10m)))
B2 6 0 V=10e-6*expl(100*(v(7,com)-10m),2)
B4 com Vc I=130u*v(5)/(130u+abs(v(5)))+900u*v(6)/(abs(v(6))+900u)+20u
V5 8 com DC=1.08
D1 Vc 8 DN916
.MODEL DN916 D BV=133.3 CJO=1.75P IBV=10U IS=442P M=.333
+ N=1.70 RS=.42 TT=3.6N VJ=.75
D2 8 Vc DN916
R3 Vc com 1meg
C1 Vc com 120p
V4 NFB 7 DC=-2.45
.ENDS 

.SUBCKT X_gate A B com out
R1 A B 1meg
B1 3 com V=(1+tanh(1000*(1.5-v(A))))*(1+tanh(1000*(1.5-v(B))))
R2 3 out 1
C1 out com 1n
.ENDS 

.SUBCKT X1_X1_X8_gate A B com out
R1 A B 1meg
B1 3 com V=4-(1+tanh(1000*(1.5-v(A))))*(1+tanh(1000*(1.5-v(B))))
R2 3 out 1
C1 out com 1n
.ENDS 

X1 1 2 ramp com 5 3 X1_X1_osc {  }
R9 5 16 80
R12 sync 19 500k
B1 3 com V=1+tanh(1000*(v(vc)-v(sum)))
R2 7 Pgnd 100k
R3 16 7 7
R4x 8 Pgnd 63m
Q3 swich 7 8 Q2SC1847 
.MODEL Q2SC1847 NPN BF=250 BR=4 CJC=82.8P CJE=256P IKF=.9
+ IKR=1.35 IS=152F ISE=60.8P MJC=.3 MJE=.5 NE=2 NF=1 NR=1
+ RB=.263 RC=26.3M RE=65.7M TF=1.06N TR=737N VAF=113 VAR=16
+ VJC=.3 VJE=1.1 XTB=1.5
B2 27 com V=5*v(8)+.2*v(ramp)+1.05
X3 NFB com vc Nerror_amp {  }
V2 19 com DC=1.5
X4 vcc vcc com 17 X_gate {  }
R4 22 20 100
B3 2 com V=(116u+(2*116u)*(1-tanh(100*(v(NFB)+.670))))*0.25*(v(enable))
M1 23 20 com com SST211
.MODEL SST211 NMOS Level=1 CBD=5.13E-12 CBS=6.16E-12
+ CGBO=2.34E-08 CGDO=3.00E-09 CGSO=3.60E-09 GAMMA=5.00E-06
+ IS=3.25E-14 KP=1.00E-02 LAMBDA=1.40E-02 MJ=.46 PB=0.80
+ PHI=0.75 RD=3.00E+01 RS=3.60E+01 TOX=3.00E-07 VTO=0.80
B4 22 com V=1+tanh(100*(v(sync)-0.85))
C2 23 18 1n
X6 17 23 com enable X_gate {  }
R14 23 vcc 1meg
B5 1 com V=1+tanh(100*(v(sync)-2.5))
R11 23 18 100k
X8 17 17 com 18 X_gate {  }
D3 16 swich BAT83  M=2
.MODEL BAT83 D BV=9.00E+01 CJO=1.31E-12 EG=0.69
+ IBV=1.00E-07 IS=9.98E-08 M=.333 N=1.47 RS=1.02E+01
+ TT=1.44E-11 VJ=.75 XTI=2
R16 sum 27 1k
C4 sum com 100p
B7 vcc Pgnd I=v(enable) * (i(r3) * (1 + 0.002 * v(vcc)^2) + 0.25 * (6.2m + 0.023m * v(vcc)))
B8 vcc Pgnd I=25u * (8 + v(vcc)^2) / (40 + v(vcc)^2) - v(vcc) * 1u
.ENDS 
*************
*==========================================================
* NCP1570
* ON Semiconductor
* DC-DC Synchronous Buck
*
* This model was developed for ON Semiconductor by:
* AEI Systems, LLC
* 5777 W. Century Blvd. Suite 876
* Los Angeles, California 90045
* Copyright 2002, all rights reserved.
*
* This model is subject to change without notice.
* Users may not directly or indirectly re-sell or 
* re-distribute this model. This model may not 
* be used, modified, or altered 
* without the consent of ON Semiconductor. 
*
* For more information regarding modeling services,
* model libraries and simulation products, please
* call AEi Systems at (310) 863-8034, or contact 
* AEi by email: info@aeng.com. http://www.AENG.com
*
* Revision: 1.0 
*==========================================================
************
*SRC=NCP1570;NCP1570;ON Semiconductor;DC-DC;Synchronous BUCK
*SYM=NCP1570
.SUBCKT NCP1570 1 2 3 4 5 6 7 0
*Terminal ID's
*VCC=1 PWRGD=2 PGDELAY=3 COMP=4 GATE(H)=5 GATE(L)=6
*VFB=7 GND=0
.MODEL UVL1570 SW (VT=8 VH=0.5 RON=1 ROFF=1MEG
.MODEL UVL1570GD SW (VT=0.7885 VH=0.0985 RON=1 ROFF=1MEG
.MODEL D1570 D  CJO=10P N=0.1
.MODEL D1570A D (RS=0.78 N=1.95 IS=7.075E-9 
+ CJO=4P TT=7.2N M=.4 VJ=.657 BV=100 IBV=100U)
.MODEL Q1570 NPN (IS=15.2F NF=1 BF=250 VAF=98.5 IKF=.5
+ ISE=8.2P NE=2 BR=4 NR=1 VAR=20 IKR=.225 RE=.373 RB=1.49
+ RC=.149 XTB=1.5 CJE=35.5P CJC=5P TF=1.25N TR=1.5N)
.SUBCKT RS1570 2 3 4 5 {TD=1N}
C1 11 0 10P
R3 10 8 {TD/6.9315P}
C3 8 0 10P
B1 10 0 V=V(2)>1 ? V(5)>1 ? 0 : 2
B2 16 0 V=V(3)>1 ? V(4)>1 ? 0 : 2
B5 4 0 V=V(8)>1 ? 2 : 0
B6 5 0 V=V(11)>1 ? 2 : 0
R1 16 11 {TD/6.9315P}
.ENDS
.SUBCKT LIMIT1570 1 2
RIN 1 0 1E12
E1 3 0 0 1 {K}
RC1 2 4 1MEG
C1 2 4 1F IC=0
R1 3 4 1MEG
E2 2 0 0 4 1E6
VN 5 2 {NLIM-.0597}
DN 4 5 DN
.MODEL DN D(IS=1E-12 N=.14319)
VP 2 6 {PLIM-.0597}
DP 6 4 DN
.ENDS
S1 9 10 1 0 UVL1570
X1 10 12 13 14 RS1570 {TD=1N }
R1 10 0 100K
V2 11 0 PULSE 0 2
V3 17 31 PULSE 0 25M 0 4U 999N 1N 5U 
B1 12 0 V=V(10)<1 ? 2 : V(11)<1 ? 0 : V(4)<0.25 ? V(3)<0.25 ? 0 : 2
B3 19 0 I=60U/(1+EXP(V(21)))
X2 20 15  LIMIT1570 {K=1 PLIM=100 NLIM=100 }
E1 20 0 16 7 2.133K
D1 0 19 D1570
I1 0 4 30U
V4 16 0 0.985
D2 4 19 D1570
D3 4 22 D1570
V5 22 0 2.7
R3 0 4 2.5MEG
D4 23 4 D1570
C1 21 0 1N
B4 4 0 I=0.85M*V(13)
R4 33 0 100K
V6 23 0 67M
I2 1 3 12U
D5 3 9 D1570A
V7 9 0 3.3
D6 30 32 D1570
V8 30 0 73.4M
B5 32 0 I=V(3)<3.3 ? 20M : 0
R5 32 2 100
B6 3 0 I=V(13)<1 ? V(27)<1 ? 0 : 2M
D7 25 3 D1570
V9 25 0 68M
S2 9 33 7 0 UVL1570GD
X3 28 29 27 26 RS1570 {TD=1N }
B7 29 0 V=V(28)<1 ? 2 : V(13)<1 ? 0 : 2
B8 28 0 V=V(11)<1 ? 0 : V(33)
V10 18 0 PULSE 0 2 4U 1N 1N 998N 5U 
I3 1 0 10M
V12 31 7 0.525
X4 37 34 35 36 RS1570 {TD=1N }
B9 34 0 V=V(11)<1 ? 0 : V(38)
B10 37 0 V=V(34)<1 ? 2 : V(18)>1 ? 0 : 2
B11 40 0 V=V(17)>V(4) ? 0 : 2
R7 40 39 10.1K
C3 39 0 10P
B12 38 0 V=V(39)>1 ? 2 : 0
B13 24 0 V=V(35)>1 ? V(13)<1 ? V(11) : 0
E2 41 0 42 43 1
Q1 44 43 42 Q1570
Q2 42 45 0 Q1570
V14 41 45 
V15 42 5 
B14 42 43 I=30M*V(46)+I(V14)
R8 0 5 50K
E3 44 0 1 0 1
B15 46 0 V=V(24)<1 ? -1 : V(50)>1 ? V(6)<2 ? 1 : -1
R9 24 50 12.4K
C4 50 0 10P
B16 1 0 I=I(V15)<0 ? 0 : I(V15)
E4 47 0 52 48 1
Q3 49 48 52 Q1570
Q4 52 51 0 Q1570
V16 47 51 
V17 52 6 
B17 52 48 I=30M*V(53)+I(V16)
R10 0 6 50K
E5 49 0 1 0 1
B18 53 0 V=V(24)>1 ? -1 : V(50)<1 ? V(5)<2 ? 1 : -1
B19 1 0 I=I(V17)<0 ? 0 : I(V17)
R11 15 21 18K
.ENDS
*************
*==========================================================
* NCP1571
* ON Semiconductor
* DC-DC Synchronous Buck
*
* This model was developed for ON Semiconductor by:
* AEI Systems, LLC
* 5777 W. Century Blvd. Suite 876
* Los Angeles, California 90045
* Copyright 2002, all rights reserved.
*
* This model is subject to change without notice.
* Users may not directly or indirectly re-sell or 
* re-distribute this model. This model may not 
* be used, modified, or altered 
* without the consent of ON Semiconductor. 
*
* For more information regarding modeling services,
* model libraries and simulation products, please
* call AEi Systems at (310) 863-8034, or contact 
* AEi by email: info@aeng.com. http://www.AENG.com
*
* Revision: 1.0 
*==========================================================
***********
*SRC=NCP1571;NCP1571;ON Semiconductor;DC-DC;Synchronous BUCK
*SYM=NCP1571
.SUBCKT NCP1571 1 2 3 4 5 6 7 0
*Terminal ID's
*VCC=1 PWRGD=2 PGDELAY=3 COMP=4 GATE(H)=5 GATE(L)=6
*VFB=7 GND=0
.MODEL UVL1571 SW (VT=8 VH=0.5 RON=1 ROFF=1MEG
.MODEL UVL1571GD SW (VT=0.7885 VH=0.0985 RON=1 ROFF=1MEG
.MODEL D1571 D  CJO=10P N=0.1
.MODEL D1571A D (RS=0.78 N=1.95 IS=7.075E-9 
+ CJO=4P TT=7.2N M=.4 VJ=.657 BV=100 IBV=100U)
.MODEL Q1571 NPN (IS=15.2F NF=1 BF=250 VAF=98.5 IKF=.5
+ ISE=8.2P NE=2 BR=4 NR=1 VAR=20 IKR=.225 RE=.373 RB=1.49
+ RC=.149 XTB=1.5 CJE=35.5P CJC=5P TF=1.25N TR=1.5N)
.SUBCKT RS1571 2 3 4 5 {TD=1N}
C1 11 0 10P
R3 10 8 {TD/6.9315P}
C3 8 0 10P
B1 10 0 V=V(2)>1 ? V(5)>1 ? 0 : 2
B2 16 0 V=V(3)>1 ? V(4)>1 ? 0 : 2
B5 4 0 V=V(8)>1 ? 2 : 0
B6 5 0 V=V(11)>1 ? 2 : 0
R1 16 11 {TD/6.9315P}
.ENDS
.SUBCKT LIMIT1571 1 2
RIN 1 0 1E12
E1 3 0 0 1 {K}
RC1 2 4 1MEG
C1 2 4 1F IC=0
R1 3 4 1MEG
E2 2 0 0 4 1E6
VN 5 2 {NLIM-.0597}
DN 4 5 DN
.MODEL DN D(IS=1E-12 N=.14319)
VP 2 6 {PLIM-.0597}
DP 6 4 DN
.ENDS
S1 9 10 1 0 UVL1571
X1 10 12 13 14 RS1571 {TD=1N }
R1 10 0 100K
V2 11 0 PULSE 0 2
V3 17 31 PULSE 0 25M 0 4U 999N 1N 5U 
B1 12 0 V=V(10)<1 ? 2 : V(11)<1 ? 0 : V(4)<0.25 ? V(3)<0.25 ? 0 : 2
B3 19 0 I=60U/(1+EXP(V(21)))
X2 20 15  LIMIT1571 {K=1 PLIM=100 NLIM=100 }
E1 20 0 16 7 2.133K
D1 0 19 D1571
I1 0 4 30U
V4 16 0 0.980
D2 4 19 D1571
D3 4 22 D1571
V5 22 0 2.7
R3 0 4 2.5MEG
D4 23 4 D1571
C1 21 0 1N
B4 4 0 I=0.85M*V(13)
R4 33 0 100K
V6 23 0 67M
I2 1 3 12U
D5 3 9 D1571A
V7 9 0 3.3
D6 30 32 D1571
V8 30 0 73.4M
B5 32 0 I=V(3)<3.3 ? 20M : 0
R5 32 2 100
B6 3 0 I=V(13)<1 ? V(27)<1 ? 0 : 2M
D7 25 3 D1571
V9 25 0 68M
S2 9 33 7 0 UVL1571GD
X3 28 29 27 26 RS1571 {TD=1N }
B7 29 0 V=V(28)<1 ? 2 : V(13)<1 ? 0 : 2
B8 28 0 V=V(11)<1 ? 0 : V(33)
V10 18 0 PULSE 0 2 4U 1N 1N 998N 5U 
I3 1 0 10M
V12 31 7 0.525
X4 37 34 35 36 RS1571 {TD=1N }
B9 34 0 V=V(11)<1 ? 0 : V(38)
B10 37 0 V=V(34)<1 ? 2 : V(18)>1 ? 0 : 2
B11 40 0 V=V(17)>V(4) ? 0 : 2
R7 40 39 10.1K
C3 39 0 10P
B12 38 0 V=V(39)>1 ? 2 : 0
B13 24 0 V=V(35)>1 ? V(13)<1 ? V(11) : 0
E2 41 0 42 43 1
Q1 44 43 42 Q1571
Q2 42 45 0 Q1571
V14 41 45 
V15 42 5 
B14 42 43 I=30M*V(46)+I(V14)
R8 0 5 50K
E3 44 0 1 0 1
B15 46 0 V=V(24)<1 ? -1 : V(50)>1 ? V(6)<2 ? 1 : -1
R9 24 50 14.58K
C4 50 0 10P
B16 1 0 I=I(V15)<0 ? 0 : I(V15)
E4 47 0 52 48 1
Q3 49 48 52 Q1571
Q4 52 51 0 Q1571
V16 47 51 
V17 52 6 
B17 52 48 I=30M*V(53)+I(V16)
R10 0 6 50K
E5 49 0 1 0 1
B18 53 0 V=V(13)>1 ? -1 : V(24)>1 ? -1 : V(50)<1 ? V(5)<2 ? 1 : -1
B19 1 0 I=I(V17)<0 ? 0 : I(V17)
R11 15 21 18K
.ENDS
**************
*==========================================================
* NCP1400 1.9V
* ON Semiconductor
* 180kHz BOOST converter
*
* This model was developed for ON Semiconductor by:
* AEI Systems, LLC
* 5777 W. Century Blvd. Suite 876
* Los Angeles, California 90045
* Copyright 2002, all rights reserved.
*
* This model is subject to change without notice.
* Users may not directly or indirectly re-sell or 
* re-distribute this model. This model may not 
* be used, modified, or altered 
* without the consent of ON Semiconductor. 
*
* For more information regarding modeling services,
* model libraries and simulation products, please
* call AEi Systems at (310) 863-8034, or contact 
* AEi by email: info@aeng.com. http://www.AENG.com
*
* Revision: A 
*==========================================================
*********
*SRC=NCP1400ASN19T1;NCP1400ASN19T1;ON Semiconductor;DC-DC;1.9volt 1400
*SYM=1400-3-19
.SUBCKT NCP1400ASN19T1 CE OUT 0 LX

.MODEL DN746 D BV=3.0270 CJO=582.57P IBV=10MA IS=1E-11
+ M=.33 N=1.27 RS=13.650 TT=50N VJ=.75

.SUBCKT INVB 1 2
B1 3 0 V= ~V(1)
RD 3 2 1
CD 2 0 .87NF
.ENDS
*
.SUBCKT INV 1 2
B1 4 0 V= V(1)>800mV ? 0 : 10V
RD 4 2 100
CD 2 0 10P
.ENDS
*
.SUBCKT COMPAR NINV INV OUT {VHIGH=12 VLOW=100m}
B1 4 0 V = V(NINV,INV) > 0 ? {VHIGH} : {VLOW}
RO 4 OUT 100
CO OUT 0 10P
.ENDS
*
.SUBCKT LIMIT 1 2 {K=1 PLIM=7.5 NLIM=4.25}
*Connections: In Out
*Parameters: K Gain, PLIM Positive rail in Volts, NLIM Negative rail in Volts
RIN 1 0 1E12
E1 3 0 0 1 {K}
RC1 2 4 1MEG
C1 2 4 1F IC=0
R1 3 4 1MEG
E2 2 0 0 4 1E6
*DIODES WILL HAVE .0597V DROP AT 10V INPUT FOR GAIN=1
*IDIODE = IS*EXP(.597/.O26)
VN 5 2 {NLIM-.0597}
DN 4 5 DN
.MODEL DN D(IS=1E-12 N=.14319)
VP 2 6 {PLIM-.0597}
DP 6 4 DN
.ENDS
*
.SUBCKT oscillator out rampo {dc=.01 fsw=180k valley=1 swing=4}
.PARAM I1=100u
.PARAM I2={ (I1*{DC})/(1-{DC}) }
.PARAM TSW={1/FSW}
.PARAM Ct={ (TSW/SWING)*((I1*I2)/(I1+I2)) }
Bbuf rampo 0 V=V(ramp)
Ct ramp 0 {Ct}
B3 0 ramp I=V(CMP) < 3.5 ? {I1} : 0
X1 cmp OUT INV
X4 ramp 4 cmp COMPAR {VHIGH=5}
B1 4 0 V=V(CMP) > 3V ? {valley} : {valley+swing}
B2 ramp 0 I=V(CMP) > 3.5 ? {I2} : 0
.ENDS
*
.SUBCKT PSW1 1 2 3 4 {RON=.1 ROFF=5MEG VON=1 VOFF=.9999}
*Connections + - NC+ NC-
*Parameters: Ron On Resistance in Ohms, Roff Off Resistance in Ohms
* VON On Current in Amps, VOFF Off Current in Amps
* VON > Voff Case
* IF V(3,4) > VON THEN RSwitch=RON, IF V(3,4) < VOFF THEN RSwitch=ROFF, ELSE
* RSwitch will smoothly transistion between the on and off states
B1 1 2 I=V(3,4) < {VOFF} ? V(1,2)/{ROFF} : V(3,4) > {VON} ?
+ V(1,2)/{RON} : V(1,2)/ (EXP(LN({(RON*ROFF)^.5}) +
+ 3 * LN({RON/ROFF}) * (V(3,4) - {(VON+VOFF)/2}) / ({2* (VON-VOFF)}) -
+ 2 * LN({RON/ROFF}) * (V(3,4) - {(VON+VOFF)/2})^3 / {(VON-VOFF)^3} ))
.ENDS
*
.SUBCKT PSW2 1 2 3 4 {RON=.11 ROFF=1MEG VON=0.3 VOFF=.31}
*Connections + - NC+ NC-
*Parameters: Ron On Resistance in Ohms, Roff Off Resistance in Ohms
* VON On Current in Amps, VOFF Off Current in Amps
* VON < Voff Case
* IF V(3,4) > VON THEN RSwitch=RON, IF V(3,4) < VOFF THEN RSwitch=ROFF, ELSE
* RSwitch will smoothly transistion between the on and off states
B1 1 2 I=V(3,4) < {VON} ? V(1,2)/{RON} : V(3,4) > {VOFF} ?
+ V(1,2)/{ROFF} : V(1,2)/ (EXP(LN({(RON*ROFF)^.5}) - (3 * LN({RON/ROFF}) *
+ (V(3,4) - {(VON+VOFF)/2}) / {2* (VOFF-VON)}) +
+ (2 * LN({RON/ROFF}) * (V(3,4) - {(VON+VOFF)/2})^3 / {(VOFF-VON)^3} )))
.ENDS
*
.SUBCKT fflopcb 6 8 2 1
*               S R Q Q\
BQB 10 0 V = (V(8) < 800M) & (V(2) > 800M) ? 0 : 5; one input inverted
; two input NAND
BQ 20 0 V = (V(6) < 800M) & (V(1) > 800M) ? 0 : 5
RD1 10 1 100
CD1 1 0 10p IC=5
RD2 20 2 100
CD2 2 0 10p IC=0
.ends
*
R2 2 0 10k
X1 4 5 2 8 fflopcb { }
V_5vbat 6 0 DC=5
R1 0 8 1k
R3 4 0 100k
R4 OUT 10 100k
R5 10 0 99k
D2 0 LX DN746
X5 11 7 oscillator { }
R7 6 4 100
E1 17 0 10 12 210
V3 12 0 DC=.9262
R8 CE 16 10k
X3 4 0 1 7 PSW1 {RON=1 ROFF=1MEG VON=.01 VOFF=0.0}
X7 2 0 CE 0 PSW2 {RON=.11 ROFF=1MEG VON=0.3 VOFF=.31}
R6 LX 15 .01
R10 1 0 10k
X4 15 0 2 0 PSW1 {RON=.1 ROFF=5MEG VON=1 VOFF=.9999}
V4 16 0 DC=.32
R11 7 0 10k
X6 17 1 LIMIT { K=1 PLIM=5 NLIM=-3 }
D3 0 OUT DN746
C1 OUT 10 5p
X8 11 5 INVB {  }
.ENDS
*==========================================================
* NCP1400 3.0V
* ON Semiconductor
* 180kHz BOOST converter
*
* This model was developed for ON Semiconductor by:
* AEI Systems, LLC
* 5777 W. Century Blvd. Suite 876
* Los Angeles, California 90045
* Copyright 2002, all rights reserved.
*
* This model is subject to change without notice.
* Users may not directly or indirectly re-sell or 
* re-distribute this model. This model may not 
* be used, modified, or altered 
* without the consent of ON Semiconductor. 
*
* For more information regarding modeling services,
* model libraries and simulation products, please
* call AEi Systems at (310) 863-8034, or contact 
* AEi by email: info@aeng.com. http://www.AENG.com
*
* Revision: A
*==========================================================
*********
*SRC=NCP1400ASN30T1;NCP1400ASN30T1;ON Semiconductor;DC-DC;3.0volt 1400
*SYM=1400-3-30
.SUBCKT NCP1400ASN30T1 CE OUT 0 LX
.MODEL DN746 D BV=3.0270 CJO=582.57P IBV=10MA IS=1E-11
+ M=.33 N=1.27 RS=13.650 TT=50N VJ=.75

.SUBCKT INV 1 2
B1 4 0 V= V(1)>800mV ? 0 : 10V
RD 4 2 100
CD 2 0 10P
.ENDS
*
.SUBCKT INVB 1 2
B1 3 0 V= ~V(1)
RD 3 2 1
CD 2 0 .87NF
.ENDS
*
.SUBCKT COMPAR NINV INV OUT {VHIGH=12 VLOW=100m}
B1 4 0 V = V(NINV,INV) > 0 ? {VHIGH} : {VLOW}
RO 4 OUT 100
CO OUT 0 10P
.ENDS
*
.SUBCKT LIMIT 1 2 {K=1 PLIM=7.5 NLIM=4.25}
*Connections: In Out
*Parameters: K Gain, PLIM Positive rail in Volts, NLIM Negative rail in Volts
RIN 1 0 1E12
E1 3 0 0 1 {K}
RC1 2 4 1MEG
C1 2 4 1F IC=0
R1 3 4 1MEG
E2 2 0 0 4 1E6
*DIODES WILL HAVE .0597V DROP AT 10V INPUT FOR GAIN=1
*IDIODE = IS*EXP(.597/.O26)
VN 5 2 {NLIM-.0597}
DN 4 5 DN
.MODEL DN D(IS=1E-12 N=.14319)
VP 2 6 {PLIM-.0597}
DP 6 4 DN
.ENDS
*
.SUBCKT oscillator out rampo {dc=.01 fsw=180k valley=1 swing=4}
.PARAM I1=100u
.PARAM I2={ (I1*{DC})/(1-{DC}) }
.PARAM TSW={1/FSW}
.PARAM Ct={ (TSW/SWING)*((I1*I2)/(I1+I2)) }
Bbuf rampo 0 V=V(ramp)
Ct ramp 0 {Ct}
B3 0 ramp I=V(CMP) < 3.5 ? {I1} : 0
X1 cmp OUT INV
X4 ramp 4 cmp COMPAR {VHIGH=5}
B1 4 0 V=V(CMP) > 3V ? {valley} : {valley+swing}
B2 ramp 0 I=V(CMP) > 3.5 ? {I2} : 0
.ENDS
*
.SUBCKT PSW1 1 2 3 4 {RON=.1 ROFF=5MEG VON=1 VOFF=.9999}
*Connections + - NC+ NC-
*Parameters: Ron On Resistance in Ohms, Roff Off Resistance in Ohms
* VON On Current in Amps, VOFF Off Current in Amps
* VON > Voff Case
* IF V(3,4) > VON THEN RSwitch=RON, IF V(3,4) < VOFF THEN RSwitch=ROFF, ELSE
* RSwitch will smoothly transistion between the on and off states
B1 1 2 I=V(3,4) < {VOFF} ? V(1,2)/{ROFF} : V(3,4) > {VON} ?
+ V(1,2)/{RON} : V(1,2)/ (EXP(LN({(RON*ROFF)^.5}) +
+ 3 * LN({RON/ROFF}) * (V(3,4) - {(VON+VOFF)/2}) / ({2* (VON-VOFF)}) -
+ 2 * LN({RON/ROFF}) * (V(3,4) - {(VON+VOFF)/2})^3 / {(VON-VOFF)^3} ))
.ENDS
*
.SUBCKT fflopcb 6 8 2 1
*               S R Q Q\
BQB 10 0 V = (V(8) < 800M) & (V(2) > 800M) ? 0 : 5; one input inverted
; two input NAND
BQ 20 0 V = (V(6) < 800M) & (V(1) > 800M) ? 0 : 5
RD1 10 1 100
CD1 1 0 10p IC=5
RD2 20 2 100
CD2 2 0 10p IC=0
.ends
*
.SUBCKT PSW2 1 2 3 4 {RON=.11 ROFF=1MEG VON=0.3 VOFF=.31}
*Connections + - NC+ NC-
*Parameters: Ron On Resistance in Ohms, Roff Off Resistance in Ohms
* VON On Current in Amps, VOFF Off Current in Amps
* VON < Voff Case
* IF V(3,4) > VON THEN RSwitch=RON, IF V(3,4) < VOFF THEN RSwitch=ROFF, ELSE
* RSwitch will smoothly transistion between the on and off states
B1 1 2 I=V(3,4) < {VON} ? V(1,2)/{RON} : V(3,4) > {VOFF} ?
+ V(1,2)/{ROFF} : V(1,2)/ (EXP(LN({(RON*ROFF)^.5}) - (3 * LN({RON/ROFF}) *
+ (V(3,4) - {(VON+VOFF)/2}) / {2* (VOFF-VON)}) +
+ (2 * LN({RON/ROFF}) * (V(3,4) - {(VON+VOFF)/2})^3 / {(VOFF-VON)^3} )))
.ENDS

R2 2 0 10k
X1 4 5 2 8 fflopcb { }
V_5vbat 6 0 DC=5
R1 0 8 1k
R3 4 0 100k
R4 OUT 10 100k
R5 10 0 99k
D2 0 LX DN746
X5 11 7 oscillator { }
R7 6 4 100
E1 17 0 10 12 50
V3 12 0 DC=1.4
R8 CE 16 10k
X3 4 0 1 7 PSW1 {RON=1 ROFF=1MEG VON=.01 VOFF=0.0}
X7 2 0 CE 0 PSW2 {RON=.11 ROFF=1MEG VON=0.3 VOFF=.31}
R6 LX 15 .01
R10 1 0 10k
X4 15 0 2 0 PSW1 {RON=.1 ROFF=5MEG VON=1 VOFF=.9999}
V4 16 0 DC=.32
R11 7 0 10k
X6 17 1 LIMIT { K=1 PLIM=5 NLIM=-3 }
D3 0 OUT DN746
C1 OUT 10 5p
X8 11 5 INVB {  }
.ENDS
*********
*==========================================================
* NCP1400 5.0V
* ON Semiconductor
* 180kHz BOOST converter
*
* This model was developed for ON Semiconductor by:
* AEI Systems, LLC
* 5777 W. Century Blvd. Suite 876
* Los Angeles, California 90045
* Copyright 2002, all rights reserved.
*
* This model is subject to change without notice.
* Users may not directly or indirectly re-sell or 
* re-distribute this model. This model may not 
* be used, modified, or altered 
* without the consent of ON Semiconductor. 
*
* For more information regarding modeling services,
* model libraries and simulation products, please
* call AEi Systems at (310) 863-8034, or contact 
* AEi by email: info@aeng.com. http://www.AENG.com
*
* Revision: A
*==========================================================
**********
*SRC=NCP1400ASN50T1;NCP1400ASN50T1;ON Semiconductor;DC-DC;5.0volt 1400
*SYM=1400-3-50
.SUBCKT NCP1400ASN50T1 CE OUT 0 LX

.MODEL DN746 D BV=3.0270 CJO=582.57P IBV=10MA IS=1E-11
+ M=.33 N=1.27 RS=13.650 TT=50N VJ=.75

.SUBCKT INVB 1 2
B1 3 0 V= ~V(1)
RD 3 2 1
CD 2 0 .87NF
.ENDS
*
.SUBCKT INV 1 2
B1 4 0 V= V(1)>800mV ? 0 : 10V
RD 4 2 100
CD 2 0 10P
.ENDS
*
.SUBCKT COMPAR NINV INV OUT {VHIGH=12 VLOW=100m}
B1 4 0 V = V(NINV,INV) > 0 ? {VHIGH} : {VLOW}
RO 4 OUT 100
CO OUT 0 10P
.ENDS
*
.SUBCKT LIMIT 1 2 {K=1 PLIM=7.5 NLIM=4.25}
*Connections: In Out
*Parameters: K Gain, PLIM Positive rail in Volts, NLIM Negative rail in Volts
RIN 1 0 1E12
E1 3 0 0 1 {K}
RC1 2 4 1MEG
C1 2 4 1F IC=0
R1 3 4 1MEG
E2 2 0 0 4 1E6
*DIODES WILL HAVE .0597V DROP AT 10V INPUT FOR GAIN=1
*IDIODE = IS*EXP(.597/.O26)
VN 5 2 {NLIM-.0597}
DN 4 5 DN
.MODEL DN D(IS=1E-12 N=.14319)
VP 2 6 {PLIM-.0597}
DP 6 4 DN
.ENDS
*
.SUBCKT oscillator out rampo {dc=.01 fsw=180k valley=1 swing=4}
.PARAM I1=100u
.PARAM I2={ (I1*{DC})/(1-{DC}) }
.PARAM TSW={1/FSW}
.PARAM Ct={ (TSW/SWING)*((I1*I2)/(I1+I2)) }
Bbuf rampo 0 V=V(ramp)
Ct ramp 0 {Ct}
B3 0 ramp I=V(CMP) < 3.5 ? {I1} : 0
X1 cmp OUT INV
X4 ramp 4 cmp COMPAR {VHIGH=5}
B1 4 0 V=V(CMP) > 3V ? {valley} : {valley+swing}
B2 ramp 0 I=V(CMP) > 3.5 ? {I2} : 0
.ENDS
*
.SUBCKT PSW1 1 2 3 4 {RON=.1 ROFF=5MEG VON=1 VOFF=.9999}
*Connections + - NC+ NC-
*Parameters: Ron On Resistance in Ohms, Roff Off Resistance in Ohms
* VON On Current in Amps, VOFF Off Current in Amps
* VON > Voff Case
* IF V(3,4) > VON THEN RSwitch=RON, IF V(3,4) < VOFF THEN RSwitch=ROFF, ELSE
* RSwitch will smoothly transistion between the on and off states
B1 1 2 I=V(3,4) < {VOFF} ? V(1,2)/{ROFF} : V(3,4) > {VON} ?
+ V(1,2)/{RON} : V(1,2)/ (EXP(LN({(RON*ROFF)^.5}) +
+ 3 * LN({RON/ROFF}) * (V(3,4) - {(VON+VOFF)/2}) / ({2* (VON-VOFF)}) -
+ 2 * LN({RON/ROFF}) * (V(3,4) - {(VON+VOFF)/2})^3 / {(VON-VOFF)^3} ))
.ENDS
*
.SUBCKT fflopcb 6 8 2 1
*               S R Q Q\
BQB 10 0 V = (V(8) < 800M) & (V(2) > 800M) ? 0 : 5; one input inverted
; two input NAND
BQ 20 0 V = (V(6) < 800M) & (V(1) > 800M) ? 0 : 5
RD1 10 1 100
CD1 1 0 10p IC=5
RD2 20 2 100
CD2 2 0 10p IC=0
.ends
*
.SUBCKT PSW2 1 2 3 4 {RON=.11 ROFF=1MEG VON=0.3 VOFF=.31}
*Connections + - NC+ NC-
*Parameters: Ron On Resistance in Ohms, Roff Off Resistance in Ohms
* VON On Current in Amps, VOFF Off Current in Amps
* VON < Voff Case
* IF V(3,4) > VON THEN RSwitch=RON, IF V(3,4) < VOFF THEN RSwitch=ROFF, ELSE
* RSwitch will smoothly transistion between the on and off states
B1 1 2 I=V(3,4) < {VON} ? V(1,2)/{RON} : V(3,4) > {VOFF} ?
+ V(1,2)/{ROFF} : V(1,2)/ (EXP(LN({(RON*ROFF)^.5}) - (3 * LN({RON/ROFF}) *
+ (V(3,4) - {(VON+VOFF)/2}) / {2* (VOFF-VON)}) +
+ (2 * LN({RON/ROFF}) * (V(3,4) - {(VON+VOFF)/2})^3 / {(VOFF-VON)^3} )))
.ENDS
*

R2 2 0 10k
X1 4 5 2 8 fflopcb { }
V_5vbat 6 0 DC=5
R1 0 8 1k
R3 4 0 100k
R4 OUT 10 100k
R5 10 0 95k
D2 0 LX DN746
X5 11 7 oscillator { }
R7 6 4 100
E1 17 0 10 12 30
V3 12 0 DC=2.33
R8 CE 16 10k
X3 4 0 1 7 PSW1 {RON=1 ROFF=1MEG VON=.01 VOFF=0.0}
X7 2 0 CE 0 PSW2 {RON=.11 ROFF=1MEG VON=0.3 VOFF=.31}
R6 LX 15 .01
R10 1 0 10k
X4 15 0 2 0 PSW1 {RON=.1 ROFF=5MEG VON=1 VOFF=.9999}
V4 16 0 DC=.32
R11 7 0 10k
X6 17 1 LIMIT { K=1 PLIM=5 NLIM=-3 }
D3 0 OUT DN746
C1 OUT 10 5p
X8 11 5 INVB {  }
.ENDS
************
*==========================================================
* CS51220
* ON Semiconductor
* Advanced PWM controller
*
* This model was developed for ON Semiconductor by:
* AEI Systems, LLC
* 5777 W. Century Blvd. Suite 876
* Los Angeles, California 90045
* Copyright 2002, all rights reserved.
*
* This model is subject to change without notice.
* Users may not directly or indirectly re-sell or 
* re-distribute this model. This model may not 
* be used, modified, or altered 
* without the consent of ON Semiconductor. 
*
* For more information regarding modeling services,
* model libraries and simulation products, please
* call AEi Systems at (310) 863-8034, or contact 
* AEi by email: info@aeng.com. http://www.AENG.com
*
* Revision: A
*==========================================================
**********************************************
*SRC=CS51220;CS51220;ON Semiconductor;DC-DC;PWM controller
*SYM=CS51220

*----------Starts CS51220---------------------------------------------

*      The CS51220 model is split into two major Subcircuits

*      CS51220_main2 contains the main functional elements,
*      Oscillator, Reset latch, PWM comparator and Vref generator

*      CS51220_comp2 contains the protection elements 
*      OV, UV and overcurrent comparators, hiccup circuit, softstart circuit
*      and fault latch   


.SUBCKT CS51220 Vcc DISABLE Isense Iset COMP gnd FF SYNCO VSD SYNCI Ct Vo UV OV SS Vref
X2 COMP FF SYNCO VSD SYNCI Ct Vref SS Vo 10 2 Vcc 4 gnd
+ DISABLE CS51220_main2 {  }
X4 Isense Iset 2 4 Vref gnd SS OV UV CS51220_comp2 {  }
.ENDS
*-------------Completes CS51220-------------------------------------------

*----------------------Starts CS51220_main2---------------------------------
*           Contains
*           Oscillator Subcircuit       CS51220_OSC
*           Reset latch                 RSlatch
*           PWM comparator              PWMcomp
*           Gates                       NANDpwm  NORpwm   ANDpwm
 
.SUBCKT CS51220_main2 COMP FF SYNCO Vsd SYNCI Ct Vref SS Vo OSC OC vcc Fault gnd DISABLE
X2 vcc Vsd SYNCO SYNCI 3 Ct gnd OSC 8 CS51220_OSC {  }
X5 Vref Vref 3 gnd NANDpwm {level= .505 olevel=1.1  }
X1 OSC 11 10 8 gnd 9 RSlatch {  }
X3 COMP FF SS 12 gnd 11 PWMcomp {  }
X4 Fault 9 12 gnd NANDpwm {  }
R5 vcc 32 100k
X6 DISABLE 19 Vref gnd NORpwm { olevel=3.3 level=3 }
X10 32 32 18 gnd ANDpwm { olevel=3.2 level=3.2 }
X11 18 18 19 gnd NANDpwm { olevel=3.3 }
R10 32 18 600k
R11 gnd DISABLE 150k
R6 12 17 1k
C5 17 gnd 25p
B1 28 gnd V=(1-(V(17)-v(gnd)))*(v(vcc)-V(gnd)-2)+1
R7 28 Vo 1
R9 OC 10 1
.ENDS
*-----------------------Ends CS51220_main2--------------------------------
*-----------------------Starts CS51220_comp2-------------------------------
*           Contains
*           Gates                       NANDpwm  NORpwm   ANDpwm ORpwm
*           Over current comparator     B2
*           Over voltage comparator     B6
*           Under voltage comparator    B5
.SUBCKT CS51220_comp2 Isense Iset OC Fault Vref gnd SS OV UV
X1 5 Fault 3 gnd NORpwm {  }
X2 3 4 Fault gnd NORpwm {  }
X8 15 3 16 gnd NORpwm {  }
R2 Isense 8 .06meg
R13 8 gnd .94meg
V2 27 8 DC=.2
R14 Iset gnd 1meg
X9 15 SS 22 gnd ANDpwm { level=2.8 }
*B2 OC gnd V=1+tanh(100*(v(27)-v(Iset)))
B2 OC gnd V=v(27) > v(Iset) ? 2 : 0
X3 19 9 4 gnd ORpwm {  }
X6 10 20 9 gnd ORpwm {  }
B1 11 gnd V=(3.1+v(gnd)+.1*(v(19)-v(gnd)))-v(Vref) > 0 ? 1 : 0
R3 Vref gnd 1meg
R4 11 19 1
C2 19 gnd 1n
X10 7 6 5 gnd ANDpwm {  }
B3 gnd SS I=50u*v(16)*v(vref)/3.3-5u-45U*v(22)
D2 OC 30 _D1_mod 
X11 4 4 6 gnd NORpwm {  }
D1 17 SS _D1_mod 
V5 17 gnd DC=.6
B4 18 gnd V=(.3+v(gnd)+.04*(v(7)-v(gnd)))-v(SS)  >0 ? 1 : 0
R5 18 7 1
C4 7 gnd 1n
B5 13 gnd V= (1+v(gnd)+.033*(v(20)-v(gnd)))-v(UV) >0 ? 1 : 0
R6 13 10 1
C5 10 gnd 1n
R7 UV gnd 1meg
B6 25 gnd V=(2+v(gnd)-v(OV)) > 0 ? 0 : 1
R8 25 20 1
C6 20 gnd 1n
R9 OV gnd 1meg
R12 OV 20 640k
R15 gnd 30 1k
C1 gnd 30 25n
X5 32 15 34 gnd NORpwm {  }
X4 30 30 31 gnd NORpwm { level=.2 }
X7 34 35 15 gnd NORpwm {olevel=5  }
B7 32 gnd V=v(SS,gnd) > 2.9 ? v(OC,gnd) : v(gnd)
B8 35 gnd V=v(7)+v(31)
RIset Iseta Iset 1
B9 Iseta gnd I=v(SS) < 2.8 ? V(15)*3u : 0
C7 Iseta gnd 1p
.ENDS 
*----------------------------Ends CS51220_comp2----------------------
*     CS51220_main2 SUBcircuits
*-----------------------------Starts PWMcomp---------------------------
*      The PWM comparator takes the lowest of the COMP input, Soft start voltage or 1.3 Volts
*      and compares it with the FeedForward (FF) input. It also resets FF through Q2.
.SUBCKT PWMcomp comp FF SS FFreset gnd out
Q2 FF 7 gnd BC847 
R2 7 FFreset 12k
R4 11 gnd 1meg
R5 comp 11 1
R6 12 6 1k
B1 12 gnd I=(ABS(v(16)-v(6))-(v(16)-v(6)))/2000
V6 FF 5 DC=0
B2 13 gnd V=v(5)>v(12) ? 2 : 0
R7 13 out 1
Rss SS gnd 10meg
Bss SSin gnd v=V(SS) 
R8 4 SSin 10k
B3 6 gnd V=v(4)
D1 9 gnd _D2_mod 
D2 FF 9 _D2_mod 
V7 11 16 DC=1.2
D3 17 gnd _D2_mod 
D4 4 17 _D2_mod 
.ENDS 
*---------------------------------Ends PWMcomp---------------------------------
*---------------------------------Starts CS51220_OSC---------------------------

*       The oscillator charges and discharges the external timing capacitor Ct between
*       0.9 and 2 Volts unless terminated during the cycle by SYNCI. A SYNCI pulse stream is
*       recognised and modifies the charging current to slow the oscillator for sync below
*       normal operating frequency. The Vsd input controls the timing of the SYNCO pulse. 
.SUBCKT CS51220_OSC Vcc Vsd SYNCO SYNCI enable Ct gnd OSCo NOSCo
ROSC OSC OSCo 1
RNOSC NOSC NOSCo 1
* Ct level comparator
B1 10 gnd V=v(5)-v(gnd)>.5 ? .9 : 2
R2 10 3 1.1k
V1 3 17 DC=1.065
* Ct charging source
B3 gnd Ct I=-i(v1)
X1 8 NOSC OSC gnd NORpwm { level=.5 }
R4 OSC 5 1k
C2 5 gnd 1p
Q1 Ct 6 gnd BC847
X2 OSC 11 NOSC gnd NORpwm { olevel=5 }
R5 enable 6 10k
X3 Ct Ct 11 gnd NORpwm { level=.9 }
X4 12 Ct 8 gnd ORpwm { level=2 }
R6 SYNCI gnd 150k
D1 12 16 _DMOD 
R3 SYNCI 15 100k
C3 15 gnd 2p
X7 SYNCI 14 12 gnd ANDpwm { olevel=5 level=2 }
X8 SYNCI 15 14 gnd NANDpwm { olevel=5 level=2 }
C4 16 gnd 10n
R7 16 gnd 10k
* SYNCI pulses present - modify chaging current
B2 gnd 17 V=.02*(v(16)-v(gnd))
R8 Vsd gnd 100k
B4 20 gnd V=v(ct)-v(Vsd)+.5
Q2 SYNCO 2 24 BC847
R9 19 2 5k
R10 Vcc SYNCO 1k
R12 gnd 2 3k
R13 gnd 24 10
X6 20 OSC 19 gnd NANDpwm { olevel=5 }
.ENDS
*---------------------------------Ends CS51220_OSC---------------------------
*---------------------------------Starts RSlatch------------------------------ 
*         Simple latch with reset dominant
.SUBCKT RSlatch OSC R1 R2 NOSC gnd Q
X1 12 4 3 gnd NORpwm {  }
X5 R1 6 5 gnd ORpwm {  }
X2 5 3 12 gnd NORpwm {  }
X6 R2 NOSC 6 gnd ORpwm {  }
X3 OSC 10 4 gnd ANDpwm {  }
R1 NOSC 10 100
C1 10 gnd 1n
R2 12 Q 1
.ENDS 
*---------------------------------Ends RSlatch------------------------------ 
*Models
.MODEL _D1_mod D BV=2.4
.MODEL _DMOD D
.MODEL _D2_mod D BV=133.3 CJO=1.75P IBV=10U IS=100P M=.333
+ N=1.70 RS=.42 TT=3.6N VJ=.75
.MODEL BC847 NPN BF=309 BR=4 CJC=4.70P CJE=15.9P IKF=.1
+ IKR=.15 IS=56.7F ISE=2.51P NE=2 NF=1.083 NR=1 RB=1.26
+ RC=.126 RE=.605 TF=530P TR=61.6N VAF=120 VAR=24 XTB=1.5
*Gate subcircuits
.SUBCKT ANDpwm A B out gnd {olevel=1 level=0.5} 
B1 2 gnd V=v(A,gnd)>{level} ? v(B,gnd)>{level} ? {olevel} : 0
R2 B gnd 1meg
R3 A gnd 1meg
R4 2 out 1
C1 out gnd 1n
.ENDS
*
.SUBCKT ORpwm A B out gnd {olevel=1 level=0.5} 
B1 2 gnd V=v(A,gnd)<{level} ? v(B,gnd)<{level} ? 0 : {olevel}
R2 B gnd 1meg
R3 A gnd 1meg
R4 2 out 1
C1 out gnd 1n
.ENDS
*
.SUBCKT NORpwm A B out gnd {olevel=1 level=0.5} 
B1 2 gnd V=v(A,gnd)<{level} ? v(B,gnd)<{level} ?  {olevel} :0
R2 B gnd 1meg
R3 A gnd 1meg
R4 2 out 1
C1 out gnd 1n
.ENDS
*
.SUBCKT NANDpwm A B out gnd {olevel=1 level=0.5} 
B1 2 gnd V=v(A,gnd)>{level} ? v(B,gnd)>{level} ? 0 : {olevel}
R2 B gnd 1meg
R3 A gnd 1meg
R4 2 out 1
C1 out gnd 1n
.ENDS
*************
*==========================================================
* MC34163
* ON Semiconductor
* DC-DC controller
*
* This model was developed for ON Semiconductor by:
* AEI Systems, LLC
* 5777 W. Century Blvd. Suite 876
* Los Angeles, California 90045
* Copyright 2002, all rights reserved.
*
* This model is subject to change without notice.
* Users may not directly or indirectly re-sell or 
* re-distribute this model. This model may not 
* be used, modified, or altered 
* without the consent of ON Semiconductor. 
*
* For more information regarding modeling services,
* model libraries and simulation products, please
* call AEi Systems at (310) 863-8034, or contact 
* AEi by email: info@aeng.com. http://www.AENG.com
*
* Revision: 1.0
*==========================================================
****************
*SRC=MC34163;MC34163;ON Semiconductor;DC-DC;Gated Osc. 3A
*SYM=MC33163
.SUBCKT MC34163 lvi fb2 fb1 90 ct vdd isns drc swc swe boot
.MODEL _S2_mod SW VT=.9 VH=.35
.MODEL _Q3_modX NPN BF=100
.MODEL _Q3_mod NPN BF=50
.MODEL _Q4_mod NPN BF=50 RC=.125 RE=.125 TF=0
.MODEL ZN755A D BV=7.409 CJO=42.4P IBV=20M IS=2.3F M=.33
+ N=1 RS=4.7 TT=50.1N VJ=.75
.MODEL DN4148 D BV=100V CJO=4PF IS=7E-09 M=.45 N=2 RS=.8
+ TT=6E-09 VJ=.6V
B5 5 90 V=~(v(9,90) & v(8,90))
B6 7 90 V=~(v(6,90) & v(10,90))
R3 5 10 100
R9 13 swe 60
C2 10 90 10p IC=5
B9 6 90 V=v(9,90) > 2.5 ? v(srst,90) > 2.5 ? 0 : 5
R5 7 8 100
C3 8 90 10p IC=0
S1 srst 90 ct 90 _S2_mod  
R1 srst vdd 10k
Q4 drc bias 13 _Q3_modX 
B4 comp 90 V=v(FB1,90) < v(vref,90) ? v(FB2S,90) < v(vref,90) ? 5 : 0
B2 vdd ct I=V(srst,90) > 2.5 ? 225u : -25U
B3  9 90 V=v(ilim,90) < 3.5 ? v(comp,90) > 3.5 ? 5 : 0
B10 4 90 V=v(ilim,90) < 3.5 ? v(srst,90) < 2.5 ? v(10,90) < 2.5 ? 0 : v(vdd,90)
R4 4 21 1k
Q1 bias 21 90 _Q3_mod 
B7 16 90 V=V(vdd,90)-1.5 > 1.25 ? 1.25 : V(vdd,90)-1.25 < 0 ? 0 :V(vdd,90)-1.25
V7 16 vref
R6 vref 90 400
R7x vref vdd 90k
Q3 swc 13 swe _Q4_mod 
R8 FB2 FB2S 45k
D3 drc boot ZN755A
I1 boot bias DC=2m
R12 FB2S 90 15k
B1 24 90 V=((v(vdd,90) - v(isns,90)) < .25) ? 0 : 5
R13 FB1 90 10MEG
R10 vdd isns 10MEG
D2 swe bias DN4148
R7 24 ilim 2k
C5 ilim 90 100p
B8 25 90 V=v(FB1,90) > 1.125 ? v(FB2S,90) > 1.125 ? 0 : v(vdd,90)
R14 26 25 10k
Q2 LVI 26 90 _Q3_mod 
.ENDS
**********
*==========================================================
* UC3842B
* ON Semiconductor
* PWM Controller
*
* This model was developed for ON Semiconductor by:
* AEI Systems, LLC
* 5777 W. Century Blvd. Suite 876
* Los Angeles, California 90045
* Copyright 2002, all rights reserved.
*
* This model is subject to change without notice.
* Users may not directly or indirectly re-sell or 
* re-distribute this model. This model may not 
* be used, modified, or altered 
* without the consent of ON Semiconductor. 
*
* For more information regarding modeling services,
* model libraries and simulation products, please
* call AEi Systems at (310) 863-8034, or contact 
* AEi by email: info@aeng.com. http://www.AENG.com
*
* Revision: 1.0
*==========================================================
*SRC=UC3842B;UC3842B;ON Semiconductor;PWM Controllers;96% DC, 16V/10V
*SYM=UC3845
.SUBCKT UC3842B  3    14   15   1     18    4   20   2  
*              E/A  FDBK  IS  RT/CT  GND  OUT  VC  VREF
*
.SUBCKT 1845AMP  4     1    9   20
*                VREF  INV  OUT V-
.MODEL QPMOD PNP
.MODEL DCLAMP D (RS=10 BV=5 IBV=.01)
.MODEL DMOD D
R1 10 4 100K
R2 10 20 100K
R3 6 20 316MEG
C1 6 20 15.9P
E1 5 20 6 20 1
R4 1 20 8MEG
I2 4 9 .8M
D12 9 4 DMOD
R6 20 3 300
D11 9 12 DMOD
Q1 20 13 12 QPMOD
I3 13 20 68U
D14 3 13 DMOD
D15 20 6 DCLAMP
L1 2 3 10U
C2 3 20 200P
R9 5 2 5
C5 2 20 .02U
G1 20 6 10 1 100U
.ENDS
*
.SUBCKT 1845OUT  4  7  3  12
*                +V -V IN OUT
.MODEL QMOD NPN RC=1.5 RE=.5 RB=100 IKF=0.5 CJC=0.4P
.MODEL QMOD2 NPN TF=400P TR=400P
.MODEL QIN NPN BF=100 BR=2 IS=1E-16 VAF=50 
+ CJE=1.5P CJC=.15P TR=1N TF=4N
.MODEL DMOD D RS=1 IS=0.4U
I3 4 8 100U
D3 8 4 DMOD
D4 12 8 DMOD
Q3 8 1 9 QIN
Q4 12 9 7 QMOD
Q5 4 8 6 QMOD
I4 7 1 .9M
R1 3 2 10K
Q8 1 2 7 QIN
Q2 4 6 12 QMOD2
.ENDS
*
.SUBCKT FFLOP     1    2  11 12  5     6
*                 CLK  D  R  S   QBAR  Q 
X1 7 4 2 8 NAND3 {IC=0}
X2 8 3 10 9 NAND3 {IC=0}
X3 1 8 10 7 NAND3 {IC=3.5}
X4 4 9 1 10 NAND3 {IC=0}
X5 4 7 6 5 NAND3 {IC=3.5}
X6 5 10 3 6 NAND3 {IC=0}
X7 11 4 INV {IC=3.5}
X8 12 3 INV {IC=3.5}
.ENDS
.SUBCKT NAND3 1 2 3 4 {IC=0}
B1 5 0 V=~(V(1)&V(2)&V(3))
R1 5 4 400
C1 4 0 20P IC={IC}
.ENDS
.SUBCKT INV 1 2
B1 3 0 V=~(V(1))
R1 3 2 100
C1 2 0 10P IC={IC}
.ENDS
*
****OSCILLATOR*****
S1 8 18 1 18 SOSC
.MODEL SOSC SW(RON=.01 ROFF=1MEG VT=2.05 VH=.8)
BDISCH 1 18 I=V(8,18) < 2.5 ? V(13,18) > 2.5 ? 8.3M : 0
RPULL 8 2 100K
****UVLO***********
S4 20 19 20 18 SUVLO
.MODEL SUVLO SW(RON=.01 ROFF=1MEG VT=13 VH=3)
RUVLO 19 18 1MEG
RSTDBY 20 18 32K
ROP 10 18 500
****REFERENCE*******
BREF 13 18 V=V(19,18) > 6 ? 5 : 0
RREG 10 2 .33
CREF 2 18 1n
V3 13 10 
B6 19 18 I=I(V3)
****CURRENT COMPARATOR*******
B3 21 18 V=V(15,18) > V(16,18) ? 5 : 0
R7 15 18 1MEG
RDELAY 21 22 1K
CDELAY 22 18 150P
****ERROR AMPLIFIER**********
XAMP 2 14 3 18 1845AMP
****OFFSET LIMITER***********
R4 12 11 2MEG
R6 11 18 1MEG
B2 16 18 V=V(11,18) > 1 ? 1 : V(11,18)
V4 3 9 1
D1 9 12 D2
.MODEL D2 D 
****OUTPUT DRIVER************
XDRIVE 19 18 5 4 1845OUT
****S-R LATCH****************
XLATCH 8 2 22 18 6 7 FFLOP { }
****OUTPUT AND GATE**********
B8 5 18 V=V(2,18) > 2.5 ? V(7,18) > 2.5 ? V(8,18) > 2.5 ? 10 : 0
.ENDS
********
*==========================================================
* UC3843B
* ON Semiconductor
* PWM Controller
*
* This model was developed for ON Semiconductor by:
* AEI Systems, LLC
* 5777 W. Century Blvd. Suite 876
* Los Angeles, California 90045
* Copyright 2002, all rights reserved.
*
* This model is subject to change without notice.
* Users may not directly or indirectly re-sell or 
* re-distribute this model. This model may not 
* be used, modified, or altered 
* without the consent of ON Semiconductor. 
*
* For more information regarding modeling services,
* model libraries and simulation products, please
* call AEi Systems at (310) 863-8034, or contact 
* AEi by email: info@aeng.com. http://www.AENG.com
*
* Revision: 1.0
*==========================================================
*SRC=UC3843B;UC3843B;ON Semiconductor;PWM Controllers;96% DC, 8.4V/7.6V
*SYM=UC3845
.SUBCKT UC3843B  3     14   15   1     18    4   20   2  
*               E/A   FDBK  IS  RT/CT  GND  OUT  VC  VREF
*
.SUBCKT 1845AMP  4     1    9   20
*                VREF  INV  OUT V-
.MODEL QPMOD PNP
.MODEL DCLAMP D (RS=10 BV=5 IBV=.01)
.MODEL DMOD D
R1 10 4 100K
R2 10 20 100K
R3 6 20 316MEG
C1 6 20 15.9P
E1 5 20 6 20 1
R4 1 20 8MEG
I2 4 9 .8M
D12 9 4 DMOD
R6 20 3 300
D11 9 12 DMOD
Q1 20 13 12 QPMOD
I3 13 20 68U
D14 3 13 DMOD
D15 20 6 DCLAMP
L1 2 3 10U
C2 3 20 200P
R9 5 2 5
C5 2 20 .02U
G1 20 6 10 1 100U
.ENDS
*
.SUBCKT 1845OUT  4  7  3  12
*                +V -V IN OUT
.MODEL QMOD NPN RC=1.5 RE=.5 RB=100 IKF=0.5 CJC=0.4P
.MODEL QMOD2 NPN TF=400P TR=400P
.MODEL QIN NPN BF=100 BR=2 IS=1E-16 VAF=50 
+ CJE=1.5P CJC=.15P TR=1N TF=4N
.MODEL DMOD D RS=1 IS=0.4U
I3 4 8 100U
D3 8 4 DMOD
D4 12 8 DMOD
Q3 8 1 9 QIN
Q4 12 9 7 QMOD
Q5 4 8 6 QMOD
I4 7 1 .9M
R1 3 2 10K
Q8 1 2 7 QIN
Q2 4 6 12 QMOD2
.ENDS
*
.SUBCKT FFLOP     1    2  11 12  5     6
*                 CLK  D  R  S   QBAR  Q 
X1 7 4 2 8 NAND3 {IC=0}
X2 8 3 10 9 NAND3 {IC=0}
X3 1 8 10 7 NAND3 {IC=3.5}
X4 4 9 1 10 NAND3 {IC=0}
X5 4 7 6 5 NAND3 {IC=3.5}
X6 5 10 3 6 NAND3 {IC=0}
X7 11 4 INV {IC=3.5}
X8 12 3 INV {IC=3.5}
.ENDS
.SUBCKT NAND3 1 2 3 4 {IC=0}
B1 5 0 V=~(V(1)&V(2)&V(3))
R1 5 4 400
C1 4 0 20P IC={IC}
.ENDS
.SUBCKT INV 1 2
B1 3 0 V=~(V(1))
R1 3 2 100
C1 2 0 10P IC={IC}
.ENDS
*
****OSCILLATOR*****
S1 8 18 1 18 SOSC
.MODEL SOSC SW(RON=.01 ROFF=1MEG VT=2.05 VH=.8)
BDISCH 1 18 I=V(8,18) < 2.5 ? V(13,18) > 2.5 ? 8.3M : 0
RPULL 8 2 100K
****UVLO***********
S4 20 19 20 18 SUVLO
.MODEL SUVLO SW(RON=.01 ROFF=1MEG VT=8 VH=.4)
RUVLO 19 18 1MEG
RSTDBY 20 18 16.8K
ROP 10 18 500
****REFERENCE*******
BREF 13 18 V=V(19,18) > 6 ? 5 : 0
RREG 10 2 .33
CREF 2 18 1n
V3 13 10 
B6 19 18 I=I(V3)
****CURRENT COMPARATOR*******
B3 21 18 V=V(15,18) > V(16,18) ? 5 : 0
R7 15 18 1MEG
RDELAY 21 22 1K
CDELAY 22 18 150P
****ERROR AMPLIFIER**********
XAMP 2 14 3 18 1845AMP
****OFFSET LIMITER***********
R4 12 11 2MEG
R6 11 18 1MEG
B2 16 18 V=V(11,18) > 1 ? 1 : V(11,18)
V4 3 9 1
D1 9 12 D2
.MODEL D2 D 
****OUTPUT DRIVER************
XDRIVE 19 18 5 4 1845OUT
****S-R LATCH****************
XLATCH 8 2 22 18 6 7 FFLOP { }
****OUTPUT AND GATE**********
B8 5 18 V=V(2,18) > 2.5 ? V(7,18) > 2.5 ? V(8,18) > 2.5 ? 10 : 0
.ENDS
********
*==========================================================
* UC3844B
* ON Semiconductor
* PWM Controller
*
* This model was developed for ON Semiconductor by:
* AEI Systems, LLC
* 5777 W. Century Blvd. Suite 876
* Los Angeles, California 90045
* Copyright 2002, all rights reserved.
*
* This model is subject to change without notice.
* Users may not directly or indirectly re-sell or 
* re-distribute this model. This model may not 
* be used, modified, or altered 
* without the consent of ON Semiconductor. 
*
* For more information regarding modeling services,
* model libraries and simulation products, please
* call AEi Systems at (310) 863-8034, or contact 
* AEi by email: info@aeng.com. http://www.AENG.com
*
* Revision: 1.0
*==========================================================
*SRC=UC3844B;UC3844B;ON Semiconductor;PWM Controllers;50% DC, 16V/10V
*SYM=UC3845
.SUBCKT UC3844B  3     14   15   1     18    4   20   2  
*                E/A  FDBK  IS  RT/CT  GND  OUT  VC  VREF
*
.SUBCKT 1845AMP  4     1    9   20
*                VREF  INV  OUT V-
.MODEL QPMOD PNP
.MODEL DCLAMP D (RS=10 BV=5 IBV=.01)
.MODEL DMOD D
R1 10 4 100K
R2 10 20 100K
R3 6 20 316MEG
C1 6 20 15.9P
E1 5 20 6 20 1
R4 1 20 8MEG
I2 4 9 .8M
D12 9 4 DMOD
R6 20 3 300
D11 9 12 DMOD
Q1 20 13 12 QPMOD
I3 13 20 68U
D14 3 13 DMOD
D15 20 6 DCLAMP
L1 2 3 10U
C2 3 20 200P
R9 5 2 5
C5 2 20 .02U
G1 20 6 10 1 100U
.ENDS
*
.SUBCKT 1845OUT  4  7  3  12
*                +V -V IN OUT
.MODEL QMOD NPN RC=1.5 RE=.5 RB=100 IKF=0.5 CJC=0.4P
.MODEL QMOD2 NPN TF=400P TR=400P
.MODEL QIN NPN BF=100 BR=2 IS=1E-16 VAF=50 
+ CJE=1.5P CJC=.15P TR=1N TF=4N
.MODEL DMOD D RS=1 IS=0.4U
I3 4 8 100U
D3 8 4 DMOD
D4 12 8 DMOD
Q3 8 1 9 QIN
Q4 12 9 7 QMOD
Q5 4 8 6 QMOD
I4 7 1 .9M
R1 3 2 10K
Q8 1 2 7 QIN
Q2 4 6 12 QMOD2
.ENDS
*
.SUBCKT FFLOP     1    2  11 12  5     6
*                 CLK  D  R  S   QBAR  Q 
X1 7 4 2 8 NAND3 {IC=0}
X2 8 3 10 9 NAND3 {IC=0}
X3 1 8 10 7 NAND3 {IC=3.5}
X4 4 9 1 10 NAND3 {IC=0}
X5 4 7 6 5 NAND3 {IC=3.5}
X6 5 10 3 6 NAND3 {IC=0}
X7 11 4 INV {IC=3.5}
X8 12 3 INV {IC=3.5}
.ENDS
.SUBCKT NAND3 1 2 3 4 {IC=0}
B1 5 0 V=~(V(1)&V(2)&V(3))
R1 5 4 400
C1 4 0 20P IC={IC}
.ENDS
.SUBCKT INV 1 2
B1 3 0 V=~(V(1))
R1 3 2 100
C1 2 0 10P IC={IC}
.ENDS
*
****OSCILLATOR*****
S1 8 18 1 18 SOSC
.MODEL SOSC SW(RON=.01 ROFF=1MEG VT=2.05 VH=.8)
BDISCH 1 18 I=V(8,18) < 2.5 ? V(13,18) > 2.5 ? 8.3M : 0
RPULL 8 2 100K
****UVLO***********
S4 20 19 20 18 SUVLO
.MODEL SUVLO SW(RON=.01 ROFF=1MEG VT=13 VH=3)
RUVLO 19 18 1MEG
RSTDBY 20 18 32K
ROP 10 18 500
****REFERENCE*******
BREF 13 18 V=V(19,18) > 6 ? 5 : 0
RREG 10 2 .33
CREF 2 18 1N
V3 13 10 
B6 19 18 I=I(V3)
****CURRENT COMPARATOR*******
B3 21 18 V=V(15,18) > V(16,18) ? 5 : 0
R7 15 18 1MEG
RDELAY 21 22 1K
CDELAY 22 18 150P
****ERROR AMPLIFIER**********
XAMP 2 14 3 18 1845AMP
****OFFSET LIMITER***********
R4 12 11 2MEG
R6 11 18 1MEG
B2 16 18 V=V(11,18) > 1 ? 1 : V(11,18)
V4 3 9 1
D1 9 12 D2
.MODEL D2 D 
****OUTPUT DRIVER************
XDRIVE 19 18 5 4 1845OUT
****S-R LATCH****************
XLATCH 8 2 22 18 6 7 FFLOP { }
****50% LIMIT TOGGLE*********
x9 8 150 18 18 50 51 FFLOP { }
btry 150 18 v=v(2,18) > 2.5 ? v(50,18) > 2.5 ? 5 : 0
****OUTPUT AND GATE**********
B8 5 18 V=V(2,18) > 2.5 ? V(7,18) > 2.5 ? V(8,18) > 2.5 ?
+ v(50,18) > 2.5 ? 10 : 0
.ENDS
********
*==========================================================
* UC3845B
* ON Semiconductor
* PWM Controller
*
* This model was developed for ON Semiconductor by:
* AEI Systems, LLC
* 5777 W. Century Blvd. Suite 876
* Los Angeles, California 90045
* Copyright 2002, all rights reserved.
*
* This model is subject to change without notice.
* Users may not directly or indirectly re-sell or 
* re-distribute this model. This model may not 
* be used, modified, or altered 
* without the consent of ON Semiconductor. 
*
* For more information regarding modeling services,
* model libraries and simulation products, please
* call AEi Systems at (310) 863-8034, or contact 
* AEi by email: info@aeng.com. http://www.AENG.com
*
* Revision: 1.0
*==========================================================
*SRC=UC3845B;UC3845B;ON Semiconductor;PWM Controllers;50% DC, 8.4V/7.6V
*SYM=UC3845
.SUBCKT UC3845B  3     14   15   1     18    4   20   2  
*               E/A   FDBK  IS  RT/CT  GND  OUT  VC  VREF
*
.SUBCKT 1845AMP  4     1    9   20
*                VREF  INV  OUT V-
.MODEL QPMOD PNP
.MODEL DCLAMP D (RS=10 BV=5 IBV=.01)
.MODEL DMOD D
R1 10 4 100K
R2 10 20 100K
R3 6 20 316MEG
C1 6 20 15.9P
E1 5 20 6 20 1
R4 1 20 8MEG
I2 4 9 .8M
D12 9 4 DMOD
R6 20 3 300
D11 9 12 DMOD
Q1 20 13 12 QPMOD
I3 13 20 68U
D14 3 13 DMOD
D15 20 6 DCLAMP
L1 2 3 10U
C2 3 20 200P
R9 5 2 5
C5 2 20 .02U
G1 20 6 10 1 100U
.ENDS
*
.SUBCKT 1845OUT  4  7  3  12
*                +V -V IN OUT
.MODEL QMOD NPN RC=1.5 RE=.5 RB=100 IKF=0.5 CJC=0.4P
.MODEL QMOD2 NPN TF=400P TR=400P
.MODEL QIN NPN BF=100 BR=2 IS=1E-16 VAF=50 
+ CJE=1.5P CJC=.15P TR=1N TF=4N
.MODEL DMOD D RS=1 IS=0.4U
I3 4 8 100U
D3 8 4 DMOD
D4 12 8 DMOD
Q3 8 1 9 QIN
Q4 12 9 7 QMOD
Q5 4 8 6 QMOD
I4 7 1 .9M
R1 3 2 10K
Q8 1 2 7 QIN
Q2 4 6 12 QMOD2
.ENDS
*
.SUBCKT FFLOP     1    2  11 12  5     6
*                 CLK  D  R  S   QBAR  Q 
X1 7 4 2 8 NAND3 {IC=0}
X2 8 3 10 9 NAND3 {IC=0}
X3 1 8 10 7 NAND3 {IC=3.5}
X4 4 9 1 10 NAND3 {IC=0}
X5 4 7 6 5 NAND3 {IC=3.5}
X6 5 10 3 6 NAND3 {IC=0}
X7 11 4 INV {IC=3.5}
X8 12 3 INV {IC=3.5}
.ENDS
.SUBCKT NAND3 1 2 3 4 {IC=0}
B1 5 0 V=~(V(1)&V(2)&V(3))
R1 5 4 400
C1 4 0 20P IC={IC}
.ENDS
.SUBCKT INV 1 2
B1 3 0 V=~(V(1))
R1 3 2 100
C1 2 0 10P IC={IC}
.ENDS
*
****OSCILLATOR*****
S1 8 18 1 18 SOSC
.MODEL SOSC SW(RON=.01 ROFF=1MEG VT=2.05 VH=.8)
BDISCH 1 18 I=V(8,18) < 2.5 ? V(13,18) > 2.5 ? 8.3M : 0
RPULL 8 2 100K
****UVLO***********
S4 20 19 20 18 SUVLO
.MODEL SUVLO SW(RON=.01 ROFF=1MEG VT=8 VH=.4)
RUVLO 19 18 1MEG
RSTDBY 20 18 16.8K
ROP 10 18 500
****REFERENCE*******
BREF 13 18 V=V(19,18) > 6 ? 5 : 0
RREG 10 2 .33
CREF 2 18 1N
V3 13 10 
B6 19 18 I=I(V3)
****CURRENT COMPARATOR*******
B3 21 18 V=V(15,18) > V(16,18) ? 5 : 0
R7 15 18 1MEG
RDELAY 21 22 1K
CDELAY 22 18 150P
****ERROR AMPLIFIER**********
XAMP 2 14 3 18 1845AMP
****OFFSET LIMITER***********
R4 12 11 2MEG
R6 11 18 1MEG
B2 16 18 V=V(11,18) > 1 ? 1 : V(11,18)
V4 3 9 1
D1 9 12 D2
.MODEL D2 D 
****OUTPUT DRIVER************
XDRIVE 19 18 5 4 1845OUT
****S-R LATCH****************
XLATCH 8 2 22 18 6 7 FFLOP { }
****50% LIMIT TOGGLE*********
X9 8 150 18 18 50 51 FFLOP { }
BTRY 150 18 V=V(2,18) > 2.5 ? V(50,18) > 2.5 ? 5 : 0
****OUTPUT AND GATE**********
B8 5 18 V=V(2,18) > 2.5 ? V(7,18) > 2.5 ? V(8,18) > 2.5 ?
+ V(50,18) > 2.5 ? 10 : 0
.ENDS
*************
*==========================================================
* NCP100
* ON Semiconductor
* Sub 1.0V Precision Adjustable Shunt Regulator
*
* This model was developed for ON Semiconductor by:
* AEI Systems, LLC
* 5777 W. Century Blvd. Suite 876
* Los Angeles, California 90045
* Copyright 2002, all rights reserved.
*
* This model is subject to change without notice.
* Users may not directly or indirectly re-sell or 
* re-distribute this model. This model may not 
* be used, modified, or altered 
* without the consent of ON Semiconductor. 
*
* For more information regarding modeling services,
* model libraries and simulation products, please
* call AEi Systems at (310) 216-1144, or contact 
* AEi by email: info@aeng.com. http://www.AENG.com
*
* Revision: 1.0 
*==========================================================
********
*SRC=NCP100;NCP100;ON Semiconductor;Voltage Reference;Sub 1.0V Adj Shunt
*SYM=TLV431
.SUBCKT NCP100 6 3 4
*              K A Reference
B1 3 6 I=.05 * V(7,3) > 0 ? 0 : .05 * V(7,3)
G1 3 5 2 4 240m ; .08
I1 1 2 DC=70u
R1 2 3 9.97k
R4 5 3 30 ; 100
C1 5 3 2.59u ; 1.59u
R5 5 7 10k
C2 7 3 80p
R3 6 2 7.5MEG RMOD
.MODEL RMOD R (TC1=-6.1m)
R11 6 0 1meg
D5 6 1 _DTOP 
.MODEL _DTOP D IS=1.0e-15 N=1
D1 2 1 _DTOP 
D2 3 6 _DREV 
.MODEL _DREV D IS=8.23n N=1.64 
.ENDS
*********
*==========================================================
* NCP1207 Averaged model
* ON Semiconductor model developed by Christophe BASSO, Toulouse (FRANCE)
* VHV PWM Controllers 
*
* This model is subject to change without notice.
* Users may not directly or indirectly re-sell or 
* re-distribute this model. This model may not 
* be used, modified, or altered 
* without the consent of ON Semiconductor. 
*
* Revision: October 22th 2002
*
*==========================================================
**********
*SRC=NCP1207_Avg;NCP1207_Avg;ON Semiconductor;VHV PWM Controllers;NCP1207 averaged model
*SYM=NCP1207_A
*
.SUBCKT NCP1207_Avg 13 CTRL Gnd 3 Ip Ton Fsw FB {Lp=3.22m Rs=0.8 N=0.06 eff=0.86 Rlf=0.5 Ctot=100p}
*					In CTRL Gnd Out
.PARAM DEL={3.14159*SQRT({Lp*Ctot})}
*
.SUBCKT XFMR 1    2    3    4 {RATIO=???}
RP 1 2 1MEG
E 5 4 1 2 {RATIO}
F 1 2 VM {RATIO}
RS 6 3 1U
VM 5 6 
.ENDS
*
BToff toff 0 V={Lp}*V(Ip)*{N}/V(3)
Rs 1 12 {Rlf}
X2 13 12 0 4 XFMR {RATIO=N}
Lm 13 12 {Lp}
BEt 7 Gnd V = (2*{Lp}/V(ton)) * ( ({N}*V(13)+V(3))/(V(3)+1u) + {DEL}/V(ton) + 
+({Lp}*{Ctot}/V(ton))*(1+(V(3)/{N})/V(13))  ) * I(V6)
BGd 4 3 I= ((2*{Lp}/V(ton)) * ( ({N}*V(13)+V(3))/(V(3)+1u) + {DEL}/V(ton) + 
+({Lp}*{Ctot}/V(ton))*(1+(V(3)/{N})/V(13))  ) * I(V6)^2)/(V(3,4)+1u)*{EFF} < 10m ? 10m :
+((2*{Lp}/V(ton)) * ( ({N}*V(13)+V(3))/(V(3)+1u) + {DEL}/V(ton) + 
+({Lp}*{Ctot}/V(ton))*(1+(V(3)/{N})/V(13))  ) * I(V6)^2)/(V(3,4)+1u)*{EFF}
VI1 1 7
Bton ton 0 V=V(errint)*{Lp}/({Rs}*V(13))
BIp Ip 0 V=V(ton)*V(13)/{Lp}
Bfreq Fsw 0 V=(1/(V(ton)+V(toff)+{DEL}+({Lp}*{Ctot}/V(ton))*(1+(V(3)/{N})/V(13))))/1000
B8 errint 0 V=V(CTRL)/3 > 1 ? 1 : V(CTRL)/3 < 10m ? 10m : V(CTRL)/3
R9 CTRL 0 1Meg
Bclamp 0 20 I=I(VI1)>0 ? I(VI1) : 0
V6 20 0
Rdum1 errint 0 10Meg
Rdum2 ton 0 10Meg
Rdum3 fsw 0 10Meg
Rdum4 ip 0 10Meg
Vref 100 0 4.8V
RFB 100 FB 20k
.ENDS
***********
*==========================================================
* NCP1215 Transient model
* ON Semiconductor model developed by Christophe BASSO, Toulouse (FRANCE)
* VHV PWM Controllers 
*
* This model is subject to change without notice.
* Users may not directly or indirectly re-sell or 
* re-distribute this model. This model may not 
* be used, modified, or altered 
* without the consent of ON Semiconductor. 
*
* Revision: January 5th 2003
*
*==========================================================
**********
*SRC=NCP1215;NCP1215;ON Semiconductor;VHV PWM Controllers;NCP1215 variable Toff
*SYM=NCP1215
.SUBCKT NCP1215 FB CT CS GND DRV VCC
*
.SUBCKT NAND2OUT 1 2 3
B1 4 0 V= (V(1)>800M) & (V(2)>800M) ? 100m : 5V
RD 4 3 100
CD 3 0 100P
.ENDS NAND2OUT
*
.SUBCKT PSW1 1 2 3   4 {RON=1 ROFF=1MEG VON=1 VOFF=0}
B1 1 2 I=V(3,4) < {VOFF} ? V(1,2)/{ROFF} : V(3,4) > {VON} ?
+ V(1,2)/{RON} : V(1,2)/ (EXP(LN({(RON*ROFF)^.5}) + 
+ 3 * LN({RON/ROFF}) * (V(3,4) - {(VON+VOFF)/2}) / ({2* (VON-VOFF)}) - 
+ 2 * LN({RON/ROFF}) * (V(3,4) - {(VON+VOFF)/2})^3 / {(VON-VOFF)^3} ))
.ENDS
*
.SUBCKT PSW2 1 2 3   4 {RON=1 ROFF=1MEG VON=0 VOFF=1}
B1 1 2 I=V(3,4) < {VON} ? V(1,2)/{RON} : V(3,4) > {VOFF} ?
+ V(1,2)/{ROFF} : V(1,2)/ (EXP(LN({(RON*ROFF)^.5}) - (3 * LN({RON/ROFF}) * 
+ (V(3,4) - {(VON+VOFF)/2}) / {2* (VOFF-VON)}) + 
+ (2 * LN({RON/ROFF}) * (V(3,4) - {(VON+VOFF)/2})^3 / {(VOFF-VON)^3} )))
.ENDS
*
.SUBCKT UVLO_G  1   2  30 {VON=12 VOFF=10}
*              VIN OUT Gnd
S1 1 3 1 30 SUVLO
RUV 3 30 100K
B1 4 0 V= V(3,30) > 5V ? 5V : 0
RD 4 2 100
CD 2 0 100P
.MODEL SUVLO SW RON=1 ROFF=1E6 VT={((VON-VOFF)/2) + VOFF} VH={(VON-VOFF)/2}
; VON = VT+VH = 15.0 VOFF = VT-VH = 7.6V
.ENDS UVLO_G
*
.SUBCKT COMPARHYS NINV INV OUT {VHIGH=12 VLOW=100m VHYS=50m}
B2 HYS NINV V = V(OUT) > {(VHIGH+VLOW)/2} ? {VHYS} : 0
B1 4 0 V = V(HYS,INV) > 0  ?  {VHIGH}  :  {VLOW}
RO 4 OUT 100
CO OUT 0 100PF
.ENDS
*
.SUBCKT NAND2 1 2 3
B1 4 0 V= (V(1)>800M) & (V(2)>800M) ? 100m : 5V
RD 4 3 100
CD 3 0 10P
.ENDS NAND2
*
R2 fb 1 17k
DVT 2 1 _D1_mod 
VVT 2 Gnd
B2 Vdd 7 I=I(VVT)*1.15 > 250u ? 250u : I(VVT)*1.15
R30 7 Gnd 45k
Voffset 8 7 DC=1.2V
X9 UVLO 9 12 NAND2OUT
Istartup Vcc Gnd DC=10uA
B1 Vcc Gnd I=V(UVLO) > 3 ? 300u : 0
XdrvOFF Drv Gnd 12 0 PSW1 { RON=65 VON=2 VOFF=1 }
XdrvON Vcc Drv 12 0 PSW2 { RON=110 VON=1 VOFF=2 }
B4 Vdd Ct I=V(UVLO) > 3 ? 10uA : 0
C8 9 0 100p
D8 7 Vdd DN4148
D9x Ct Vdd DN4148
D6 Gnd CS _D6_mod 
X1 CS Gnd 15 COMPARHYS { VHYS=5m }
D10 CS Vdd DN4148
X5 Vcc UVLO Gnd UVLO_G { VON=12 VOFF=8 }
X5x 3 15 17 NAND2
X6 17 19 9 NAND2
X7 9 15 19 NAND2
D11 Gnd Ct _D6_mod 
D5 fb Vcc DN4148
B7 0 CS I=V(UVLO) > 3 ? 12.5uA : 0
B6 Vdd Gnd V=V(Vcc) > 6.5 ? 6.5 : V(Vcc)
Rground Gnd 0 100Meg
X2 Ct 8 3 COMPARHYS { VHYS=5m }
C6 ct gnd 56p
B3 0 CS I=(37.5u-I(VVT)*1.33 > 0) & (V(UVLO)>3) ? 37.5u-I(VVT)*1.33 : 0
C7 fb gnd 10n
S1 Ct Gnd 9 0 Ct_RESET  
*
.MODEL Ct_RESET SW VT=2.5 VH=2
.MODEL _D1_mod D BV=1.2 RS=10m
.MODEL DN4148 D BV=100V CJO=4PF IS=7E-09 M=.45 N=2 RS=.8
+ TT=6E-09 VJ=.6V
.MODEL _D6_mod D BV=10 CJO=15p
*
.ENDS
**********
*==========================================================
* NCP1217 Transient model
* ON Semiconductor model developed by Christophe BASSO, Toulouse (FRANCE)
* VHV PWM Controllers 
*
* This model is subject to change without notice.
* Users may not directly or indirectly re-sell or 
* re-distribute this model. This model may not 
* be used, modified, or altered 
* without the consent of ON Semiconductor. 
*
* Revision: January 20th 2003
*
*==========================================================
**********
*SRC=NCP1217P65;NCP1217P65;ON Semiconductor;VHV PWM Controllers;NCP1217 65kHz
*SYM=NCP1217
.SUBCKT NCP1217P65 skip FB CS GND DRV VCC HV
X1 skip FB CS GND DRV VCC HV NCP1217 params: Fswitch=65k Conso=750u
.ENDS
*INCLUDE ONIC.LIB
**********
*SRC=NCP1217P100;NCP1217P100;ON Semiconductor;VHV PWM Controllers;NCP1217 100kHz
*SYM=NCP1217
.SUBCKT NCP1217P100 skip FB CS GND DRV VCC HV
X1 skip FB CS GND DRV VCC HV NCP1217 params: Fswitch=100k Conso=750u
.ENDS
*INCLUDE ONIC.LIB
**********
*SRC=NCP1217P133;NCP1217P133;ON Semiconductor;VHV PWM Controllers;NCP1217 133kHz
*SYM=NCP1217
.SUBCKT NCP1217P133 skip FB CS GND DRV VCC HV
X1 skip FB CS GND DRV VCC HV NCP1217 params: Fswitch=133k Conso=750u
.ENDS
*INCLUDE ONIC.LIB
**********
.SUBCKT NCP1217 skip FB CS GND DRV VCC HV {Fswitch=65k Conso=750u}
* Adj FB CS Gnd Drv Vcc HV
*
.SUBCKT LATCH 6 8 2 1 {VHIGH=10 VLOW=100m}
*
BQB   10 0 V=(V(8)<800M) & (V(2)>800M) ? {VLOW} : {VHIGH}
BQ    20 0 V=(V(6)<800M) & (V(1)>800M) ? {VLOW} : {VHIGH}
RD1   10 1 100
CD1   1 0 10p IC={VHIGH}
RD2   20 2 100
CD2   2 0 10p IC={VLOW}
.ENDS LATCH
*
.SUBCKT INV 1 2
B1 4 0 V= V(1)>800mV ? 0 : 10V
RD 4 2 100
CD 2 0 10P
.ENDS INV
*
.SUBCKT COMPAR NINV INV OUT {VHIGH=12 VLOW=100m}
B1 4 0 V = V(NINV,INV) > 0  ?  {VHIGH}  :  {VLOW}
RO 4 OUT 100
CO OUT 0 100PF
.ENDS COMPAR
*
.SUBCKT OR2 1 2 3
B1 4 0 V= (V(1)>800mV) | (V(2)>800mV) ? 10V : 100m
RD 4 3 100
CD 3 0 10P
.ENDS OR2
*
.SUBCKT PSW1 1 2 3   4 {RON=1 ROFF=1MEG VON=1 VOFF=0}
*Connections + - NC+ NC-
B1 1 2 I=V(3,4) < {VOFF} ? V(1,2)/{ROFF} : V(3,4) > {VON} ?
+ V(1,2)/{RON} : V(1,2)/ (EXP(LN({(RON*ROFF)^.5}) + 
+ 3 * LN({RON/ROFF}) * (V(3,4) - {(VON+VOFF)/2}) / ({2* (VON-VOFF)}) - 
+ 2 * LN({RON/ROFF}) * (V(3,4) - {(VON+VOFF)/2})^3 / {(VON-VOFF)^3} ))
.ENDS PSW1
*
.SUBCKT PSW2 1 2 3   4 {RON=1 ROFF=1MEG VON=0 VOFF=1}
*Connections + - NC+ NC-
B1 1 2 I=V(3,4) < {VON} ? V(1,2)/{RON} : V(3,4) > {VOFF} ?
+ V(1,2)/{ROFF} : V(1,2)/ (EXP(LN({(RON*ROFF)^.5}) - (3 * LN({RON/ROFF}) * 
+ (V(3,4) - {(VON+VOFF)/2}) / {2* (VOFF-VON)}) + 
+ (2 * LN({RON/ROFF}) * (V(3,4) - {(VON+VOFF)/2})^3 / {(VOFF-VON)^3} )))
.ENDS PSW2
*
.SUBCKT UTD 1 2 {K=??? TD=???}
*
*Parameters K=GAIN TD=DELAY
RIN 1 0 1E15
E1 3 0 1 0 {K}
T1 3 0 2 0 Z0=1 TD={TD}
R1 2 0 1
.ENDS UTD
*
.SUBCKT UVLO  1   2  {VON=12 VOFF=10}
*            VIN OUT
S1 10 3 1 0 SUVLO
RUV 3 0 100K
VCC 10 0 10V
B1 4 0 V= V(3) > 5V ? 5V : 0
RD 4 2 100
CD 2 0 100P
.MODEL SUVLO SW RON=1 ROFF=1E6 VT={((VON-VOFF)/2) + VOFF} VH={(VON-VOFF)/2}
; VON = VT+VH = 15.0 VOFF = VT-VH = 7.6V
.ENDS UVLO
*
.SUBCKT OR3 1 2 3 5
B1 4 0 V= (V(1)>800mV) | (V(2)>800mV) | (V(3)>800mV) ? 10V : 100m
RD 4 5 100
CD 5 0 10P
.ENDS OR3
*
.SUBCKT AND2 1 2 3
B1 4 0 V= (V(1)>800mV) & (V(2)>800mV) ? 10V : 100m
RD 4 3 100
CD 3 0 10P
.ENDS AND2
*
X1x 1 2 Q 4 LATCH
C8 49 rst 100p
R21 rst 0 1k
R1 4 0 100k
X16 cmp 49 INV
Rskip skip 48 22k
X4 skip 19 21 COMPAR
X17 45 rst 38 OR2
Vlatch 19 0 DC=3V
X18 21 0 Qlatch Qblatch LATCH
Rfb REF1 FB 20k ; feedback resistor
VFBM REF1 3; feedback current measure
XdrvOFF Drv Gnd 20 0 PSW1 { RON=10 VON=2 VOFF=1 }; sink
XdrvON Vcc Drv 20 0 PSW2 { RON=20 VON=1 VOFF=2 } ; source
XOscillator CMP 6 oscillator { fsw=fswitch swing=3 }
Rramp 6 CS 19k
Bsetp setpoint 0 V=V(FB)/3.3 > 1V ? 1V : V(FB)/3
X5 13 setpoint 16 COMPAR
XLEB Q LEB UTD { K=1 TD=250n } ; LEB time constant
BiMeas 13 0 V=V(LEB) > 3.5V ? V(CS) : 0
RdumCS CS 0 1Meg
XPROP 16 44 UTD { K=1 TD=90n } ; CS prop delay
Bdrive 20 0 V=(V(Q) > 3.5) & (V(Qlatch) < 3) ? 0 : V(Vcc)
Desd1 0 skip _D5_mod 
C1 CMP 15 100p
X8 Vcc UVLO1 UVLO { VON=12.8 VOFF=7.6 }
X11 Vcc UVLO2 UVLO { VON=12.8 VOFF=3.5 }
D6 0 FB _D5_mod 
Bstartup HV Vcc I=V(UVLO2) > 3.5 ? 35u : 5m
X14 44 46 38 2 OR3
BCons1 Vcc 0 I=V(UVLO2) > 3.5 ? ({conso}+I(VFBM)) : 300u
X15 UVLO1 46 INV
D7 0 CS _D5_mod 
D8 0 Vcc _D8_mod 
Bskip 48 0 V=V(UVLO1) > 3.5 ? 1.1V : 0
BFB 3 0 V=V(UVLO1) > 3.5 ? 4.8V : 0
X13 skip FB 45 COMPAR
R2 15 0 1k
D10 0 15 _D5_mod 
D11 0 rst _D5_mod 
X2 15 53 1 AND2
X3 2 53 INV
*
.MODEL _D8_mod D BV=20 CJO=10p N=0.8 RS=100m TT=100n
.MODEL _D5_mod D BV=10 CJO=10p N=0.8 RS=100m TT=100n
*
.ENDS
*
.subckt oscillator out rampo {dc=0.8 fsw=60k valley=0.5 swing=2.5}
*
.PARAM I1=100u
.PARAM I2={ (I1*{DC})/(1-{DC}) }
.PARAM TSW={1/FSW}
.PARAM Ct={ (TSW/SWING)*((I1*I2)/(I1+I2)) }
*
.SUBCKT INV 1 2
B1 4 0 V= V(1)>800mV ? 0 : 10V
RD 4 2 100
CD 2 0 10P
.ENDS
*
.SUBCKT COMPAR NINV INV OUT {VHIGH=12 VLOW=100m}
B1 4 0 V = V(NINV,INV) > 0  ?  {VHIGH}  :  {VLOW}
RO 4 OUT 100
CO OUT 0 10P
.ENDS
*
Bbuf rampo 0 V=V(ramp)
Ct ramp 0 {Ct}
B3 0 ramp I=V(CMP) < 3.5 ? {I1} : 0
X1 cmp OUT INV
X4 ramp 4 cmp COMPAR {VHIGH=5}
B1 4 0 V=V(CMP) > 3V ? {valley} : {valley+swing}
B2 ramp 0 I=V(CMP) > 3.5 ? {I2} : 0
.ENDS
*
**********
*==========================================================
* NCP1217 AC
* ON Semiconductor model developed by Christophe BASSO, Toulouse (FRANCE)
* NCP1217 average FLYBACK AC model DCM and CCM modes
* FLYBACK average model made by Ben-Gurion University (ISRAEL)
* http://www.ee.bgu.ac.il/~pel
*
* This model is subject to change without notice.
* Users may not directly or indirectly re-sell or 
* re-distribute this model. This model may not 
* be used, modified, or altered 
* without the consent of ON Semiconductor. 
*
* Revision: January 25th 2003
*==========================================================
*********
*SRC=NCP1217_Av;NCP1217_Av;ON Semiconductor;VHV PWM Controllers;Average model
*SYM=NCP1216_A
.SUBCKT NCP1217_Av In Out Gnd FB CTRL {FS=??? L=??? MC=??? RI=???}
BGIN IN GND I=I(VLM)*V(DON)/(V(DON)+V(DOFF)+1u)
BELM OUT1 GND V=V(IN)*V(DON)-V(OUT)*V(DOFF)
RM OUT1 5 1M
LM 5 8 {L}
VLM 8 GND
BGOUT GND OUT I=I(VLM)*V(DOFF)/(V(DON)+V(DOFF)+1u)
BDON DON GND V = ((V(CONTROL)-I(VLM)*{RI})*{FS})/({MC}+((0.5*{RI}*V(IN))/{L})+1u) < 10m ? 10m
+ : ((V(CONTROL)-I(VLM)*{RI})*{FS})/({MC}+((0.5*{RI}*V(IN))/{L})+1u) > .999 ? .999
+ : ((V(CONTROL)-I(VLM)*{RI})*{FS})/({MC}+((0.5*{RI}*V(IN))/{L})+1u)
VCLP VC 0 9M
D2 VC DOFF DBREAK
D1 DOFF 6 DBREAK
R4 DOFF 7 10
BDOFFM 6 GND V=1-V(DON)-9M
BDOFF 7 GND V=2*I(VLM)*{FS}*{L}/(V(DON)+1u)/(V(IN)+1u)-V(DON)
B1 CONTROL 0 V=V(CTRL)/4 > 1 ? 1 : V(CTRL)/4
Vref 50 GND DC=4.8V
Rfb 50 FB 20k
.MODEL DBREAK D (TT=1N CJO=10P N=0.01)
.ENDS
***********
* ==========================================================
* NCP1216 Transient model
* ON Semiconductor model developed by Christophe BASSO, Toulouse (FRANCE)
* EMI jittering improved by Thierry Sutto, ON Semiconductor, Toulouse (France)
* VHV PWM Controllers 
*
* This model is subject to change without notice.
* Users may not directly or indirectly re-sell or 
* re-distribute this model. This model may not 
* be used, modified, or altered 
* without the consent of ON Semiconductor.
*
* This simplified models accounts for propagation delays 
* and includes the complete overcharge detection scheme
* EMI jittering, internal ramp comp.
*
* Revision: April 18th 2003
*
*==========================================================
**********
*SRC=NCP1216P65;NCP1216P65;ON Semiconductor;VHV PWM Controllers;NCP1216 65kHz
*SYM=NCP1216
.SUBCKT NCP1216P65 skip FB CS GND DRV VCC HV
X1 skip FB CS GND DRV VCC HV NCP1216 params: Fsw=65k Conso=600u
.ENDS
*INCLUDE ONIC.LIB
**********
*SRC=NCP1216P100;NCP1216P100;ON Semiconductor;VHV PWM Controllers;NCP1216 100kHz
*SYM=NCP1216
.SUBCKT NCP1216P100 skip FB CS GND DRV VCC HV
X1 skip FB CS GND DRV VCC HV NCP1216 params: Fsw=100k Conso=600u
.ENDS
*INCLUDE ONIC.LIB
**********
*SRC=NCP1216P133;NCP1216P133;ON Semiconductor;VHV PWM Controllers;NCP1216 133kHz
*SYM=NCP1216
.SUBCKT NCP1216P133 skip FB CS GND DRV VCC HV
X1 skip FB CS GND DRV VCC HV NCP1216 params: Fsw=133k Conso=600u
.ENDS
*INCLUDE ONIC.LIB
**********
.SUBCKT NCP1216 1 2 3 4 5 6 8 params: Fsw=Fsw Conso=Conso
* Adj FB CS Gnd Drv Vcc HV
* subckt models *
**** SUBCIRCUIT MODELS ****
.SUBCKT UTD 1 2 {TD=???}
*
*Parameters K=GAIN TD=DELAY
RIN 1 0 1E15
E1 3 0 1 0 1
T1 3 0 2 0 Z0=1 TD={TD}
R1 2 0 1
.ENDS
**** 2 INPUT COMPARATOR ****
.SUBCKT COMP2 1 2 3
*             + - S
B1 4 0 V=V(1) > V(2) ? 5V : 0
RD 4 3 100
CD 3 0 10P
.ENDS COMP2
**** 4 INPUT OR GATE ****
.SUBCKT OR3 1 2 3 6
B1 5 0 V= (V(1)>800M) | (V(2)>800M) | (V(3)>800M) ? 5V : 0
RD 5 6 100
CD 6 0 10P
.ENDS OR3
**** 2 INPUT OR GATE ****
.SUBCKT OR2 1 2 3
B1 4 0 V= (V(1)>800M) | (V(2)>800M) ? 5V : 0
RD 4 3 100
CD 3 0 10P
.ENDS OR2
**** 2 INPUT AND CIRCUIT ****
.SUBCKT AND2 1 2 3
B1 4 0 V= (V(1)>800M) & (V(2)>800M) ? 5V : 0
RD 4 3 100
CD 3 0 10P
.ENDS AND2
**** 2 INPUT AND CIRCUIT ****
.SUBCKT AND2I 1 2 3
B1 4 0 V= (V(1)<800M) & (V(2)>800M) ? 5V : 0
RD 4 3 100
CD 3 0 10P
.ENDS AND2I
**** 2 INPUT NOR CIRCUIT ****
.SUBCKT NOR2 1 2 3
B1 4 0 V= (V(1)>800M) | (V(2)>800M) ? 0V : 5
RD 4 3 100
CD 3 0 10P
.ENDS NOR2
****
.SUBCKT TFFLOP 6 8 2 1
*              S R Q Q\
BQB   10 0 V=(V(8)<800M) & (V(2)>800M) ? 0 : 10V
BQ    20 0 V=(V(6)<800M) & (V(1)>800M) ? 0 : 10V
RD1   10 1 100
CD1   1 0 10p IC=5
RD2   20 2 100
CD2   2 0 10p IC=0
.ENDS TFFLOP
*
*
.SUBCKT PSW1 1 2 3   4 {RON=1 ROFF=1MEG VON=1 VOFF=0}
*Connections + - NC+ NC-
B1 1 2 I=V(3,4) < {VOFF} ? V(1,2)/{ROFF} : V(3,4) > {VON} ?
+ V(1,2)/{RON} : V(1,2)/ (EXP(LN({(RON*ROFF)^.5}) + 
+ 3 * LN({RON/ROFF}) * (V(3,4) - {(VON+VOFF)/2}) / ({2* (VON-VOFF)}) - 
+ 2 * LN({RON/ROFF}) * (V(3,4) - {(VON+VOFF)/2})^3 / {(VON-VOFF)^3} ))
.ENDS PSW1
*
.SUBCKT PSW2 1 2 3   4 {RON=1 ROFF=1MEG VON=0 VOFF=1}
*Connections + - NC+ NC-
B1 1 2 I=V(3,4) < {VON} ? V(1,2)/{RON} : V(3,4) > {VOFF} ?
+ V(1,2)/{ROFF} : V(1,2)/ (EXP(LN({(RON*ROFF)^.5}) - (3 * LN({RON/ROFF}) * 
+ (V(3,4) - {(VON+VOFF)/2}) / {2* (VOFF-VON)}) + 
+ (2 * LN({RON/ROFF}) * (V(3,4) - {(VON+VOFF)/2})^3 / {(VOFF-VON)^3} )))
.ENDS PSW2
*
***ESD NETWORK ****
D1 4 1 DCLAMP1
D2 4 2 DCLAMP1
D3 4 3 DCLAMP1
D4 4 5 DCLAMP2
D5 4 6 DCLAMP2
**** SELF-SUPPLY ****
B2 8 6 I=V(11) > 3.5 ? 0 : 7m ; DSS current capability
XCOMP1 6 10 UVLO COMP2
B5 10 4 V=V(UVLO) < 3.5 ? 12 : 10 ; DSS operating levels
X2 UVLO OVERLATCH 11 OR2
XUVLO6 100 6 110 COMP2
X50 110 OVERLATCH UVLO6 AND2
VUVLO6 100 4 6.5
**** OUTPUT PULSE VALIDATION ****
XPULS UVLO OVER PULSOK NC4 TFFLOP; turns the pulses on at UVLOh
* S R Q Q\
**** CURRENT CONSUMPTION ****
ISUPP1 6 4 {conso} ; minimum static current consumption
BSUPP2 6 4 I=V(PULSOK) > 3.5 ? (300u + I(VFBM)) : 0 ; internal operating + FB current
**** CLOCK SECTION ****
**
** Fsw={Fsw} @ Vcc=11V    }
** Fsw={Fsw}+4% @ Vcc=12V }
** Fsw={Fsw}-4% @ Vcc=10V } => DeltaV=1V, Jittering=0.04, Vref=11V
**
XCLOCK clk1 ramp 6 mduty CLOCK1216 params: DC=0.75 Fsw=Fsw Vref=11V Valley=0V Swing=2.9V DeltaV=1V Jittering=0.04
XRST MDUTY IMAX SKIP RST OR3
RRAMP RAMPCOMP 3 19k ; Internal ramp comp resistor
BRAMP RAMPCOMP 4 V=V(PULSOK)>3.5 ? V(RAMP) : 0 ; validates the ramp during Ton only
XRESET clk1 200 clk2 AND2
BINVRST 200 4 V=V(SKIP)<800mV ? 3.5 : 0
XFFLOP clk2 RST Q NC1 TFFLOP
RNC1 NC1 4 100k
**** CURRENT SENSE ****
BVREF REF1 4 V=V(6)>4.8V ? 4.8 : V(6) ; internal FB reference following Vcc
VFBM REF1 REF; feedback current measure
RFB REF 2 20k ; FB pull-up resistor
* BCLIP ISET 4 V=V(2)/3.3 > V(901) ? V(901) : V(2)/3.3; internal 1V clamping diode + SS
BCLIP ISET 4 V=V(2)/3.3 > 1 ? 1 : V(2)/3.3; internal 1V clamping diode no SS
XCOMP2 LEBO ISET OVERI COMP2
XPROPDEL OVERI IMAX UTD {TD=90ns}; propagation delay
XDEL3 Q 30 UTD {TD=250ns}
BLEB LEBO 4 V=V(30) > 3V ? V(3) : 0
**** OVERLOAD SECTION ****
BOVER 50 4 V=(V(ISET)>990mV) & (V(PULSOK)>3.5) ? 10 : 0
XOVER UVLO 50 OVER AND2I; UVLO low and OVL, latches off the pulses
XLATCH OVER UVLO6 OVERLATCH NC5 TFFLOP; latches off the current source
RNC5 NC5 4 100k
**** SKIP CYCLE SECTION ****
RADJU REF 1 120k
RADJL 1 4 31.5k
XSKIP 150 2 SKIP COMP2
BHYST 150 4 V=V(SKIP) < 3.5 ? V(1) : V(1)+100m
**** DRIVER SECTION ****
* BDRVU 90 0 V=(V(PULSOK)>3V) & (V(Q)>3V) & (V(OVPOK)>3V) ? 100mV : 5V
BDRVU 90 0 V=(V(PULSOK)>3V) & (V(Q)>3V) ? 100mV : 5V
XdrvOFF 5 4 90 0 PSW1 { RON=10 VON=2 VOFF=1 }; sink impedance
XdrvON 6 5 90 0 PSW2 { RON=20 VON=1 VOFF=2 } ; source impedance
****
.MODEL DSTD D RS=100M CJO=15pF N=0.2
.MODEL DCLAMP1 D BV=10
.MODEL DCLAMP2 D BV=20
.MODEL QRSS NPN BF=200
.ENDS
*
.SUBCKT CLOCK1216 out12 ramp vcc maxduty2 {DC=0.8 Fsw=??? Vref=11V Valley=0V Swing=2.9V DeltaV=1V Jittering=0.04}
* Fsw @ Vref
* At Vcc=Vref+DeltaV then Fsw_Vcc=Fsw*(1+Jittering)
.PARAM I1=100uA
.PARAM I2={ (I1*{DC})/(1-{DC}) }
.PARAM Tsw={1/Fsw}
.PARAM Ct={ (Tsw/Swing)*((I1*I2)/(I1+I2)) }
* coeff : frequency jittering based on Vcc level : {1+((V(vcc)-Vref)/DeltaV)*Jittering}
* the jittering depth is (0.04 = +/- 4%)
*
* Vcc input is for jittering
* SET/RESET pulses for clock gen.
*
X100 out outb INV
Cmd	outb maxduty 1n
Rmd maxduty	0 100
Dmd1 0 maxduty DCLP
Cpuls out out1 1n
Rpuls out1 0 100
Dmd2 0 out1 DCLP
*
Xbuf1 out1 out12 BUF ; formats the pulses
Xbuf2 maxduty maxduty2 BUF
*
X4	ramp	4	cmp	COMPAR
Ct	ramp	0	{Ct} IC=0V
X1 	cmp	OUT	INV
B1 4 0 V=V(CMP) > 3V ? {valley} : {valley+swing}
B2	ramp 0 I=V(CMP) > 3.5V ? ({I1}*{DC}*(1+((V(vcc)-{Vref})/{DeltaV})*{Jittering}))/(1-{DC}) : 0
B3x 0 ramp I=V(CMP) < 3.5V ? ({I1}*(1+((V(vcc)-{Vref})/{DeltaV})*{Jittering})) : 0
*
.SUBCKT INV 1 2
B1 4 0 V= V(1)>800mV ? 0 : 5V
RD 4 2 100
CD 2 0 100P
.ENDS INV
*
.SUBCKT BUF 1 2
B1 4 0 V= V(1)>0.5V ? 5V : 0V
RD 4 2 10
CD 2 0 10P
.ENDS BUF
*
.SUBCKT COMPAR NINV INV OUT {VHIGH=12 VLOW=100m}
B1 4 0 V = V(NINV,INV) > 0  ?  {VHIGH}  :  {VLOW}
RO 4 OUT 100
CO OUT 0 100P
.ENDS
*
.model DCLP D (Cjo=10p Rs=100m N=0.01)
.ENDS clock1216
*
************
*==========================================================
* NCP1216 AC
* ON Semiconductor model developed by Christophe BASSO, Toulouse (FRANCE)
* NCP1216 average FLYBACK AC model DCM and CCM modes
* FLYBACK average model made by Ben-Gurion University (ISRAEL)
* http://www.ee.bgu.ac.il/~pel
*
* This model is subject to change without notice.
* Users may not directly or indirectly re-sell or 
* re-distribute this model. This model may not 
* be used, modified, or altered 
* without the consent of ON Semiconductor. 
*
* Revision: January 25th 2003
*==========================================================
*SRC=NCP1216_Av;NCP1216_Av;ON Semiconductor;VHV PWM Controllers;Average model
*SYM=NCP1216_A
.SUBCKT NCP1216_Av In Out Gnd FB CTRL {FS=??? L=??? MC=??? RI=???}
BGIN IN GND I=I(VLM)*V(DON)/(V(DON)+V(DOFF)+1u)
BELM OUT1 GND V=V(IN)*V(DON)-V(OUT)*V(DOFF)
RM OUT1 5 1M
LM 5 8 {L}
VLM 8 GND
BGOUT GND OUT I=I(VLM)*V(DOFF)/(V(DON)+V(DOFF)+1u)
BDON DON GND V = ((V(CONTROL)-I(VLM)*{RI})*{FS})/({MC}+((0.5*{RI}*V(IN))/{L})+1u) < 10m ? 10m
+ : ((V(CONTROL)-I(VLM)*{RI})*{FS})/({MC}+((0.5*{RI}*V(IN))/{L})+1u) > .999 ? .999
+ : ((V(CONTROL)-I(VLM)*{RI})*{FS})/({MC}+((0.5*{RI}*V(IN))/{L})+1u)
VCLP VC 0 9M
D2 VC DOFF DBREAK
D1 DOFF 6 DBREAK
R4 DOFF 7 10
BDOFFM 6 GND V=1-V(DON)-9M
BDOFF 7 GND V=2*I(VLM)*{FS}*{L}/(V(DON)+1u)/(V(IN)+1u)-V(DON)
B1 CONTROL 0 V=V(CTRL)/4 > 1 ? 1 : V(CTRL)/4
Vref 50 GND DC=4.8V
Rfb 50 FB 20k
.MODEL DBREAK D (TT=1N CJO=10P N=0.01)
.ENDS
*==========================================================
* NCP101X
* ON Semiconductor model developed by Christophe BASSO, Toulouse (FRANCE)
* VHV PWM Switchers "Praded" family
*
* This model is subject to change without notice.
* Users may not directly or indirectly re-sell or 
* re-distribute this model. This model may not 
* be used, modified, or altered 
* without the consent of ON Semiconductor. 
*
* Revision: April 20th 2003
*==========================================================
************
*SRC=NCP1010P06;NCP1010P06;ON Semiconductor;Monolithic Switchers;NCP1010P06 65k-100mA-26ohms
*SYM=NCP101X
.SUBCKT NCP1010P06 VCC FB DRAIN GND
X1 VCC FB DRAIN GND NCP101X params: Fsw=65k Conso=1m Ipeak=100m Rdson=26
.ENDS
*INCLUDE ONIC.LIB
************
*SRC=NCP1010P10;NCP1010P10;ON Semiconductor;Monolithic Switchers;NCP1010P10 100k-100mA-26ohms
*SYM=NCP101X
.SUBCKT NCP1010P10 VCC FB DRAIN GND
X1 VCC FB DRAIN GND NCP101X params: Fsw=100k Conso=1m Ipeak=100m Rdson=26
.ENDS
*INCLUDE ONIC.LIB
**********
*SRC=NCP1010P13;NCP1010P13;ON Semiconductor;Monolithic Switchers;NCP1010P13 133k-100mA-26ohms
*SYM=NCP101X
.SUBCKT NCP1010P13 VCC FB DRAIN GND
X1 VCC FB DRAIN GND NCP101X params: Fsw=133k Conso=1m Ipeak=100m Rdson=26
.ENDS
*INCLUDE ONIC.LIB
************
*SRC=NCP1011P06;NCP1011P06;ON Semiconductor;Monolithic Switchers;NCP1011P06 65k-250mA-26ohms
*SYM=NCP101X
.SUBCKT NCP1011P06 VCC FB DRAIN GND
X1 VCC FB DRAIN GND NCP101X params: Fsw=65k Conso=1m Ipeak=250m Rdson=26
.ENDS
*INCLUDE ONIC.LIB
************
*SRC=NCP1011P10;NCP1011P10;ON Semiconductor;Monolithic Switchers;NCP1011P10 100k-250mA-26ohms
*SYM=NCP101X
.SUBCKT NCP1011P10 VCC FB DRAIN GND
X1 VCC FB DRAIN GND NCP101X params: Fsw=100k Conso=1m Ipeak=250m Rdson=26
.ENDS
*INCLUDE ONIC.LIB
**********
*SRC=NCP1011P13;NCP1011P13;ON Semiconductor;Monolithic Switchers;NCP1011P13 133k-250mA-26ohms
*SYM=NCP101X
.SUBCKT NCP1011P13 VCC FB DRAIN GND
X1 VCC FB DRAIN GND NCP101X params: Fsw=133k Conso=1m Ipeak=250m Rdson=26
.ENDS
*INCLUDE ONIC.LIB
***********
*SRC=NCP1012P06;NCP1012P06;ON Semiconductor;Monolithic Switchers;NCP1012P06 65k-250mA-12ohms
*SYM=NCP101X
.SUBCKT NCP1012P06 VCC FB DRAIN GND
X1 VCC FB DRAIN GND NCP101X params: Fsw=65k Conso=1m Ipeak=250m Rdson=12
.ENDS
*INCLUDE ONIC.LIB
************
*SRC=NCP1012P10;NCP1012P10;ON Semiconductor;Monolithic Switchers;NCP1013P10 100k-250mA-12ohms
*SYM=NCP101X
.SUBCKT NCP1012P10 VCC FB DRAIN GND
X1 VCC FB DRAIN GND NCP101X params: Fsw=100k Conso=1m Ipeak=250m Rdson=12
.ENDS
*INCLUDE ONIC.LIB
**********
*SRC=NCP1012P13;NCP1012P13;ON Semiconductor;Monolithic Switchers;NCP1012P13 133k-250mA-12ohms
*SYM=NCP101X
.SUBCKT NCP1012P13 VCC FB DRAIN GND
X1 VCC FB DRAIN GND NCP101X params: Fsw=133k Conso=1m Ipeak=250m Rdson=12
.ENDS
*INCLUDE ONIC.LIB
***********
*SRC=NCP1013P06;NCP1013P06;ON Semiconductor;Monolithic Switchers;NCP1013P06 65k-350mA-12ohms
*SYM=NCP101X
.SUBCKT NCP1013P06 VCC FB DRAIN GND
X1 VCC FB DRAIN GND NCP101X params: Fsw=65k Conso=1m Ipeak=350m Rdson=12
.ENDS
*INCLUDE ONIC.LIB
************
*SRC=NCP1013P10;NCP1013P10;ON Semiconductor;Monolithic Switchers;NCP1013P10 100k-350mA-12ohms
*SYM=NCP101X
.SUBCKT NCP1013P10 VCC FB DRAIN GND
X1 VCC FB DRAIN GND NCP101X params: Fsw=100k Conso=1m Ipeak=350m Rdson=12
.ENDS
*INCLUDE ONIC.LIB
**********
*SRC=NCP1013P13;NCP1013P13;ON Semiconductor;Monolithic Switchers;NCP1013P13 133k-350mA-12ohms
*SYM=NCP101X
.SUBCKT NCP1013P13 VCC FB DRAIN GND
X1 VCC FB DRAIN GND NCP101X params: Fsw=133k Conso=1m Ipeak=350m Rdson=12
.ENDS
*INCLUDE ONIC.LIB
**********
*SRC=NCP1014P06;NCP1014P06;ON Semiconductor;Monolithic Switchers;NCP1014P06 65k-450mA-12ohms
*SYM=NCP101X
.SUBCKT NCP1014P06 VCC FB DRAIN GND
X1 VCC FB DRAIN GND NCP101X params: Fsw=65k Conso=1m Ipeak=450m Rdson=12
.ENDS
*INCLUDE ONIC.LIB
**********
*SRC=NCP1014P10;NCP1014P10;ON Semiconductor;Monolithic Switchers;NCP1014P10 100k-450mA-12ohms
*SYM=NCP101X
.SUBCKT NCP1014P10 VCC FB DRAIN GND
X1 VCC FB DRAIN GND NCP101X params: Fsw=100k Conso=1m Ipeak=450m Rdson=12
.ENDS
*INCLUDE ONIC.LIB
**********
.SUBCKT NCP101X 6 2 HV 4 params: Fsw=Fsw Conso=Conso Ipeak=Ipeak Rdson=Rdson
* Vcc FB HV Gnd
.PARAM VCCOFF=8.5 ; VCCoff level
.PARAM VCCON=7.5 ; VCCon level
.PARAM IC1=7m ; DSS source current
.PARAM VCCLATCH=4.7 ; latch-off voltage
.PARAM PRODEL=125n ; internal propagation delay
.PARAM LEB=250n ; Leading Edge Blanking duration
.PARAM SKIPHYSTE=50m ; built-in hysteresis in skip
.PARAM ILATCH=6m ; Vcc OVP latching current
.PARAM IVLIMIT=65m ; internal current limitation
.PARAM RI={IVLIMIT/Ipeak}
.PARAM SKIPLEVEL=500m ; default FB skip level
.PARAM FBDIV={4*SKIPLEVEL/IVLIMIT} ; internal FB divided
.PARAM OPENFB=4 ; open-loop FB voltage
*
* subckt models *
**** SUBCIRCUIT MODELS ****
.SUBCKT UTD 1 2 {TD=???}
*
*Parameters K=GAIN TD=DELAY
RIN 1 0 1E15
E1 3 0 1 0 1
T1 3 0 2 0 Z0=1 TD={TD}
R1 2 0 1
.ENDS
**** 2 INPUT COMPARATOR ****
.SUBCKT COMP2 1 2 3
*             + - S
B1 4 0 V=V(1) > V(2) ? 5V : 100m
RD 4 3 100
CD 3 0 10P
.ENDS COMP2
**** 4 INPUT OR GATE ****
.SUBCKT OR3 1 2 3 6
B1 5 0 V= (V(1)>800M) | (V(2)>800M) | (V(3)>800M) ? 5V : 0
RD 5 6 100
CD 6 0 10P
.ENDS OR3
**** 2 INPUT OR GATE ****
.SUBCKT OR2 1 2 3
B1 4 0 V= (V(1)>800M) | (V(2)>800M) ? 5V : 0
RD 4 3 100
CD 3 0 10P
.ENDS OR2
**** 2 INPUT AND CIRCUIT ****
.SUBCKT AND2 1 2 3
B1 4 0 V= (V(1)>800M) & (V(2)>800M) ? 5V : 0
RD 4 3 100
CD 3 0 10P
.ENDS AND2
**** 2 INPUT AND CIRCUIT ****
.SUBCKT AND2I 1 2 3
B1 4 0 V= (V(1)<800M) & (V(2)>800M) ? 5V : 0
RD 4 3 100
CD 3 0 10P
.ENDS AND2I
**** 2 INPUT NOR CIRCUIT ****
.SUBCKT NOR2 1 2 3
B1 4 0 V= (V(1)>800M) | (V(2)>800M) ? 0V : 5
RD 4 3 100
CD 3 0 10P
.ENDS NOR2
****
.SUBCKT TFFLOP 6 8 2 1
*              S R Q Q\
BQB   10 0 V=(V(8)<800M) & (V(2)>800M) ? 0 : 10V
BQ    20 0 V=(V(6)<800M) & (V(1)>800M) ? 0 : 10V
RD1   10 1 100
CD1   1 0 10p IC=5
RD2   20 2 100
CD2   2 0 10p IC=0
.ENDS TFFLOP
*
.SUBCKT PSW1 1 2 3   4 {RON=1 ROFF=1MEG VON=1 VOFF=0}
*Connections + - NC+ NC-
B1 1 2 I=V(3,4) < {VOFF} ? V(1,2)/{ROFF} : V(3,4) > {VON} ?
+ V(1,2)/{RON} : V(1,2)/ (EXP(LN({(RON*ROFF)^.5}) + 
+ 3 * LN({RON/ROFF}) * (V(3,4) - {(VON+VOFF)/2}) / ({2* (VON-VOFF)}) - 
+ 2 * LN({RON/ROFF}) * (V(3,4) - {(VON+VOFF)/2})^3 / {(VON-VOFF)^3} ))
.ENDS PSW1
*
*** ESD NETWORK ****
D2 4 2 DCLAMP1 ; 10V ESD FB
D5 4 6 DCLAMP1 ; 10V ESD Vcc
**** SELF-SUPPLY ****
B2 HV 6 I=V(11) > 3.5 ? 0 : {IC1} ; DSS current capability
XCOMP1 6 10 UVLO COMP2
B5 10 4 V=V(UVLO) < 3.5 ? {VCCOFF} : {VCCON} ; DSS operating levels
X2 UVLO OVERLATCH 11 OR2
XUVLO6 100 6 110 COMP2
X50 110 OVERLATCH UVLO6 AND2
VUVLO6 100 4 {VCCLATCH} ; latch-off level
*** VCC CURRENT SENSING ***
DCLP ICLP 6 DCLP
VCLP ICLP 4 ; latching current sensing
**** OUTPUT PULSE VALIDATION ****
XPULS UVLO OVER PULSOK NC4 TFFLOP; turns the pulses on at VCCOFF
* S R Q Q\
**** CURRENT CONSUMPTION ****
ISUPP1 6 4 300u 									; minimum static current consumption
BSUPP2 6 4 I=V(PULSOK) > 3.5 ? ({conso} + I(VFBM)) : 0 ; internal operating + FB current
BSUPP3 6 4 I=I(VDRV)>0 ? I(VDRV) : 0
**** CLOCK SECTION ****
**
** Fsw={Fsw} @ Vcc=8V    }
** Fsw={Fsw}+4% @ Vcc=8.5 }
** Fsw={Fsw}-4% @ Vcc=7.5 } => DeltaV=0.5V, Jittering=0.04, Vref=8V
**
XCLOCK clk1 ramp 6 mduty CLOCK101X params: DC=0.65 Fsw=Fsw Vref=8V Valley=0V Swing=2.9V DeltaV=0.5V Jittering=0.04
****
XRST MDUTY IMAX SKIP RST OR3
XRESET clk1 200 clk2 AND2
BINVRST 200 4 V=V(SKIP,4)<800mV ? 3.5 : 0
XFFLOP clk2 RST Q NC1 TFFLOP
RNC1 NC1 4 100k
**** CURRENT SENSE ****
BVREF REF1 4 V=V(6,4)>{OPENFB} ? {OPENFB} : V(6,4) ; internal FB reference following Vcc
VFBM REF1 REF; feedback current measure
RFB REF 2 18k ; FB pull-up resistor
BCLIP ISET 4 V=V(2,4)/{FBDIV} > V(901,4) ? V(901,4) : V(2,4)/{FBDIV}; internal 1V clamping diode + SS
XCOMP2 LEBO ISET OVERI COMP2
XPROPDEL OVERI IMAX UTD {TD=PRODEL}; propagation delay
XDEL3 Q 30 UTD {TD=LEB}
BLEB LEBO 4 V=V(30,4) > 3V ? V(3,4) : 0
**** OVERLOAD SECTION ****
BOVER 50 4 V=(V(ISET,4)>{IVLIMIT}*0.98) & (V(6,4)<7.51) ? 10 : 0 ; error flag acknowledgement
XOVER UVLO 50 OVER AND2I; UVLO low and OVL, latches off the pulses
XLATCH OVER UVLO6 OVERLATCH NC5 TFFLOP; latches off the current source
RNC5 NC5 4 100k
**** SOFT-START SECTION ****
BSOFT1 4 900 I=V(PULSOK,4) > 3V ? 1mA : 0
CSOFT 900 4 0.5uF
BSOFT2 901 4 V=V(900,4)/{FBDIV} > {IVLIMIT} ? {IVLIMIT} : V(900,4)/{FBDIV}
XSOFT3 940 6 950 COMP2; reset de CSOFT at Vcc<5V
VSS 940 4 7.4V
Q100 900 920 4 QRSS
R100 920 950 10k
*** Latching section ***
B500 502 0 V=I(VCLP) > {ILATCH} ? 5V : 0
R500 502 503 100 ; noise filter
C500 503 0 10n
X501 503 RstOVP QL OVPOK TFFLOP
* S R Q Qb
RDUMLATCH QL 4 100k
X502 506 6 RstOVP COMP2
V502 506 4 3V ; Latch reset
**** SKIP CYCLE SECTION ****
VREF 1 4 {SKIPLEVEL} ; skip cycle level
XSKIP 150 2 SKIP COMP2
BHYST 150 4 V=V(SKIP,4) < 3.5 ? V(1,4) : V(1,4)+{SKIPHYSTE} ; offset on skip
**** POWER MOSFET ****
BDRVU 90 0 V=(V(PULSOK,4)>3V) & (V(Q,4)>3V) & (V(OVPOK,4)>3V) ? V(6,4) : 100m
Rdrv 90 9001 10
Vdrv 9001 9002 0
Ciss 9002 0 1n
XMOS HV 400 9002 0 PSW1 {RON=Rdson VON=4 VOFF=3};
Dbody 4 HV DB
Coss HV 4 15pF
Vsense 400 4
Bsense 4 3 I=I(Vsense) ; current sense
Rsense 3 4 R={RI} ; voltage transformation
****
.MODEL DSTD D RS=100M CJO=15pF N=0.2
.MODEL DCLAMP1 D BV=10
.MODEL DCLP D BV=8.7V ; VCC active clamping voltage
.MODEL DB D BV=700V
.MODEL QRSS NPN BF=200
.ENDS
*
.SUBCKT CLOCK101X out12 ramp vcc maxduty2 {DC=0.6 Fsw=??? Vref=8V Valley=0V Swing=2.9V DeltaV=1V Jittering=0.04}
* Fsw @ Vref
* At Vcc=Vref+DeltaV then Fsw_Vcc=Fsw*(1+Jittering)
.PARAM I1=100uA
.PARAM I2={ (I1*{DC})/(1-{DC}) }
.PARAM Tsw={1/Fsw}
.PARAM Ct={ (Tsw/Swing)*((I1*I2)/(I1+I2)) }
* coeff : frequency jittering based on Vcc level : {1+((V(vcc)-Vref)/DeltaV)*Jittering}
* the jittering depth is (0.04 = +/- 4%)
*
* Vcc input is for jittering
* SET/RESET pulses for clock gen.
*
X100 out outb INV
Cmd	outb maxduty 1n
Rmd maxduty	0 100
Dmd1 0 maxduty DCLP
Cpuls out out1 1n
Rpuls out1 0 100
Dmd2 0 out1 DCLP
*
Xbuf1 out1 out12 BUF ; formats the pulses
Xbuf2 maxduty maxduty2 BUF
*
X4	ramp	4	cmp	COMPAR
Ct	ramp	0	{Ct} IC=0V
X1 	cmp	OUT	INV
B1 4 0 V=V(CMP) > 3V ? {valley} : {valley+swing}
B2	ramp 0 I=V(CMP) > 3.5V ? ({I1}*{DC}*(1+((V(vcc)-{Vref})/{DeltaV})*{Jittering}))/(1-{DC}) : 0
B3x 0 ramp I=V(CMP) < 3.5V ? ({I1}*(1+((V(vcc)-{Vref})/{DeltaV})*{Jittering})) : 0
*
.SUBCKT INV 1 2
B1 4 0 V= V(1)>800mV ? 0 : 5V
RD 4 2 100
CD 2 0 100P
.ENDS INV
*
.SUBCKT BUF 1 2
B1 4 0 V= V(1)>0.5V ? 5V : 0V
RD 4 2 10
CD 2 0 10P
.ENDS BUF
*
.SUBCKT COMPAR NINV INV OUT {VHIGH=12 VLOW=100m}
B1 4 0 V = V(NINV,INV) > 0  ?  {VHIGH}  :  {VLOW}
RO 4 OUT 100
CO OUT 0 100P
.ENDS
*
.model DCLP D (Cjo=10p Rs=100m N=0.01)
.ENDS clock101X
*
************



